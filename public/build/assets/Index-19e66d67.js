import{k as j,l as _,K as v,T as A,h as I,F as M,m as p,p as O,f as m,a as t,u as s,w as a,q as z,o as h,Z as R,b as o,t as $,v as w,z as q,d as y,A as n,e as H,g as K,O as f}from"./app-9e53e357.js";import{_ as P,S as U}from"./AppLayout-760a1b86.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12"},G={class:"px-3 pb-2 col-span-full flex justify-end items-center"},J={class:"w-8 h-8 rounded bg-green-600 flex justify-center mr-5 items-center text-base font-semibold text-white hover:bg-green-600"},L=["href"],Q=o("i",{class:"fas fa-file-excel text-white"},null,-1),W=[Q],X={class:"align-middle"},Y={class:"flex justify-content-end text-md"},ee=["src"],te=["onClick"],oe=o("i",{class:"fas fa-trash-alt"},null,-1),se=[oe],x="Productos",c="productos",de={__name:"Index",setup(ae){const k=j(),b=_(),{permissions:C}=v().props.auth,F=A({id:""}),S=e=>{if(parseFloat(e.stock)<=parseFloat(e.stock_minimo)&&parseFloat(e.stock)==parseFloat(e.stock_futuro))return["bg-red-700 text-xs text-white"];if(parseFloat(e.stock)<=parseFloat(e.stock_minimo)&&parseFloat(e.stock_futuro)>parseFloat(e.stock))return"bg-orange-500 text-xs text-white"},T=e=>{f.get(route(c+".show",e))},B=(e,l)=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+l,text:"Se eliminarÃ¡ definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(u=>{u.isConfirmed&&F.delete(route(c+".destroy",e),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{D("success","Eliminado","Se ha eliminado"),setTimeout(()=>{f.get(route(c+".index"))},1e3)}})})};I(()=>{b.value=Array.from(v().props.productos.data,e=>e)});const D=(e,l,i)=>{k.add({severity:e,summary:l,detail:i,life:3e3})},N=()=>{f.get(route(c+".create"))},V=e=>{T(e.data.id)},d=_({global:{value:null,matchMode:M.CONTAINS}});return(e,l)=>{const i=p("Toast"),u=p("InputText"),E=p("DataTable"),g=O("tooltip");return h(),m(z,null,[t(s(R),{title:x}),t(P,{pagina:[{label:x,link:!1}]},{default:a(()=>[o("div",Z,[t(i),o("div",{class:"px-3 pb-2 col-span-full flex justify-start items-center"},[o("h5",{class:"text-2xl font-medium pr-5"},$(x))]),o("div",G,[w((h(),m("span",J,[o("a",{href:e.route("productos.exportar"),target:"_blank",class:"py-auto"},W,8,L)])),[[g,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),t(s(q),{size:"small",label:"Agregar Producto",severity:"success",onClick:N})]),o("div",X,[t(E,{rowClass:S,filters:d.value,value:b.value,pt:{bodyRow:{class:"hover:cursor-pointer hover:bg-gray-100 hover:text-black"},root:{class:"w-auto"}},globalFilterFields:["codigo_barra","origen","nombre"],scrollable:"",scrollHeight:"500px",virtualScrollerOptions:{itemSize:46},onRowClick:V,size:"small"},{header:a(()=>[o("div",Y,[t(u,{modelValue:d.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=r=>d.value.global.value=r),placeholder:"Buscar"},null,8,["modelValue"])])]),empty:a(()=>[y(" No existe Resultado ")]),loading:a(()=>[y(" Cargando... ")]),default:a(()=>[t(s(n),{field:"stock",sortable:"",header:"Stock",pt:{bodyCell:{class:"text-center w-12"}}}),t(s(n),{field:"stock_futuro",sortable:"",header:"Stock futuro",pt:{bodyCell:{class:"text-center w-12"}}}),t(s(n),{field:"imagen",header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"w-10"}}},{loading:a(()=>[]),body:a(r=>[o("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:r.data.imagen,alt:"image"},null,8,ee)]),_:1}),t(s(n),{field:"origen",header:"Origen",sortable:"",pt:{bodyCell:{class:"text-center w-36"}}}),t(s(n),{field:"nombre",header:"Nombre",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(s(n),{header:"Acciones",style:{width:"80px"},class:"px-auto"},{loading:a(()=>[]),body:a(r=>[s(C).includes("eliminar-productos")?w((h(),m("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:H(le=>B(r.data.id,r.data.nombre),["prevent"])},se,8,te)),[[g,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):K("",!0)]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{de as default};
