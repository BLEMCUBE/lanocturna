import{k as D,l as r,T as $,h as E,m as k,f as p,a as l,u as i,w as n,q as w,o as f,Z as T,b as e,t as m,z as v,n as B,e as I,s as L,g as V,O}from"./app-569248ac.js";import{_ as P}from"./AppLayout-c3cea8b8.js";import{_ as U}from"./InputError-5c9febba.js";import{_ as q}from"./InputLabel-9883071f.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-8"},G={class:"grid grid-cols-12 gap-4 py-3"},H={class:"col-span-7 sm:col-span-12 md:col-span-6 shadow-default lg:col-span-5 2xl:col-span-6 mx-2"},J=["disabled"],K={class:"col-span-3 font-medium sm:col-span-6 shadow-default xl:col-span-3 2xl:col-span-3 flex h-auto items-end justify-center"},Q={class:"h-8"},R={class:"col-span-3 shadow-default xl:col-span-3 flex h-auto items-end 2xl:col-span-2 justify-center"},W={class:"h-8"},X={key:0},Y=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos no estan registrado , por favor registre y vuelva a intentar. ",-1),ee={class:"w-full border"},se=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),te={class:"w-full text-center border"},le={class:"text-center border"},oe={class:"text-center border"},ae=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ie={class:"flex justify-end py-3"},re={class:"mb-2 mt-0 font-semibold text-center text-md"},ne=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ce={class:"flex justify-end py-3"},b="Ajuste Stock",C="productos",_e={__name:"AjustarStock",setup(de){const S=D(),x=r(!1),c=r(null),o=$({archivo:""}),d=r(!1),u=r(!1),_=r(),g=r();E(()=>{});const j=(s,t,h)=>{S.add({severity:s,summary:t,detail:h,life:3e3})},z=s=>{s.preventDefault(),o.archivo=s.target.files[0]},A=()=>{c.value.value=null,o.reset("archivo"),d.value=!1},F=()=>{c.value.value=null,o.reset("archivo"),u.value=!1},M=s=>{if(s.length>0)window.open(route("plantillas.importar",s),"_blank");else return},N=()=>{x.value=!0,o.clearErrors(),o.post(route(C+".importarstock"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x.value=!1,j("success","Mensaje","Stock Ajustado"),setTimeout(()=>{O.get(route(C+".ajuste-stock"))},1e3)},onFinish:()=>{},onError:s=>{x.value=!1,c.value.value=null,o.reset("archivo"),s.filas!=null?s.filas.length>0&&(_.value=s.filas,d.value=!0):s.error_sku!=null&&s.error_sku.length>0&&(g.value=s.error_sku,u.value=!0)}})};return(s,t)=>{const h=k("Toast"),y=k("Dialog");return f(),p(w,null,[l(i(T),{title:b}),l(P,{pagina:[{label:b,link:!1}]},{default:n(()=>[e("div",Z,[l(h),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},m(b))]),e("div",G,[e("div",H,[l(q,{for:"file_input1",value:"Importar excel",class:"block text-base font-semibold leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:c,onInput:z,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:i(o).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,J),l(U,{class:"mt-1 text-xs",message:i(o).errors.archivo},null,8,["message"])]),e("div",K,[e("div",Q,[l(i(v),{label:"Importar",type:"button",class:B(["text-normal font-medium",{"opacity-50":i(o).processing}]),disabled:i(o).processing,onClick:I(N,["prevent"])},null,8,["class","disabled","onClick"])])]),e("div",R,[e("div",W,[l(i(v),{label:"Descargar formato",size:"md",severity:"success",type:"button",class:"p-1 text-xs font-medium ring-0",onClick:t[0]||(t[0]=a=>M("importar_stock_productos.xlsx"))})])])])]),l(y,{visible:d.value,"onUpdate:visible":t[2]||(t[2]=a=>d.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ae]),default:n(()=>[_.value.length>0?(f(),p("div",X,[Y,e("table",ee,[se,e("tbody",null,[(f(!0),p(w,null,L(_.value,a=>(f(),p("tr",te,[e("td",le,m(a.fila),1),e("td",oe,m(a.sku),1)]))),256))])])])):V("",!0),e("div",ie,[l(i(v),{label:"Aceptar",size:"small",type:"button",onClick:t[1]||(t[1]=a=>A())})])]),_:1},8,["visible"]),l(y,{visible:u.value,"onUpdate:visible":t[4]||(t[4]=a=>u.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ne]),default:n(()=>[e("div",null,[e("p",re,m(g.value),1)]),e("div",ce,[l(i(v),{label:"Aceptar",size:"small",type:"button",onClick:t[3]||(t[3]=a=>F())})])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}};export{_e as default};
