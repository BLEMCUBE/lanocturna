import{r as c,o as H,O as h,g as m,S as t,E as s,V as O,F as Q,f,j as r,A as p,n as w,Q as Z,a2 as q,u as J,t as W}from"./@vue-1043e4d5.js";import{_ as X}from"./AppLayout-842afc1b.js";import{T as ee,K as C,Z as oe,O as A}from"./@inertiajs-ab1bf9dd.js";import{aG as te,h as M}from"./primevue-232ee6f7.js";import{_ as d}from"./InputError-933cc936.js";import{_ as n}from"./InputLabel-bc304214.js";import{i as k}from"./vue-datepicker-next-31061510.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./sweetalert2-c47eda61.js";import"./apexcharts-f697a6eb.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";const ae={class:"grid grid-cols-12 p-0 m-0 gap-4 mb-4 bg-white col-span-12 py-2 rounded-lg shadow-lg lg:col-span-12 2xl:col-span-10"},se={class:"m-4 col-span-12 lg:col-span-12"},le={class:"px-0 py-1 m-2 mt-0 bg-primary-900 text-white col-span-full flex justify-center items-center"},re={class:"text-2xl font-medium"},ne={class:"grid grid-cols-12 gap-2 py-0"},de={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ie={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ce={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},pe={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ue={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},me={key:0,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},fe={key:1,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ge={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},xe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},ve={key:2,class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},_e=r("div",{class:"px-0 py-1 m-2 mt-3 bg-primary-900 text-white col-span-full flex justify-center items-center"},[r("h5",{class:"text-2xl font-medium"},"Detalle")],-1),ye={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-8"},be={key:0,class:"flex align-items-center"},he=["alt","src"],we={key:1},Ve={class:"flex align-items-center"},Ee=["alt","src"],De={key:3,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},Se={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Oe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Re={class:"flex justify-end py-3"},R="rmas",lo={__name:"RmaEdit",setup(Te){const Y=te(),V=c(null),E=c(null),y=c(""),T=c(),u=c(),I=a=>{x.value.code!=e.estado&&(e.estado=x.value.code)},N=a=>{g.value.code!=e.modo&&(e.modo=g.value.code)},P=a=>{e.clearErrors(),v.value.code!=e.tipo&&(e.tipo=v.value.code)},F=a=>{e.clearErrors("producto_id"),e.producto_id!=u.value.id&&(e.producto_id=u.value.id,e.prod_origen=u.value.origen,e.prod_nombre=u.value.nombre)},B=a=>{e.fecha_compra=a},e=ee({id:"",vendedor_id:"",fecha_ingreso:"",fecha_compra:"",nro_factura:"",vendedor_id:"",nro_servicio:"",costo_presupuestado:"",modo:"",estado:"",tipo:"",producto_id:"",prod_origen:"",prod_cantidad:"",prod_nombre:"",prod_serie:"",observaciones:"",defecto:"",cliente:{nombre:"",telefono:""}});H(()=>{var a=C().props.venta.data;T.value=Array.from(C().props.productos.data,l=>l),y.value="EDITAR "+a.tipo,e.id=a.id,e.nro_servicio=a.nro_servicio,e.cliente={nombre:a.cliente,telefono:a.telefono},e.costo_presupuestado=a.costo_presupuestado,e.observaciones=a.observaciones,e.defecto=a.defecto,e.producto_id=a.producto_id,e.prod_origen=a.prod_origen,e.prod_nombre=a.prod_nombre,e.prod_cantidad=a.prod_cantidad,e.prod_serie=a.prod_serie,e.vendedor_id=a.vendedor_id,e.nro_factura=a.nro_factura,e.fecha_ingreso=a.fecha_ingreso,e.fecha_compra=a.fecha_compra,V.value=a.fecha_ingreso,E.value=a.fecha_compra,u.value={id:a.producto_id,origen:a.prod_origen,nombre:a.prod_nombre,imagen:a.imagen},e.tipo=a.tipo,v.value.code=a.tipo,v.value.name=a.tipo,e.estado=a.estado,x.value.code=a.estado,x.value.name=a.estado,e.modo=a.modo,g.value.code=a.modo,g.value.name=a.modo});const g=c({name:"",code:""}),x=c({name:"",code:""}),v=c({name:"",code:""}),G=c([{name:"RECIBIDO",code:"RECIBIDO"},{name:"PRESUPUESTADO",code:"PRESUPUESTADO"},{name:"REPARADO",code:"REPARADO"},{name:"CAMBIO PRODUCTO",code:"CAMBIO PRODUCTO"},{name:"ESPERANDO STOCK",code:"ESPERANDO STOCK"}]),j=c([{name:"INGRESADO",code:"INGRESADO"},{name:"ENTREGADO",code:"ENTREGADO"}]),z=c([{name:"RMA",code:"RMA"},{name:"PRESUPUESTO",code:"PRESUPUESTO"}]),L=()=>{e.clearErrors(),e.post(route(R+".rma-update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{K("success","Mensaje","Actualizado"),setTimeout(()=>{A.get(route(R+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},K=(a,l,D)=>{Y.add({severity:a,summary:l,detail:D,life:3e3})},$=()=>{A.get(route("rmas.index"))};return(a,l)=>{const D=h("Toast"),_=h("InputText"),b=h("Dropdown"),U=h("Textarea");return f(),m(Q,null,[t(s(oe),{title:y.value},null,8,["title"]),t(X,{pagina:[{label:"Rmas",link:!1,url:a.route(R+".index")},{label:y.value,link:!1}]},{default:O(()=>[r("div",ae,[t(D),r("div",se,[r("div",le,[r("h5",re,p(y.value),1)]),r("form",null,[r("div",ne,[r("div",de,[t(n,{for:"fecha_ingreso",value:"Fecha Ingreso",class:"text-base font-medium leading-1 text-gray-900"}),t(s(k),{id:"fecha_ingreso",type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 text-2xl text-gray-700 bg-white transition-colors duration-200 border-0",value:V.value,"onUpdate:value":l[0]||(l[0]=o=>V.value=o),lang:"es",placeholder:"Seleccione",disabled:"",clearable:!1},null,8,["value"])]),r("div",ie,[t(n,{for:"nro_servicio",value:"Número servicio",class:"text-base font-medium leading-1 text-gray-900"}),t(_,{type:"text",id:"nro_servicio",modelValue:s(e).nro_servicio,"onUpdate:modelValue":l[1]||(l[1]=o=>s(e).nro_servicio=o),readonly:"",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.nro_servicio},null,8,["message"])]),r("div",ce,[t(n,{for:"tipo",value:"Tipo",class:"text-base font-medium leading-1 text-gray-900"}),t(b,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=o=>v.value=o),id:"tipo",onChange:P,options:z.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:o,state:S,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.tipo},null,8,["message"])]),r("div",pe,[t(n,{for:"modo",value:"Ingresado/Entregado",class:"text-base font-medium leading-1 text-gray-900"}),t(b,{modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=o=>g.value=o),id:"modo",onChange:N,filter:"",options:j.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:o,state:S,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.modo},null,8,["message"])]),r("div",ue,[t(n,{for:"estado",value:"Estado",class:"text-base font-medium leading-1 text-gray-900"}),t(b,{modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=o=>x.value=o),id:"estado",onChange:I,filter:"",options:G.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:o,state:S,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.estado},null,8,["message"])]),s(e).tipo=="RMA"?(f(),m("div",me,[t(n,{for:"fecha_compra",value:"Fecha de compra",class:"text-base font-medium leading-1 text-gray-900"}),t(s(k),{id:"fecha_compra",type:"date","value-type":"YYYY-MM-DD",onChange:B,format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 text-base text-gray-700 bg-white transition-colors duration-200 border-0",value:E.value,"onUpdate:value":l[5]||(l[5]=o=>E.value=o),lang:"es",placeholder:"Seleccione Fecha",clearable:!1},null,8,["value"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.fecha_compra},null,8,["message"])])):w("",!0),s(e).tipo=="RMA"?(f(),m("div",fe,[t(n,{for:"nro_factura",value:"Número de factura",class:"text-base font-medium leading-1 text-gray-900"}),t(_,{type:"text",id:"nro_factura",modelValue:s(e).nro_factura,"onUpdate:modelValue":l[6]||(l[6]=o=>s(e).nro_factura=o),pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.nro_factura},null,8,["message"])])):w("",!0),r("div",ge,[t(n,{for:"cliente",value:"Cliente",class:"text-base font-medium leading-6 text-gray-900"}),t(_,{type:"text",id:"cliente",modelValue:s(e).cliente.nombre,"onUpdate:modelValue":l[7]||(l[7]=o=>s(e).cliente.nombre=o),placeholder:"ingrese nombre cliente",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors["cliente.nombre"]},null,8,["message"])]),r("div",xe,[t(n,{for:"telefono",value:"Telefono",class:"text-base font-medium leading-6 text-gray-900"}),t(_,{type:"text",id:"telefono",modelValue:s(e).cliente.telefono,"onUpdate:modelValue":l[8]||(l[8]=o=>s(e).cliente.telefono=o),placeholder:"ingrese telefono",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors["cliente.telefono"]},null,8,["message"])]),s(e).tipo=="PRESUPUESTO"?(f(),m("div",ve,[t(n,{for:"costo_presupuestado",value:"Costo presupuestado",class:"text-base font-medium leading-6 text-gray-900"}),Z(r("input",{type:"number","onUpdate:modelValue":l[9]||(l[9]=o=>s(e).costo_presupuestado=o),step:"1",min:"0",class:"p-inputtext text-end h-9 w-full text-gray-700 bg-white border border-gray-300 transition-colors duration-200 appearance-none px-1 py-1"},null,512),[[q,s(e).costo_presupuestado]]),t(d,{class:"mt-1 text-xs",message:s(e).errors.costo_presupuestado},null,8,["message"])])):w("",!0),_e,r("div",ye,[t(n,{for:"prod_origen",value:"Producto",class:"text-base font-medium leading-1 text-gray-900"}),t(b,{modelValue:u.value,"onUpdate:modelValue":l[10]||(l[10]=o=>u.value=o),autoOptionFocus:!0,id:"productos",onChange:F,filter:"",options:T.value,optionLabel:"nombre",virtualScrollerOptions:{itemSize:46},class:"w-full md:w-14rem",pt:{root:{class:"w-1/2"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:o,state:S,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione Producto"},{value:O(o=>[o.value?(f(),m("div",be,[r("img",{alt:o.value.nombre,src:o.value.imagen,style:{width:"20px","margin-right":"5px"}},null,8,he),r("div",null,p(o.value.origen)+" - "+p(o.value.nombre)+" - stock:"+p(o.value.stock),1)])):(f(),m("span",we,p(o.placeholder),1))]),option:O(o=>[r("div",Ve,[r("img",{alt:o.option.nombre,src:o.option.imagen,style:{width:"20px","margin-right":"5px"}},null,8,Ee),r("div",null,p(o.option.origen)+" - "+p(o.option.nombre)+" - stock:"+p(o.option.stock),1)])]),_:1},8,["modelValue","options","pt"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.producto_id},null,8,["message"])]),s(e).tipo=="RMA"?(f(),m("div",De,[t(n,{for:"prod_serie",value:"Número de Serie",class:"text-base font-medium leading-1 text-gray-900"}),t(_,{type:"text",id:"prod_serie",modelValue:s(e).prod_serie,"onUpdate:modelValue":l[11]||(l[11]=o=>s(e).prod_serie=o),pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.origen},null,8,["message"])])):w("",!0),r("div",Se,[t(n,{for:"defecto",value:"Defecto",class:"text-base font-medium leading-6 text-gray-900"}),t(U,{modelValue:s(e).defecto,"onUpdate:modelValue":l[12]||(l[12]=o=>s(e).defecto=o),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"]),t(d,{class:"mt-1 text-xs",message:s(e).errors.defecto},null,8,["message"])]),r("div",Oe,[t(n,{for:"observaciones",value:"Observaciones",class:"text-base font-medium leading-6 text-gray-900"}),t(U,{modelValue:s(e).observaciones,"onUpdate:modelValue":l[13]||(l[13]=o=>s(e).observaciones=o),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"])])]),r("div",Re,[t(s(M),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:$,type:"button"}),t(s(M),{label:"Guardar",size:"small",type:"button",class:J({"opacity-50":s(e).processing}),disabled:s(e).processing,onClick:W(L,["prevent"])},null,8,["class","disabled","onClick"])])])])])]),_:1},8,["pagina"])],64)}}};export{lo as default};
