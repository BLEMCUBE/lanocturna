import{r,o as N,R as k,f as u,g as m,W as o,E as i,Y as n,j as e,D as f,y as E,z as $,u as T,F as w,A as B}from"./@vue-BLfC86mR.js";import{_ as I}from"./AppLayout-ChcmoOn7.js";import{T as L,Z as V,O}from"./@inertiajs-B6DOW0KO.js";import{aG as P,h as v}from"./primevue-B_pu_EB_.js";import{_ as U}from"./InputError-DdpGOVhM.js";import{_ as G}from"./InputLabel-CkCrW4zf.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-DQJME8_f.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-Dq7h7Pqt.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-Dzj_DFKn.js";import"./side-channel-DZFSYYHh.js";import"./get-intrinsic-gH0OeWJ1.js";import"./has-symbols-CABd5qHC.js";import"./has-proto-CpIZBmUT.js";import"./function-bind-C4RYm_-a.js";import"./has-D2ofp1JE.js";import"./call-bind-7ir4MDz-.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const R={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-8"},W={class:"grid grid-cols-12 gap-4 py-3"},Y={class:"col-span-7 sm:col-span-12 md:col-span-6 shadow-default lg:col-span-5 2xl:col-span-6 mx-2"},Z=["disabled"],q={class:"col-span-3 font-medium sm:col-span-6 shadow-default xl:col-span-3 2xl:col-span-3 flex h-auto items-end justify-center"},H={class:"h-8"},J={class:"col-span-3 shadow-default xl:col-span-3 flex h-auto items-end 2xl:col-span-2 justify-center"},K={class:"h-8"},Q={key:0},X=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos no estan registrado , por favor registre y vuelva a intentar. ",-1),ee={class:"w-full border"},te=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),se={class:"w-full text-center border"},oe={class:"text-center border"},le={class:"text-center border"},ae=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ie={class:"flex justify-end py-3"},re={class:"mb-2 mt-0 font-semibold text-center text-md"},ne=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ce={class:"flex justify-end py-3"},b="Ajuste Stock",j="productos",Le={__name:"AjustarStock",setup(de){const C=P(),x=r(!1),c=r(null),l=L({archivo:""}),d=r(!1),p=r(!1),_=r(),g=r();N(()=>{});const S=(t,s,h)=>{C.add({severity:t,summary:s,detail:h,life:3e3})},A=t=>{t.preventDefault(),l.archivo=t.target.files[0]},F=()=>{c.value.value=null,l.reset("archivo"),d.value=!1},z=()=>{c.value.value=null,l.reset("archivo"),p.value=!1},D=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},M=()=>{x.value=!0,l.clearErrors(),l.post(route(j+".importarstock"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x.value=!1,S("success","Mensaje","Stock Ajustado"),setTimeout(()=>{O.get(route(j+".ajuste-stock"))},1e3)},onFinish:()=>{},onError:t=>{x.value=!1,c.value.value=null,l.reset("archivo"),t.filas!=null?t.filas.length>0&&(_.value=t.filas,d.value=!0):t.error_sku!=null&&t.error_sku.length>0&&(g.value=t.error_sku,p.value=!0)}})};return(t,s)=>{const h=k("Toast"),y=k("Dialog");return m(),u(w,null,[o(i(V),{title:b}),o(I,{pagina:[{label:b,link:!1}]},{default:n(()=>[e("div",R,[o(h),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},f(b))]),e("div",W,[e("div",Y,[o(G,{for:"file_input1",value:"Importar excel",class:"block text-base font-semibold leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:c,onInput:A,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:i(l).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,Z),o(U,{class:"mt-1 text-xs",message:i(l).errors.archivo},null,8,["message"])]),e("div",q,[e("div",H,[o(i(v),{label:"Importar",type:"button",class:$(["text-normal font-medium",{"opacity-50":i(l).processing}]),disabled:i(l).processing,onClick:E(M,["prevent"])},null,8,["class","disabled","onClick"])])]),e("div",J,[e("div",K,[o(i(v),{label:"Descargar formato",size:"md",severity:"success",type:"button",class:"p-1 text-xs font-medium ring-0",onClick:s[0]||(s[0]=a=>D("importar_stock_productos.xlsx"))})])])])]),o(y,{visible:d.value,"onUpdate:visible":s[2]||(s[2]=a=>d.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ae]),default:n(()=>[_.value.length>0?(m(),u("div",Q,[X,e("table",ee,[te,e("tbody",null,[(m(!0),u(w,null,B(_.value,a=>(m(),u("tr",se,[e("td",oe,f(a.fila),1),e("td",le,f(a.sku),1)]))),256))])])])):T("",!0),e("div",ie,[o(i(v),{label:"Aceptar",size:"small",type:"button",onClick:s[1]||(s[1]=a=>F())})])]),_:1},8,["visible"]),o(y,{visible:p.value,"onUpdate:visible":s[4]||(s[4]=a=>p.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ne]),default:n(()=>[e("div",null,[e("p",re,f(g.value),1)]),e("div",ce,[o(i(v),{label:"Aceptar",size:"small",type:"button",onClick:s[3]||(s[3]=a=>z())})])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}};export{Le as default};
