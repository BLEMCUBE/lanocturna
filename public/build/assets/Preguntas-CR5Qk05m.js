import{r as g,o as $,f as n,g as i,W as _,E as D,Y as B,j as s,D as o,F as x,A as C,u as f,C as m,y as N,U as k,T as A,a5 as L}from"./@vue-BLfC86mR.js";import{_ as K}from"./AppLayout-Dcv1NtsU.js";import{K as h,T as b,Z as O,O as z}from"./@inertiajs-CMyvZJ1U.js";import{_ as y}from"./CheckboxName-CMAnPr3H.js";import W from"./ModalRepuestaRapidas-DQBRbHng.js";import"./sweetalert2-DhUVDY3P.js";import{u as Y}from"./customToast-BYTpZDIn.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./primevue-DAb-R_om.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";const Z={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},q={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},G={class:"md:col-span-8 xl:col-span-9"},H={class:"bg-white rounded-xl shadow p-6 my-5"},J={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 border-b pb-4"},Q={class:"flex items-start gap-2 w-full"},X=["src"],I={class:"w-full"},ee=["href"],te={class:"mx-3 text-xs text-gray-500"},se={class:"inline-block bg-blue-700 text-white text-xs font-normal px-2 py-0.5 rounded"},ae={key:0,class:"text-xs text-gray-700 mt-1"},oe={class:"font-medium"},re={class:"text-base font-semibold text-blue-600 mt-1"},le={class:"text-base text-gray-600 mt-1"},ie=["href"],ue={key:0,class:"px-1"},ce=s("i",{class:"fa fa-map-marker-alt text-gray-500"},null,-1),ne={key:0},de={class:"mt-3 flex"},pe={class:"font-medium text-gray-800 mb-1"},me={class:"ml-3 text-gray-500 text-xs flex items-center gap-1"},_e=s("i",{class:"far fa-clock"},null,-1),fe=["onSubmit"],he=["onUpdate:modelValue","onFocus"],be=s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700"}," Enviar respuesta ")],-1),ve={class:"md:col-span-4 xl:col-span-3"},ge={class:"bg-white rounded-xl shadow p-5 fixed overflow-y-auto"},xe=s("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),ke={class:"hidden sm:block flex flex-wrap gap-2 mb-4"},w="ML Preguntas",S="mercadolibre.preguntas",it={__name:"Preguntas",setup(ye){const{setShow:v}=Y(),{items:F}=h().props,{saludo:T}=h().props,{firma:U}=h().props,l=g([]),d=g(null);b({id:""}),b({id:""});const r=b({mercadolibre_pregunta_id:null,from_user_id:null,text:null,payload:null});$(()=>{F.data.forEach(e=>{l.value.push({id:e.id,mercadolibre_pregunta_id:e.mercadolibre_pregunta_id,pregunta:e.pregunta,publicado:e.publicado,from_user_id:e.from_user_id,haveSaludo:!0,haveFirma:!0,saludo:T.value,firma:U.value,respuesta:"",producto:{thumbnail:e.producto.thumbnail,title:e.producto.title,id:e.producto.id,sku:e.producto.sku,permalink:e.producto.permalink,base_price:e.producto.base_price,listing_type_id:e.producto.listing_type_id},usuario:{nickname:e.usuario.nickname,permalink:e.usuario.permalink,city:e.usuario.city,state:e.usuario.state}})})});const E=e=>{d.value=e},j=e=>{if(l.value[e].respuesta.trim().length===0){v("error","Error","Por favor ingresá una respuesta.");return}P(e),r.clearErrors(),r.post(route(S+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{v("success","Mensaje","Respuesta enviada"),setTimeout(()=>{z.get(route(S+".lista"))},500)},onFinish:()=>{},onError:()=>{}})},M=e=>{d.value!==null&&(l.value[d.value].respuesta=e.respuesta,c(d.value),d.value=null)},P=e=>{if(e!==null){let a=l.value[e];r.mercadolibre_pregunta_id=a.mercadolibre_pregunta_id,r.from_user_id=a.from_user_id,r.payload=a,c(e)}},R=(e,a)=>{if(e!==null){let t=l.value[e];a?(t.haveSaludo=!0,c(e)):(t.haveSaludo=!1,c(e))}},V=(e,a)=>{if(e!==null){let t=l.value[e];a?(t.haveFirma=!0,c(e)):(t.haveFirma=!1,c(e))}},c=e=>{if(e!==null){let a=l.value[e];switch(!0){case(a.haveSaludo==!0&&a.haveFirma==!1):r.text=a.saludo+`
`+a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!1):r.text=a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!0):r.text=a.respuesta+`
`+a.firma;break;default:r.text=a.saludo+`
`+a.respuesta+`
`+a.firma;break}}};return(e,a)=>(i(),n(x,null,[_(D(O),{title:"Mercado Libre-Preguntas"}),_(K,{pagina:[{label:w,link:!1}]},{default:B(()=>[s("div",Z,[s("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[s("h5",{class:"text-2xl font-medium"},o(w))]),s("div",q,[s("div",G,[(i(!0),n(x,null,C(l.value,(t,p)=>(i(),n("div",H,[s("div",J,[s("div",Q,[s("img",{src:t.producto.thumbnail,alt:"Producto",class:"w-16 h-16 rounded object-cover"},null,8,X),s("div",I,[s("span",null,[s("a",{href:t.producto.permalink,class:"text-gray-800 font-medium text-sm hover:text-blue-600",target:"_blank"},o(t.producto.title),9,ee)]),s("span",te,o(t.producto.id),1),s("span",se,o(t.producto.listing_type_id),1),t.producto.sku?(i(),n("div",ae,[m(" SKU: "),s("span",oe,o(t.producto.sku),1)])):f("",!0),s("div",re,"$"+o(t.producto.base_price)+" ",1),s("div",le,[s("a",{href:t.usuario.permalink,target:"_blank",class:"text-blue-500 hover:underline"},o(t.usuario.nickname),9,ie),t.usuario.city?(i(),n("span",ue,[m(" | "),ce,m(" "+o(t.usuario.city)+" ",1),t.usuario.state?(i(),n("span",ne," , "+o(t.usuario.state),1)):f("",!0)])):f("",!0)])])])]),s("div",de,[s("span",pe,o(t.pregunta),1),s("span",me,[_e,m(" "+o(t.publicado),1)])]),s("form",{class:"mt-6 space-y-4",onSubmit:N(u=>j(p),["prevent"])},[(i(),k(y,{"onUpdate:checked":u=>R(p,u),label:t.saludo,key:t.id,checked:t.haveSaludo},null,8,["onUpdate:checked","label","checked"])),A(s("textarea",{rows:"2","onUpdate:modelValue":u=>t.respuesta=u,placeholder:"Ingresá tu respuesta",onFocus:u=>E(p),class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,40,he),[[L,t.respuesta]]),(i(),k(y,{"onUpdate:checked":u=>V(p,u),label:t.firma,key:t.id,checked:t.haveFirma},null,8,["onUpdate:checked","label","checked"])),be],40,fe)]))),256))]),s("div",ve,[s("div",ge,[xe,s("div",ke,[_(W,{onAddTexto:M,tipo:"pregunta"})])])])])])]),_:1},8,["pagina"])],64))}};export{it as default};
