import{_ as j}from"./AppLayout-e9b37aea.js";import{K as i,l as c,h as O,F as L,m as u,p as A,f as b,a as t,u as p,w as l,q as S,O as w,o as D,Z as B,b as o,t as y,v as E,g as R,d as g}from"./app-30657582.js";import{i as F}from"./es.es-13e6482b.js";import{h as m}from"./moment-fbc5633a.js";import{s as f,a as I,e as U,b as K,c as $}from"./index-3b59ec08.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"card px-4 mb-4 col-span-12 rounded-lg"},z=o("div",{class:"col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},"Listado Productos más vendidos")],-1),H={class:"grid grid-cols-12 gap-4 mt-4 mb-2"},Z={class:"grid grid-cols-1 col-span-full gap-4 lg:grid-cols-12 mt-2 2lg:grid-cols-12"},G={class:"col-span-1 md:col-span-3 lg:col-span-3"},J={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},Q={class:"flex justify-content-end text-md"},W={key:0,class:"w-10 h-8 ml-5 rounded flex justify-center items-center text-base font-semibold text-white mr-1"},X=o("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),ee=["src"],te="Productos Vendidos",oe="productos",ue={__name:"ProductosVendidos",setup(ae){i().props.auth;const{roles:v}=i().props.auth,x=c([]),h=c(),s=c(),_=e=>{e[0]!=null&&e[1]!=null&&(w.get("/reportes-productos-vendidos/",{inicio:m(e[0]).format("YYYY-MM-DD"),fin:m(e[1]).format("YYYY-MM-DD")},{preserveState:!0,onSuccess:()=>{h.value=i().props.total_cantidad,x.value=i().props.total_productos}}),s.value=[m(e[0]).format("YYYY-MM-DD"),m(e[1]).format("YYYY-MM-DD")])},Y=()=>{if(s.value[0]!=null&&s.value[1]!=null)window.open(route("reportes.exportproductoventas",[{inicio:s.value[0],fin:s.value[1]}]),"_blank");else return};O(()=>{s.value=[f(new Date,30),new Date],_(s.value)});const d=c({global:{value:null,matchMode:L.CONTAINS}}),k=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[f(new Date,1),f(new Date,1)]}},{text:"Este mes",onClick(){return[I(new Date),U(new Date)]}},{text:"Este año",onClick(){return[K(new Date),$(new Date)]}}],C=e=>{console.log("e ",e),M(e.data.id)},M=e=>{w.get(route(oe+".show",e))};return(e,n)=>{const P=u("InputText"),V=u("Button"),r=u("Column"),T=u("DataTable"),N=A("tooltip");return D(),b(S,null,[t(p(B),{title:"Reporte Ventas"}),t(j,{pagina:[{label:"Reportes",link:!1},{label:te,link:!1}]},{default:l(()=>[o("div",q,[z,o("div",H,[o("div",Z,[o("div",G,[t(p(F),{onChange:_,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",value:s.value,"onUpdate:value":n[0]||(n[0]=a=>s.value=a),shortcuts:k,lang:"es",clearable:!1,placeholder:"seleccione Fecha"},null,8,["value"])])]),o("div",J,[o("b",null," TOTAL CANTIDADES : "+y(h.value)+" ",1),t(T,{size:"small",filters:d.value,"onUpdate:filters":n[3]||(n[3]=a=>d.value=a),value:x.value,paginator:!0,rows:20,rowsPerPageOptions:[20,40,100,200],pt:{bodyRow:{class:"hover:cursor-pointer hover:bg-gray-100 hover:text-black"},root:{class:"w-auto"}},onRowClick:C,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},{header:l(()=>[o("div",Q,[t(P,{modelValue:d.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=a=>d.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"]),p(v).includes("Super Administrador")||p(v).includes("Administrador")?E((D(),b("div",W,[t(V,{onClick:n[2]||(n[2]=a=>Y()),pt:{root:{class:"py-auto px-3 py-2.5 text-xl bg-green-600 border-none hover:bg-green-500"}}},{default:l(()=>[X]),_:1})])),[[N,{value:"Descargar Excel",pt:{text:"bg-gray-500 text-xs text-white rounded"}},void 0,{top:!0}]]):R("",!0)])]),empty:l(()=>[g(" No existe Resultado ")]),loading:l(()=>[g(" Cargando... ")]),default:l(()=>[t(r,{field:"sku",header:"SKU"}),t(r,{field:"imagen",header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"w-10"}}},{loading:l(()=>[]),body:l(a=>[o("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:a.data.imagen,alt:"image"},null,8,ee)]),_:1}),t(r,{field:"nombre",header:"Nombre",sortable:""}),t(r,{field:"ventas_totales",header:"Ventas Totales",sortable:"",pt:{bodyCell:{class:"flex justify-center text-center w-14"},headerCell:{class:"w-14"}}}),t(r,{field:"porcentaje",header:"Porcentaje",sortable:"",pt:{bodyCell:{class:"text-center w-20"},headerCell:{class:"w-20"}}},{body:l(a=>[g(y(a.data.porcentaje)+" % ",1)]),_:1})]),_:1},8,["filters","value"])])])])]),_:1},8,["pagina"])],64)}}};export{ue as default};
