import{r as C,o as F,M as _,N as oe,e as c,f as u,Q as l,ab as t,S as p,i as o,y as m,p as $,j as v,O as g,l as se,a0 as h,$ as ae,F as z,u as le,q as re,x as M,ac as ne,ad as ie}from"./@vue-BG0wrCoO.js";import{_ as de}from"./AppLayout-DGXGhT07.js";import{K as x,T as ce,Z as ue,O as N}from"./@inertiajs-BPLxF6VH.js";import{aH as pe,h as A}from"./primevue-DlS7f910.js";import{_ as d}from"./InputError-cOM6HFrc.js";import{_ as i}from"./InputLabel-BIVuqiPx.js";import{s as me}from"./@vueform-CSVNwuWD.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-C8Jea0Rc.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";const T=y=>(ne("data-v-32365f1e"),y=y(),ie(),y),xe={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},be={class:"align-middle"},fe=["onSubmit"],_e={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},ve={class:"col-span-12 shadow-default xl:col-span-3"},he={class:"col-span-12 shadow-default xl:col-span-5"},ye={class:"col-span-12 shadow-default xl:col-span-4"},we={class:"col-span-12 shadow-default xl:col-span-3"},ke={class:"col-span-12 shadow-default xl:col-span-3"},Ce={class:"col-span-12 shadow-default xl:col-span-3"},Ve={class:"col-span-12 shadow-default xl:col-span-3"},Te={key:0,class:"col-span-12 shadow-default xl:col-span-3"},Ie={class:"font-normal text-gray-800 text-base"},Se={key:1,class:"col-span-12 shadow-default xl:col-span-3"},Ue={key:2,class:"col-span-12 shadow-default xl:col-span-3"},Re={class:"font-normal text-gray-800 text-base"},Ae={key:3,class:"col-span-12 shadow-default xl:col-span-3"},Ee={class:"col-span-12 shadow-default xl:col-span-6"},De=T(()=>o("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),je={class:"col-span-12 shadow-default xl:col-span-3"},Fe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-12"},$e=T(()=>o("div",{class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},[o("div",{class:"bg-gray-200 w-full text-start"},[o("h3",{class:"font-semibold text-gray-800 text-lg px-5"},"ATRIBUTOS: ")])],-1)),ze={class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},Me={class:"flex justify-start col-span-12 w-full flex-col md:flex-row py-1 px-5"},Ne={class:"flex items-center w-full md:w-1/3 xl:w-1/3 mr-2"},Oe={class:"font-semibold text-gray-800 text-base"},Pe={class:"font-normal text-gray-800 text-base px-3"},qe={class:"rounded-md p-1 flex justify-center items-center bg-red-600 py-auto text-base font-semibold text-white hover:bg-red-700"},Be=["onClick"],He=T(()=>o("i",{class:"fas fa-trash"},null,-1)),Ke=[He],Le={class:"flex justify-end pt-2"},Ge={class:"card flex w-full"},Qe={class:"px-1"},We={class:"flex justify-between items-center mx-2 w-1/2"},Ze={class:"mx-3"},Je={class:"px-5 text-end"},Xe=["onClick","disabled"],Ye=T(()=>o("i",{class:"fas fa-plus"},null,-1)),et=[Ye],E="Editar Producto",V="productos",tt={__name:"Edit",setup(y){const I=C("/images/productos/sin_foto.png"),O=pe(),{permissions:w}=x().props.auth,{atributos:P}=x().props,{lista_atributos:q}=x().props,{lista_valores:B}=x().props,S=C([]),k=C(!1),e=ce({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,precio:0,stock_minimo:0,observaciones:"",imagen:"",photo:"",costo_origen:null,costo_fecha:null,costo_real:0,costo_id:null,categorias:[],atributos:[]});F(()=>{D.value.options=x().props.lista_categorias;var a=x().props.producto;e.id=a.id,e.nombre=a.nombre,e.origen=a.origen,e.aduana=a.aduana,e.codigo_barra=a.codigo_barra,e.precio=a.precio,e.stock=a.stock,e.stock_minimo=a.stock_minimo,e.stock_futuro=a.stock_futuro,e.observaciones=a.observaciones,e.costo_real=a.costos_reales.length>0?a.costos_reales[0].monto:0,e.costo_origen=a.costos_reales.length>0?a.costos_reales[0].origen:null,e.costo_id=a.costos_reales.length>0?a.costos_reales[0].id:null,e.costo_fecha=a.costos_reales.length>0?a.costos_reales[0].fecha:null,e.atributos=P,a.categorias.length>0&&a.categorias.forEach(s=>{e.categorias.push(s.id)}),I.value=a.imagen,e.imagen=a.imagen});const H=()=>{e.clearErrors(),e.post(route(V+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{L("success","Mensaje","Producto Actualizado"),setTimeout(()=>{N.get(route(V+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},D=C({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),K=a=>{a.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(a.target.value))},L=(a,s,n)=>{O.add({severity:a,summary:s,detail:n,life:3e3})},G=()=>{N.get(route(V+".index"))},Q=a=>{a.preventDefault(),e.photo=a.target.files[0];let s=a.target.files;if(s&&s[0]){let n=new FileReader;n.onload=b=>{I.value=b.target.result},n.readAsDataURL(s[0])}},W=a=>{},Z=a=>{},J=a=>{if(e.atributos.length>0){const n=e.atributos.findIndex(b=>b.atributo_id===a.atributo_id);n!==-1&&e.atributos.splice(n,1)}var s=B.find(n=>n.id===a.id);e.atributos.push({id:s.id,valor:s.valor,nombre:s.nombre,atributo_id:s.atributo_id,producto_id:e.id}),k.value=!1},X=a=>{e.atributos.splice(a,1)},Y=()=>{k.value=!0};return F(()=>{S.value=null}),(a,s)=>{const n=_("InputText"),b=_("Textarea"),U=_("Column"),j=_("DataTable"),ee=_("Dialog"),te=oe("tooltip");return u(),c(z,null,[l(t(ue),{title:E}),l(de,{pagina:[{label:"Productos",link:!0,url:a.route(V+".index")},{label:E,link:!1}]},{default:p(()=>[o("div",xe,[o("div",{class:"px-3 col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},m(E))]),o("div",be,[o("form",{onSubmit:$(H,["prevent"])},[o("div",_e,[o("div",ve,[l(i,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),l(n,{type:"text",id:"origen",modelValue:t(e).origen,"onUpdate:modelValue":s[0]||(s[0]=r=>t(e).origen=r),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.origen},null,8,["message"])]),o("div",he,[l(i,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),l(n,{type:"text",id:"nombre",modelValue:t(e).nombre,"onUpdate:modelValue":s[1]||(s[1]=r=>t(e).nombre=r),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.nombre},null,8,["message"])]),o("div",ye,[l(i,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),l(t(me),se({id:"categorias",modelValue:t(e).categorias,"onUpdate:modelValue":s[2]||(s[2]=r=>t(e).categorias=r),class:"w-full"},D.value),null,16,["modelValue"])]),o("div",we,[l(i,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),l(n,{type:"text",id:"aduana",modelValue:t(e).aduana,"onUpdate:modelValue":s[3]||(s[3]=r=>t(e).aduana=r),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.aduana},null,8,["message"])]),o("div",ke,[l(i,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),l(n,{type:"text",id:"codigo_barra",modelValue:t(e).codigo_barra,"onUpdate:modelValue":s[4]||(s[4]=r=>t(e).codigo_barra=r),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.codigo_barra},null,8,["message"])]),o("div",Ce,[l(i,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),g(o("input",{type:"number",required:"","onUpdate:modelValue":s[5]||(s[5]=r=>t(e).stock=r),step:"1",min:"0",onKeyup:s[6]||(s[6]=r=>K(r)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[h,t(e).stock]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock},null,8,["message"])]),o("div",Ve,[l(i,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),g(o("input",{type:"number",required:"","onUpdate:modelValue":s[7]||(s[7]=r=>t(e).stock_minimo=r),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).stock_minimo]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock_minimo},null,8,["message"])]),t(w).includes("productos-editar_precio")==!1?(u(),c("div",Te,[l(i,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Ie,m(t(e).precio),1)])):v("",!0),t(w).includes("productos-editar_precio")?(u(),c("div",Se,[l(i,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),g(o("input",{type:"number",required:"","onUpdate:modelValue":s[8]||(s[8]=r=>t(e).precio=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).precio]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.precio},null,8,["message"])])):v("",!0),t(w).includes("productos-costoreal")==!1?(u(),c("div",Ue,[l(i,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Re,m(t(e).costo_real),1)])):v("",!0),t(w).includes("productos-costoreal")?(u(),c("div",Ae,[l(i,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),g(o("input",{type:"number",required:"","onUpdate:modelValue":s[9]||(s[9]=r=>t(e).costo_real=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).costo_real]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.costo_real},null,8,["message"])])):v("",!0),g(o("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":s[10]||(s[10]=r=>t(e).stock_futuro=r)},null,512),[[h,t(e).stock_futuro]]),o("div",Ee,[l(i,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),o("input",{onInput:Q,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),De,l(d,{class:"mt-1 text-xs",message:t(e).errors.imagen},null,8,["message"])]),o("div",je,[o("div",{class:"imagePreviewWrapper",style:ae({"background-image":`url(${I.value})`})},null,4)]),o("div",Fe,[l(i,{for:"observacion",value:"Observaciones:",class:"text-base font-medium leading-6 text-gray-900"}),l(b,{modelValue:t(e).observaciones,"onUpdate:modelValue":s[11]||(s[11]=r=>t(e).observaciones=r),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"])]),$e,o("div",ze,[l(t(A),{size:"small",onClick:Y,type:"button",label:"Agregar Atributo",severity:"success"})]),t(e).atributos.length>0?(u(!0),c(z,{key:4},le(t(e).atributos,(r,f)=>(u(),c("div",Me,[o("div",Ne,[o("h3",Oe,m(r.nombre)+": ",1),o("h3",Pe,m(r.valor),1),o("div",qe,[g((u(),c("button",{type:"button",onClick:$(R=>X(f),["prevent"]),class:"w-6"},Ke,8,Be)),[[te,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 m-0 text-xs text-white rounded"}},void 0,{top:!0}]])])])]))),256)):v("",!0)]),o("div",Le,[l(t(A),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:G,type:"button"}),l(t(A),{label:"Guardar",size:"small",type:"submit",class:re({"opacity-50":t(e).processing}),disabled:t(e).processing},null,8,["class","disabled"])])],40,fe)])]),l(ee,{visible:k.value,"onUpdate:visible":s[13]||(s[13]=r=>k.value=r),modal:"",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 flex justify-around text-end"},content:{class:"p-4 lg:p-4"}}},{default:p(()=>[o("div",Ge,[l(j,{expandedRows:S.value,"onUpdate:expandedRows":s[12]||(s[12]=r=>S.value=r),size:"small",onRowCollapse:Z,onRowExpand:W,value:t(q).data,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,pt:{root:{class:"w-full"}}},{empty:p(()=>[M(" No existe Resultado ")]),loading:p(()=>[M(" Cargando... ")]),expansion:p(r=>[o("div",Qe,[l(j,{value:r.data.valores,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,pt:{header:{class:"text-center pb-0 mb-0 text-start"},headerContent:{class:"bg-white pb-0 mb-0 text-start"}}},{default:p(()=>[l(U,{pt:{bodyCell:{class:"text-start p-0 m-0"},headerCell:{class:"bg-white p-0 m-0"},headerContent:{class:"text-start stickyToTopTableHeaders"},bodyCellContent:{class:"text-start"}}},{body:p(f=>[o("div",We,[o("div",Ze,m(f.data.valor),1),o("div",Je,[o("button",{onClick:R=>J(f.data),class:"bg-green-500 disabled:bg-gray-800 disabled:text-white hover:bg-green-600 text-white rounded px-2 py-1.5",disabled:t(e).atributos.filter(R=>R.id===f.data.id).length>0},et,8,Xe)])])]),_:2},1024)]),_:2},1032,["value"])])]),default:p(()=>[l(U,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-start"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),l(U,{sortable:"",field:"nombre",header:"Atributos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-start"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}})]),_:1},8,["expandedRows","value"])])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}},$t=ge(tt,[["__scopeId","data-v-32365f1e"]]);export{$t as default};
