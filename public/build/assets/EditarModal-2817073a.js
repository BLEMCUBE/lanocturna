import{r as g,o as T,O as h,g as j,j as r,S as a,V as z,f as B,E as o,Q as x,a2 as _,u as G,t as I}from"./@vue-1043e4d5.js";import{_ as i}from"./InputError-933cc936.js";import{_ as d}from"./InputLabel-bc304214.js";import{T as L,O as $}from"./@inertiajs-ab1bf9dd.js";import{a as w}from"./axios-4a70c6fc.js";import{aG as Q,h as M}from"./primevue-232ee6f7.js";import{i as q}from"./vue-datepicker-next-31061510.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";const A=r("i",{class:"fas fa-edit"},null,-1),H=[A],J=["onSubmit"],K={class:"px-2 grid grid-cols-6 gap-4 md:gap-2 2xl:gap-6 mb-2"},R={class:"col-span-12"},W={class:"col-span-12"},X={class:"col-span-12"},Z={class:"col-span-12"},ee={class:"col-span-12"},oe={class:"col-span-12"},te={class:"flex justify-end py-3"},ae="Pago",b="pago-servicio",De={__name:"EditarModal",props:{itemId:{type:Number,default:null}},setup(k){const C=k,f=g(),D=Q(),v=g(),c=g(!1),p=g({name:"Pesos",code:"Pesos"}),y=g([{name:"Pesos",code:"Pesos"},{name:"Dólares",code:"Dólares"}]),e=L({id:"",fecha_pago:"",moneda:"",nro_factura:"",monto:"",concepto_pago_id:"",observacion:""}),V=l=>{p.value.code!=e.moneda&&(e.moneda=p.value.code)},S=()=>{w.get(route(b+".conceptos")).then(l=>{v.value=l.data.conceptos})},E=l=>{e.concepto_pago_id=f.value.code},Y=()=>{U(C.itemId)},U=l=>{w.get(route(b+".show",l)).then(t=>{c.value=!0;var n=t.data.item;e.id=n.id,e.fecha_pago=n.fecha_pago,e.moneda=n.moneda,e.nro_factura=n.nro_factura,e.monto=n.monto,e.concepto_pago_id=n.concepto_pago_id,e.observacion=n.observacion,p.value=y.value.find(m=>m.code===n.moneda),f.value=v.value.find(m=>m.code===n.concepto_pago_id)})};T(()=>{S()});const F=()=>{e.reset(),e.clearErrors(),c.value=!1},P=()=>{e.clearErrors(),e.post(route(b+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{c.value=!1,N("success","Mensaje","Se ha editado"),setTimeout(()=>{$.get(route(b+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},N=(l,t,n)=>{D.add({severity:l,summary:t,detail:n,life:3e3})};return(l,t)=>{const n=h("Dropdown"),m=h("Dialog");return B(),j("section",null,[r("button",{type:"button",onClick:Y},H),a(m,{visible:c.value,"onUpdate:visible":t[6]||(t[6]=s=>c.value=s),modal:"",header:"Editar "+ae,style:{width:"30vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 "},content:{class:"p-4 lg:p-4"}}},{default:z(()=>[r("form",{onSubmit:I(P,["prevent"])},[r("div",K,[r("div",R,[a(d,{for:"fecha_pago",value:"Fecha",class:"block text-base font-medium leading-6 text-gray-900"}),a(o(q),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-12 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:o(e).fecha_pago,"onUpdate:value":t[0]||(t[0]=s=>o(e).fecha_pago=s),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),a(i,{class:"mt-1 text-xs",message:o(e).errors.fecha_pago},null,8,["message"])]),r("div",W,[a(d,{for:"moneda",value:"Moneda",class:"text-base font-medium leading-1 text-gray-900"}),a(n,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),onChange:V,options:y.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:O,context:u})=>({class:u.selected?"text-white bg-primary-900":u.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Moneda"},null,8,["modelValue","options","pt"]),a(i,{class:"mt-1 text-xs",message:o(e).errors.moneda},null,8,["message"])]),r("div",X,[a(d,{for:"concepto",value:"Concepto",class:"text-base font-medium leading-1 text-gray-900"}),a(n,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),onChange:E,options:v.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:O,context:u})=>({class:u.selected?"text-white bg-primary-900":u.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Concepto"},null,8,["modelValue","options","pt"]),a(i,{class:"mt-1 text-xs",message:o(e).errors.concepto_pago_id},null,8,["message"])]),r("div",Z,[a(d,{for:"nro_factura",value:"Nro. Factura",class:"block text-base font-medium leading-6 text-gray-900"}),x(r("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o(e).nro_factura=s),class:"p-inputtext p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[_,o(e).nro_factura]]),a(i,{class:"mt-1 text-xs",message:o(e).errors.nro_factura},null,8,["message"])]),r("div",ee,[a(d,{for:"monto",value:"Monto",class:"block text-base font-medium leading-6 text-gray-900"}),x(r("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>o(e).monto=s),step:"0.01",class:"p-inputtext p-component text-gray-700 bg-white border appearance-none rounded text-basw h-9 m-0 w-full text-end"},null,512),[[_,o(e).monto]]),a(i,{class:"mt-1 text-xs",message:o(e).errors.monto},null,8,["message"])]),r("div",oe,[a(d,{for:"observacion",value:"Observación",class:"block text-base font-medium leading-6 text-gray-900"}),x(r("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>o(e).observacion=s),class:"p-inputtext p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[_,o(e).observacion]]),a(i,{class:"mt-1 text-xs",message:o(e).errors.observacion},null,8,["message"])])]),r("div",te,[a(o(M),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:F,type:"button"}),a(o(M),{label:"Guardar",size:"small",type:"submit",class:G({"opacity-50":o(e).processing}),disabled:o(e).processing},null,8,["class","disabled"])])],40,J)]),_:1},8,["visible","header"])])}}};export{De as default};
