import{k as P,l as f,K as b,T as q,N as C,h as A,m as S,p as M,f as p,a as r,u as n,w as U,q as B,o as m,Z as K,b as e,t as h,v as F,z as L,a7 as V,y as R,s as Z,n as G,e as H,g as J,O as g}from"./app-f0f0425b.js";import{_ as Q,S as W}from"./AppLayout-d1645504.js";import{s as X}from"./multiselect-dc7a3406.js";import{_ as Y}from"./Pagination-c0261f0c.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const ee={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},te={class:"px-3 pb-2 col-span-full flex justify-end items-center"},oe={class:"w-8 h-8 rounded bg-green-600 flex justify-center mr-5 items-center text-base font-semibold text-white hover:bg-green-600"},se=["href"],ae=e("i",{class:"fas fa-file-excel text-white"},null,-1),le=[ae],re={class:"align-middle py-4"},ne={class:"grid grid-cols-12 gap-4 m-3"},ie={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ce={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},de={style:{overflow:"auto","max-height":"700px"}},ue={class:"w-full text-md bg-white shadow-md rounded mb-4"},pe=e("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[e("tr",{class:"bg-secondary-100"},[e("th",{class:"p-1.5"},"Stock"),e("th",null,"Stock futuro"),e("th",{class:"p-2"},"Imagen"),e("th",null,"Origen"),e("th",null,"Nombre"),e("th",null,"Acciones")])],-1),me=["onClick"],he=["onClick"],ge=["onClick"],fe=["src"],_e=["onClick"],xe=["onClick"],be=["onClick"],ve=e("i",{class:"fas fa-trash-alt"},null,-1),we=[ve],v="Productos",i="productos",Ve={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(_){const w=_,T=P(),j=f(),{permissions:D}=b().props.auth,E=q({id:""});let a=f([w.filtro.categoria]),c=f(w.filtro.buscar);C(c,o=>{g.get(route(i+".index"),{buscar:o,categoria:a.value},{preserveState:!0,replace:!0})}),C(a,o=>{g.get(route(i+".index"),{categoria:o,buscar:c.value},{preserveState:!0,replace:!0})});const $=(o,s,l)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(l))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(l)>parseFloat(o))return"bg-orange-500 text-black"},O=o=>{g.get(route(i+".show",o))},N=(o,s)=>{W.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(x=>{x.isConfirmed&&E.delete(route(i+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{z("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(i+".index"))},1e3)}})})},y=f({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});A(()=>{j.value=b().props.productos.data,y.value.options=b().props.lista_categorias});const z=(o,s,l)=>{T.add({severity:o,summary:s,detail:l,life:3e3})},I=()=>{g.get(route(i+".create"))},d=o=>{O(o)};return(o,s)=>{const l=S("Toast"),x=S("InputText"),k=M("tooltip");return m(),p(B,null,[r(n(K),{title:v}),r(Q,{pagina:[{label:v,link:!1}]},{default:U(()=>[e("div",ee,[r(l),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},h(v))]),e("div",te,[F((m(),p("span",oe,[e("a",{href:o.route(i+".exportar",{categoria:n(a)}),target:"_blank",class:"py-auto"},le,8,se)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),r(n(L),{size:"small",label:"Agregar Producto",severity:"success",onClick:I})]),e("div",re,[e("div",ne,[e("div",ie,[r(x,{class:"w-full",modelValue:n(c),"onUpdate:modelValue":s[0]||(s[0]=t=>V(c)?c.value=t:c=t),placeholder:"Buscar"},null,8,["modelValue"])]),e("div",ce,[r(n(X),R({id:"categorias",modelValue:n(a),"onUpdate:modelValue":s[1]||(s[1]=t=>V(a)?a.value=t:a=t),class:"w-full"},y.value),null,16,["modelValue"])])]),e("div",de,[e("table",ue,[pe,e("tbody",null,[(m(!0),p(B,null,Z(_.productos.data,t=>(m(),p("tr",{class:G(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",$(t.stock,t.stock_minimo,t.stock_futuro)])},[e("td",{onClick:u=>d(t.id)},h(t.stock??""),9,me),e("td",{onClick:u=>d(t.id)},h(t.stock_futuro),9,he),e("td",{onClick:u=>d(t.id)},[e("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:t.imagen,alt:"image"},null,8,fe)],8,ge),e("td",{onClick:u=>d(t.id)},h(t.origen),9,_e),e("td",{onClick:u=>d(t.id)},h(t.nombre),9,xe),e("td",null,[n(D).includes("eliminar-productos")?F((m(),p("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:H(u=>N(t.id,t.nombre),["prevent"])},we,8,be)),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):J("",!0)])],2))),256))])])]),r(Y,{elements:_.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{Ve as default};
