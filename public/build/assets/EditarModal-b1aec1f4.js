import{r as g,O as b,P as j,g as u,Q as x,S as m,V as U,E as r,f as _,j as s,F as B,v as L,Y as O,t as h,u as R,aZ as z,aX as N}from"./@vue-1043e4d5.js";import{_ as P}from"./InputError-933cc936.js";import{T as V}from"./@inertiajs-ab1bf9dd.js";import{aG as Q}from"./primevue-232ee6f7.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";window.URL=window.URL||window.webkitURL;function A(t){return window.URL.createObjectURL(t)}function G(t){const a={};let n=0;for(const o of t){const l=A(o);a[n]=l,n++}return a}function H(){const t=g({}),a=()=>{t.value={}};return{setFile:async(o=[])=>{a(),t.value=G(o)},previewMap:t}}const X=t=>(z("data-v-2dd71908"),t=t(),N(),t),Y=X(()=>s("i",{class:"fas fa-image"},null,-1)),Z=[Y],$=["onSubmit"],q={class:"px-2 grid grid-cols-6 gap-4 mb-2"},J={class:"col-span-6 text-center xl:col-span-6"},K=["src"],W=["onClick"],ee={class:"flex justify-end py-2"},te="catalogo",oe={__name:"EditarModal",props:{productoId:{type:Number,default:null},nombre:{type:String,default:""}},setup(t){const a=t,n=Q(),o=g(!1),{setFile:l,previewMap:f}=H(),v=g(null),w=i=>{l(i.target.files),e.imagen=i.target.files[0]},y=()=>{v.value.click()},M=()=>{l([]),e.reset(),e.clearErrors()},e=V({id:"",imagen:"",nombre:""}),S=()=>{C(a.productoId)},C=i=>{o.value=!0,e.id=i,e.nombre=a.nombre},E=()=>{e.reset(),e.clearErrors(),o.value=!1},I=()=>{e.clearErrors(),e.post(route(te+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{o.value=!1,k("success","Mensaje","Imagen Actualizada")},onFinish:()=>{},onError:()=>{}})},k=(i,c,p)=>{n.add({severity:i,summary:c,detail:p,life:3e3})};return(i,c)=>{const p=b("Button"),F=b("Dialog"),D=j("tooltip");return _(),u("section",null,[x((_(),u("button",{type:"button",onClick:S},Z)),[[D,{value:"Cambiar Imagen",pt:{text:"bg-gray-700 p-1 text-[12px] text-white rounded"}},void 0,{top:!0}]]),m(F,{visible:o.value,"onUpdate:visible":c[0]||(c[0]=d=>o.value=d),onHide:M,modal:!0,header:r(e).nombre,style:{width:"30rem"},position:"top",pt:{header:{class:"mt-3 py-2 px-3 text-[10px]"},content:{class:"py-2 px-4 text-base"},closeButton:{class:"border-none"}}},{default:U(()=>[s("form",{onSubmit:h(I,["prevent"])},[s("div",q,[s("div",J,[(_(!0),u(B,null,L(r(f),d=>x((_(),u("div",{class:"pb-2 flex justify-center mx-auto",key:d},[s("img",{src:d,alt:"",class:"w-auto h-60"},null,8,K)])),[[O,Object.values(r(f)).length!==0]])),128)),s("input",{ref_key:"inputDOM",ref:v,type:"file",class:"upload",name:"imagen",onChange:w,accept:"image/x-png,image/gif,image/jpeg"},null,544),s("button",{onClick:h(y,["prevent"]),class:"text-white bg-green-700 hover:bg-green-600 px-2 py-1 rounded-md text-xs"},"Seleccionar imagen",8,W),m(P,{class:"mt-0 pt-0 text-xs",message:r(e).errors.imagen},null,8,["message"])])]),s("div",ee,[m(p,{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:E,type:"button"}),m(p,{label:"Enviar",size:"small",type:"submit",class:R({"opacity-50":r(e).processing}),disabled:r(e).processing},null,8,["class","disabled"])])],40,$)]),_:1},8,["visible","header"])])}}},Me=T(oe,[["__scopeId","data-v-2dd71908"]]);export{Me as default};
