import{r as x,o as I,R as u,S as j,f as F,g as C,W as e,E as M,Y as l,j as a,D as h,y as g,T as O,U as V,C as w,F as A}from"./@vue-BLfC86mR.js";import{_ as L}from"./AppLayout-BSm2L3NG.js";import{T as U,K as H,Z as P,O as $}from"./@inertiajs-CMyvZJ1U.js";import{S as q}from"./sweetalert2-DhUVDY3P.js";import{aH as z,aI as v}from"./primevue-DAb-R_om.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const K={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},W={class:"align-middle"},Y={class:"flex justify-content-end text-base text-primary-900"},Z={class:"flex items-center justify-center"},G={class:"mx-2"},J=a("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),Q={class:"px-1"},X=["src"],ee=a("i",{class:"fas fa-trash-alt"},null,-1),f="Stock Rma",y="rmas",Ve={__name:"StockRma",setup(te){const m=x([]),_=z(),b=x(),k=U({id:""});I(()=>{b.value=H().props.depositos,m.value=null});const T=t=>{if(t!=null)window.open(route("reportes.exportstockrma",{completo:t}),"_blank");else return},S=t=>{q.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminarÃ¡ definitivamente?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(c=>{c.isConfirmed&&k.delete(route(y+".destroy-stock",t),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{$.get(route(y+".rma-stock"))},1e3)}})})},B=t=>{var s=t.productos.map(r=>r.sku.toLowerCase()),c=t.productos.map(r=>r.nombre.toLowerCase());if(n.value.global.value!=null&&n.value.global.value!=""){const r=s.filter(i=>i.includes(n.value.global.value.toLowerCase())),o=c.filter(i=>i.includes(n.value.global.value.toLowerCase()));return[{"bg-orange-400":r.length>0||o.length>0}]}else return["bg-secondary-900/70"]},D=()=>{m.value=null},E=()=>{m.value=b.value.filter(t=>t.id)},N=(t,s,c)=>{_.add({severity:t,summary:s,detail:c,life:3e3})},n=x({global:{value:null,matchMode:v.CONTAINS},productos:{value:null,matchMode:v.CONTAINS}});return(t,s)=>{const c=u("InputText"),r=u("Button"),o=u("Column"),i=u("DataTable"),R=j("tooltip");return C(),F(A,null,[e(M(P),{title:f}),e(L,{pagina:[{label:f,link:!1}]},{default:l(()=>[a("div",K,[a("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},h(f))]),a("div",W,[e(i,{expandedRows:m.value,"onUpdate:expandedRows":s[2]||(s[2]=d=>m.value=d),size:"small",rowClass:B,value:b.value,scrollable:"",scrollHeight:"800px",tableStyle:"min-width: 50rem",pt:{}},{header:l(()=>[a("div",Y,[e(c,{modelValue:n.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=d=>n.value.global.value=d),placeholder:"Buscar"},null,8,["modelValue"]),e(r,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:E}),e(r,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:D})])]),empty:l(()=>[w(" No existe Resultado ")]),loading:l(()=>[w(" Cargando... ")]),expansion:l(d=>[a("div",Q,[e(i,{value:d.data.productos,filters:n.value,"onUpdate:filters":s[1]||(s[1]=p=>n.value=p),paginator:!0,rows:20,rowsPerPageOptions:[20,40,100,200]},{default:l(()=>[e(o,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),e(o,{header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:l(p=>[a("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:p.data.imagen,alt:"image"},null,8,X)]),_:2},1024),e(o,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96 font-sm"}}}),e(o,{field:"defecto",header:"Defecto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(o,{field:"observaciones",header:"Observaciones",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96"},bodyCellContent:{class:"text-center w-96 font-sm"}}}),e(o,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36 font-sm"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 font-sm"},headerContent:{class:"text-center w-36 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(o,{header:"Acciones",pt:{bodyCell:{class:"text-center"},headerCell:{class:"bg-sky-300 p-0 m-0 w-10"}}},{body:l(p=>[a("div",null,[O((C(),V(r,{class:"w-8 h-8 rounded bg-red-700 border-0 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:g(oe=>S(p.data.stock_id),["prevent"])},{default:l(()=>[ee]),_:2},1032,["onClick"])),[[R,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),_:2},1024)]),_:2},1032,["value","filters"])])]),default:l(()=>[e(o,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),e(o,{sortable:"",field:"nombre",header:"Items",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),e(o,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 text-sm font-bold w-56  text-center"},headerContent:{class:" mx-2 "},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:l(d=>[a("div",Z,[a("div",G,h(d.data.productos.length),1),e(r,{pt:{root:{class:"px-2 py-2 text-xl bg-green-600 border-none hover:bg-green-500"}},onClick:g(p=>T(d.data.producto_completo),["prevent"])},{default:l(()=>[J]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}};export{Ve as default};
