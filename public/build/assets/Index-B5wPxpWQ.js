import{r as d,w as H,o as q,R as b,S as z,f as g,g as f,W as e,E as o,Y as i,j as a,D as _,T as G,U as K,y as M,u as Y,C as S,x as P,O as B,F as W}from"./@vue-BLfC86mR.js";import{_ as Z}from"./AppLayout-DnihYO1Y.js";import{K as p,T as J,O as y,Z as L}from"./@inertiajs-B6DOW0KO.js";import{aG as Q,aH as X,h as ee,q as c}from"./primevue-B_pu_EB_.js";import{i as te}from"./vue-datepicker-next-MGkLgL3F.js";import{h as O}from"./moment-D15uM1gO.js";import oe from"./CrearModal-BEMYAKg_.js";import ae from"./EditarModal-DfidqVij.js";import{s as se}from"./@vueform-CFisUGo2.js";import{S as le}from"./sweetalert2-DQJME8_f.js";import{s as w,a as ne,e as re,b as ie,c as ce}from"./date-fns-Bj3OEEs3.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-Dq7h7Pqt.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-Dzj_DFKn.js";import"./side-channel-DZFSYYHh.js";import"./get-intrinsic-gH0OeWJ1.js";import"./has-symbols-CABd5qHC.js";import"./has-proto-CpIZBmUT.js";import"./function-bind-C4RYm_-a.js";import"./has-D2ofp1JE.js";import"./call-bind-7ir4MDz-.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./date-format-parse-DuecP4dO.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";import"./@babel-QjJsDpFa.js";const de={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},pe={class:"px-2.5 pb-2 grid grid-cols-12 gap-4"},ue={class:"ml-5 flex justify-end col-span-12 sm:col-span-4"},me=a("i",{class:"fas fa-file-excel text-white text-lg"},null,-1),fe={class:"align-middle py-1 px-3"},xe={class:"grid grid-cols-12 gap-2 m-1"},ve={class:"flex justify-content-end text-md col-span-12 lg:col-span-3 2xl:col-span-3"},he={class:"flex justify-content-end text-md col-span-12 lg:col-span-5 2xl:col-span-7"},be={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-2"},ge={class:"flex justify-end justify-items-center"},_e={key:0,class:"h-8 inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},ye={key:1,class:"h-8 inline-block rounded bg-red-700 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-red-600"},we=["onClick"],Ce=a("i",{class:"fas fa-trash-alt"},null,-1),De=[Ce],C="Pagos",u="pago-servicio",it={__name:"Index",props:{filtro:{type:Object,default:()=>({})}},setup(ke){const{permissions:D}=p().props.auth,x=d([]),V=Q(),j=J({id:""});let t=d(),E=d(),F=d(),r=d([]);t.value=[O(w(new Date,30)).format("YYYY-MM-DD"),O(new Date).format("YYYY-MM-DD")],H(r,l=>{y.get(route(u+".index"),{concepto:r.value,inicio:t.value[0],fin:t.value[1]},{preserveState:!0,onSuccess:()=>{x.value=p().props.items.data}})});const N=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[w(new Date,1),w(new Date,1)]}},{text:"Este mes",onClick(){return[ne(new Date),re(new Date)]}},{text:"Este año",onClick(){return[ie(new Date),ce(new Date)]}}],v=d({global:{value:null,matchMode:X.CONTAINS}}),R=(l,n,m)=>{V.add({severity:l,summary:n,detail:m,life:3e3})},$=(l,n)=>{le.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+n,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(h=>{h.isConfirmed&&j.delete(route(u+".destroy",l),{preserveScroll:!0,onSuccess:()=>{R("success","Eliminado","Se ha eliminado"),setTimeout(()=>{y.get(route(u+".index"))},1e3)}})})},k=d({value:"",closeOnSelect:!0,placeholder:"Conceptos",mode:"tags",searchable:!0,options:[]}),I=()=>{if(t.value[0]!=null&&t.value[1]!=null)window.open(route(u+".exportar",[{concepto:r.value,inicio:t.value[0],fin:t.value[1]}]),"_blank");else return},T=l=>{l[0]!=null&&l[1]!=null&&(E.value=t.value[0],F.value=t.value[1]),y.get(route(u+".index"),{concepto:r.value,inicio:t.value[0],fin:t.value[1]},{preserveState:!0,onSuccess:()=>{r.value=p().props.filtro.concepto,x.value=p().props.items.data}})};return q(()=>{k.value.options=p().props.conceptos,T(t.value)}),(l,n)=>{const m=b("Toast"),h=b("InputText"),U=b("DataTable"),A=z("tooltip");return f(),g(W,null,[e(o(L),{title:C}),e(Z,{pagina:[{label:C,link:!1}]},{default:i(()=>[a("div",de,[e(m),a("div",pe,[a("div",{class:"py-1 px-3 col-span-12 sm:col-span-8 flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},_(C))]),a("div",ue,[e(oe),G((f(),K(o(ee),{onClick:M(I,["prevent"]),pt:{root:{class:"py-auto px-2.5 ml-5 py-2 text-lg bg-green-600 border-none hover:bg-green-500"}}},{default:i(()=>[me]),_:1},8,["onClick"])),[[A,{value:"Exportar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),a("div",fe,[e(U,{filters:v.value,value:x.value,globalFilterFields:["tconcepto","observacion"],scrollable:"",scrollHeight:"700px",paginator:"",rows:50,columnResizeMode:"expand",pt:{bodyRow:{class:"hover:bg-gray-100 hover:text-black"},root:{class:"text-base"}},size:"small"},{header:i(()=>[a("div",xe,[a("div",ve,[e(h,{class:"h-9 w-full",modelValue:v.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=s=>v.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"])]),a("div",he,[e(o(se),P({id:"conceptos",modelValue:o(r),"onUpdate:modelValue":n[1]||(n[1]=s=>B(r)?r.value=s:r=s),class:"w-full"},k.value),null,16,["modelValue"])]),a("div",be,[e(o(te),{onChange:T,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:o(t),"onUpdate:value":n[2]||(n[2]=s=>B(t)?t.value=s:t=s),shortcuts:N,clearable:!1,lang:"es",editable:!1,placeholder:"Seleccione Fecha"},null,8,["value"])])])]),empty:i(()=>[S(" No existe Resultado ")]),loading:i(()=>[S(" Cargando... ")]),default:i(()=>[e(o(c),{field:"fecha",sortable:"",header:"Fecha",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(c),{field:"nro_factura",header:"No. de Factura",sortable:"",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(c),{field:"moneda",header:"Moneda",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(c),{sortable:"",header:"Monto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:i(s=>[a("span",null,_(l.$numberFormat(s.data.monto)),1)]),_:1}),e(o(c),{field:"tconcepto",sortable:"",header:"Concepto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(c),{sortable:"",header:"Método Pago",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:i(s=>[a("span",null,_(s.data.tmetodo),1)]),_:1}),e(o(c),{field:"observacion",header:"Observación",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(c),{header:"Acciones",style:{width:"100px"},pt:{bodyCell:{class:"text-center"}}},{body:i(s=>[a("div",ge,[o(D).includes("editar-pagoservicio")?(f(),g("div",_e,[e(ae,{"item-id":s.data.id},null,8,["item-id"])])):Y("",!0),o(D).includes("eliminar-pagoservicio")?(f(),g("div",ye,[a("button",{onClick:M(Te=>$(s.data.id,s.data.nro_factura),["prevent"])},De,8,we)])):Y("",!0)])]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{it as default};
