import{r as c,o as A,O as h,P as I,g as v,S as e,E as o,V as n,F as z,f as p,j as t,A as b,Q as H,R as q,t as D,K,z as k,n as T}from"./@vue-1043e4d5.js";import{_ as U}from"./AppLayout-50b5d09a.js";import{K as _,T as G,O as M,Z as Q}from"./@inertiajs-ab1bf9dd.js";import{aG as Z,aH as J,h as L,q as i}from"./primevue-232ee6f7.js";import{i as P}from"./vue-datepicker-next-31061510.js";import{h as Y}from"./moment-fbc5633a.js";import W from"./CrearModal-86dbe58d.js";import X from"./EditarModal-6ab6d8d7.js";import{S as ee}from"./sweetalert2-c47eda61.js";import{s as g,a as te,e as ae,b as oe,c as se}from"./date-fns-7c3f4903.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";import"./InputError-933cc936.js";import"./InputLabel-bc304214.js";import"./@babel-7fd5df1e.js";const le={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},ne={class:"px-2.5 pb-2 grid grid-cols-12 gap-4"},re={class:"ml-5 flex justify-end col-span-12 sm:col-span-4"},ie=t("i",{class:"fas fa-file-excel text-white text-lg"},null,-1),ce={class:"align-middle py-1 px-3"},de={class:"flex justify-content-end text-md"},pe={class:"w-72"},me={class:"ml-5 flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-2"},ue={class:"flex justify-end justify-items-center"},fe={key:0,class:"h-8 inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},xe={key:1,class:"h-8 inline-block rounded bg-red-700 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-red-600"},he=["onClick"],ve=t("i",{class:"fas fa-trash-alt"},null,-1),be=[ve],y="Pagos",m="pago-servicio",tt={__name:"Index",setup(_e){const{permissions:w}=_().props.auth,u=c([]),S=Z(),B=G({id:""});let a=c(),E=c(),F=c();a.value=[Y(g(new Date,30)).format("YYYY-MM-DD"),Y(new Date).format("YYYY-MM-DD")];const O=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[g(new Date,1),g(new Date,1)]}},{text:"Este mes",onClick(){return[te(new Date),ae(new Date)]}},{text:"Este año",onClick(){return[oe(new Date),se(new Date)]}}];A(()=>{u.value=_().props.items.data,C(a.value)});const f=c({global:{value:null,matchMode:J.CONTAINS}}),N=(s,r,d)=>{S.add({severity:s,summary:r,detail:d,life:3e3})},V=(s,r)=>{ee.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+r,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(x=>{x.isConfirmed&&B.delete(route(m+".destroy",s),{preserveScroll:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{M.get(route(m+".index"))},1e3)}})})},j=()=>{if(a.value[0]!=null&&a.value[1]!=null)window.open(route(m+".exportar",[{inicio:a.value[0],fin:a.value[1]}]),"_blank");else return},C=s=>{s[0]!=null&&s[1]!=null&&(E.value=a.value[0],F.value=a.value[1]),M.get(route(m+".index"),{inicio:a.value[0],fin:a.value[1]},{preserveState:!0,onSuccess:()=>{u.value=_().props.items.data}})};return(s,r)=>{const d=h("Toast"),x=h("InputText"),R=h("DataTable"),$=I("tooltip");return p(),v(z,null,[e(o(Q),{title:y}),e(U,{pagina:[{label:y,link:!1}]},{default:n(()=>[t("div",le,[e(d),t("div",ne,[t("div",{class:"py-1 px-3 col-span-12 sm:col-span-8 flex justify-between items-center"},[t("h5",{class:"text-2xl font-medium"},b(y))]),t("div",re,[e(W),H((p(),q(o(L),{onClick:D(j,["prevent"]),pt:{root:{class:"py-auto px-2.5 ml-5 py-2 text-lg bg-green-600 border-none hover:bg-green-500"}}},{default:n(()=>[ie]),_:1},8,["onClick"])),[[$,{value:"Exportar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),t("div",ce,[e(R,{filters:f.value,value:u.value,globalFilterFields:["concepto","observacion"],scrollable:"",scrollHeight:"700px",paginator:"",rows:50,columnResizeMode:"expand",pt:{bodyRow:{class:"hover:bg-gray-100 hover:text-black"},root:{class:"text-base"}},size:"small"},{header:n(()=>[t("div",de,[t("div",pe,[e(x,{modelValue:f.value.global.value,"onUpdate:modelValue":r[0]||(r[0]=l=>f.value.global.value=l),placeholder:"Buscar",class:"w-full"},null,8,["modelValue"])]),t("div",me,[e(o(P),{onChange:C,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:o(a),"onUpdate:value":r[1]||(r[1]=l=>K(a)?a.value=l:a=l),shortcuts:O,clearable:!1,lang:"es",editable:!1,placeholder:"Seleccione Fecha"},null,8,["value"])])])]),empty:n(()=>[k(" No existe Resultado ")]),loading:n(()=>[k(" Cargando... ")]),default:n(()=>[e(o(i),{field:"fecha_pago",sortable:"",header:"Fecha",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(i),{field:"nro_factura",header:"No. de Factura",sortable:"",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(i),{field:"moneda",header:"Moneda",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(i),{sortable:"",header:"Monto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:n(l=>[t("span",null,b(s.$numberFormat(l.data.monto)),1)]),_:1}),e(o(i),{sortable:"",header:"Concepto",field:"concepto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:n(l=>[t("span",null,b(l.data.concepto),1)]),_:1}),e(o(i),{field:"observacion",header:"Observación",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),e(o(i),{header:"Acciones",style:{width:"100px"},pt:{bodyCell:{class:"text-center"}}},{body:n(l=>[t("div",ue,[o(w).includes("editar-pagoservicio")?(p(),v("div",fe,[e(X,{"item-id":l.data.id},null,8,["item-id"])])):T("",!0),o(w).includes("eliminar-pagoservicio")?(p(),v("div",xe,[t("button",{onClick:D(ge=>V(l.data.id,l.data.nro_factura),["prevent"])},be,8,he)])):T("",!0)])]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{tt as default};
