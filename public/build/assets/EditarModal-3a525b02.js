import{k as N,l as f,T as S,m as i,f as T,b as n,a as o,w as F,o as U,u as a,e as z,n as A,B as L,O as j}from"./app-786d4550.js";import{_ as u}from"./InputError-f3f089c1.js";import{_ as p}from"./InputLabel-ccab3711.js";import{i as v}from"./es.es-b74eabc4.js";import{h as x}from"./moment-fbc5633a.js";const O=n("i",{class:"fas fa-edit"},null,-1),$=[O],G={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-2 mb-2"},q={class:"col-span-12 shadow-default lg:col-span-6"},H={class:"col-span-12 shadow-default lg:col-span-6"},J={class:"col-span-12 shadow-default"},K={class:"col-span-12 shadow-default my-auto"},P={class:"col-span-12 shadow-default my-auto"},Q={class:"flex justify-end py-3"},R="ImportaciÃ³n",_="importaciones",te={__name:"EditarModal",props:{clienteId:{type:Number,default:null}},setup(y){const Y=y,w=N(),r=f(!1),e=S({id:"",estado:"",nro_carpeta:"",nro_carpeta:"",nro_contenedor:"",estado:"",fecha_arribado:"",fecha_camino:""}),D=c=>{d.value.code!=e.estado&&(e.estado=d.value.code)},M=()=>{C(Y.clienteId)},d=f(),b=f([{name:"Arribado",code:"Arribado"},{name:"En camino",code:"En camino"}]),C=c=>{L.get(route(_+".showmodal",c)).then(t=>{var l=t.data.importacion;e.id=l.id,e.nro_carpeta=l.nro_carpeta,e.nro_contenedor=l.nro_contenedor,e.estado=l.estado,d.value=b.value.find(m=>m.code===l.estado),e.fecha_arribado=x(l.fecha_arribado).format("YYYY-MM-DD"),e.fecha_camino=x(l.fecha_camino).format("YYYY-MM-DD"),r.value=!0})},k=()=>{e.reset(),e.clearErrors(),r.value=!1},E=()=>{e.clearErrors(),e.post(route(_+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{r.value=!1,V("success","Mensaje","Se ha editado"),setTimeout(()=>{j.get(route(_+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},V=(c,t,l)=>{w.add({severity:c,summary:t,detail:l,life:3e3})};return(c,t)=>{const l=i("Toast"),m=i("InputText"),B=i("Dropdown"),g=i("Button"),I=i("Dialog");return U(),T("section",null,[n("button",{type:"button",onClick:M},$),o(l),o(I,{visible:r.value,"onUpdate:visible":t[5]||(t[5]=s=>r.value=s),modal:"",header:"Editar "+R,style:{width:"30vw"},position:"top",pt:{header:{class:"mt-6 p-2"},content:{class:"p-2"}}},{default:F(()=>[n("form",null,[n("div",G,[n("div",q,[o(p,{for:"nro_carpeta",value:"No. de Carpeta",class:"block text-base font-medium leading-6 text-gray-900"}),o(m,{type:"text",id:"nro_carpeta",modelValue:a(e).nro_carpeta,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).nro_carpeta=s),placeholder:"Ingrese No. de Carpeta",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(u,{class:"mt-1 text-xs",message:a(e).errors.nro_carpeta},null,8,["message"])]),n("div",H,[o(p,{for:"nro_contenedor",value:"BL o No. de Contenedor",class:"block text-base font-medium leading-6 text-gray-900"}),o(m,{type:"text",id:"nro_contenedor",modelValue:a(e).nro_contenedor,"onUpdate:modelValue":t[1]||(t[1]=s=>a(e).nro_contenedor=s),placeholder:"Ingrese BL o No. de Contenedor",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(u,{class:"mt-1 text-xs",message:a(e).errors.nro_contenedor},null,8,["message"])]),n("div",J,[o(p,{for:"estado",value:"Estado",class:"block text-base font-medium leading-6 text-gray-900"}),o(B,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),onChange:D,options:b.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:W,context:h})=>({class:h.selected?"text-white bg-primary-900":h.focused?"bg-blue-100":void 0})},placeholder:"Seleccione estado"},null,8,["modelValue","options","pt"]),o(u,{class:"mt-1 text-xs",message:a(e).errors.estado},null,8,["message"])]),n("div",K,[o(p,{for:"fecha_camino",value:"Fecha En Camino",class:"block text-base font-medium leading-6 text-gray-900"}),o(a(v),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-6 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_camino,"onUpdate:value":t[3]||(t[3]=s=>a(e).fecha_camino=s),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),o(u,{class:"mt-1 text-xs",message:a(e).errors.fecha_camino},null,8,["message"])]),n("div",P,[o(p,{for:"estado",value:"Fecha Arribado",class:"block text-base font-medium leading-6 text-gray-900"}),o(a(v),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-6 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_arribado,"onUpdate:value":t[4]||(t[4]=s=>a(e).fecha_arribado=s),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),o(u,{class:"mt-1 text-xs",message:a(e).errors.fecha_arribado},null,8,["message"])])]),n("div",Q,[o(g,{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:k,type:"button"}),o(g,{label:"Guardar",size:"small",type:"button",onClick:z(E,["prevent"]),class:A({"opacity-50":a(e).processing}),disabled:a(e).processing},null,8,["onClick","class","disabled"])])])]),_:1},8,["visible","header"])])}}};export{te as default};
