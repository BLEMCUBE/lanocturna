import{K as E,l as f,k as $,T as z,h as K,F as I,m as x,p as Z,f as y,a as t,u as d,w as n,q as G,o as v,Z as J,b as r,t as D,d as w,v as N,c as P,e as Q,g as _,O as W,C as X,D as Y}from"./app-7035816b.js";import{_ as ee,S as te}from"./AppLayout-dbf13d64.js";import oe from"./CambiarProductosDepositoModal-0661c83f.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./InputError-d329b971.js";import"./InputLabel-69de9ece.js";const R=h=>(X("data-v-2ade6b71"),h=h(),Y(),h),le={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},ae={class:"align-middle"},ne={class:"flex justify-content-end text-base text-primary-900"},re={key:0,class:"w-8 h-8 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},de=["href"],ce=R(()=>r("i",{class:"fas fa-file-excel text-white"},null,-1)),ie=[ce],ue={class:"px-1"},pe={class:"flex justify-content-end text-base bg-sky-300 px-5 py-2"},be={key:0},me=R(()=>r("i",{class:"fas fa-trash-alt w-6 h-4"},null,-1)),xe=["src"],k="Dep칩sitos",M="depositos",he={__name:"Index",setup(h){const{roles:S}=E().props.auth,u=f([]),V=$(),g=f(),C=f(!1),l=z({id:"",productos:[]});K(()=>{g.value=E().props.depositos,u.value=null});const j=()=>{te.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminar치 definitivamente, tenga en cuenta que no podr치 editar la importacion de bultos donde el producto este incluido.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(e=>{e.isConfirmed&&(C.value=!0,l.post(route(M+".destroyproductos"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{C.value=!1,l.reset(),H("success","Eliminado","Se ha eliminado"),setTimeout(()=>{W.get(route(M+".index"))},700)}}))})},A=s=>{var e=s.productos.map(p=>p.sku.toLowerCase()),b=s.productos.map(p=>p.nombre.toLowerCase());if(c.value.global.value!=null&&c.value.global.value!=""){const p=e.filter(o=>o.includes(c.value.global.value.toLowerCase())),m=b.filter(o=>o.includes(c.value.global.value.toLowerCase()));return[{"bg-orange-400":p.length>0||m.length>0}]}else return["bg-secondary-900/70"]},F=s=>{s&&l.reset()},O=()=>{u.value=null},U=s=>{u.value=g.value.filter(e=>e.id==s.data.id),l.reset()},L=s=>{u.value=null,l.reset()},q=()=>{u.value=g.value.filter(s=>s.id)},H=(s,e,b)=>{V.add({severity:s,summary:e,detail:b,life:3e3})},c=f({global:{value:null,matchMode:I.CONTAINS},productos:{value:null,matchMode:I.CONTAINS}});return(s,e)=>{const b=x("Toast"),p=x("InputText"),m=x("Button"),o=x("Column"),T=x("DataTable"),B=Z("tooltip");return v(),y(G,null,[t(d(J),{title:k}),t(ee,{pagina:[{label:k,link:!1}]},{default:n(()=>[r("div",le,[t(b),r("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[r("h5",{class:"text-2xl font-medium"},D(k))]),r("div",ae,[t(T,{expandedRows:u.value,"onUpdate:expandedRows":e[5]||(e[5]=a=>u.value=a),size:"small",rowClass:A,onRowCollapse:L,onRowExpand:U,value:g.value,scrollable:"",scrollHeight:"800px",virtualScrollerOptions:{itemSize:46},tableStyle:"min-width: 50rem",pt:{}},{header:n(()=>[r("div",ne,[t(p,{modelValue:c.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"]),t(m,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:q}),t(m,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:O})])]),empty:n(()=>[w(" No existe Resultado ")]),loading:n(()=>[w(" Cargando... ")]),expansion:n(a=>[r("div",ue,[t(T,{value:a.data.productos,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,filters:c.value,"onUpdate:filters":e[3]||(e[3]=i=>c.value=i),selection:d(l).productos,"onUpdate:selection":e[4]||(e[4]=i=>d(l).productos=i),pt:{header:{class:"text-center pb-0 mb-0"},headerContent:{class:"bg-sky-300 pb-0 mb-0"}}},{header:n(()=>[r("div",pe,[r("div",null,[t(oe,{"origen-id":a.data.id,"origen-nombre":a.data.nombre,productos:d(l).productos,"onUpdate:valor":e[1]||(e[1]=i=>F(i)),"disabled-status":!d(l).productos||!d(l).productos.length},null,8,["origen-id","origen-nombre","productos","disabled-status"])]),C.value==!1?(v(),y("div",be,[a.data.id==2?N((v(),P(m,{key:0,disabled:!d(l).productos||!d(l).productos.length,class:"w-auto rounded bg-red-700 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:e[2]||(e[2]=Q(i=>j(),["prevent"]))},{default:n(()=>[me]),_:1},8,["disabled"])),[[B,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):_("",!0)])):_("",!0)])]),default:n(()=>[t(o,{selectionMode:"multiple",headerStyle:"width: 3rem",pt:{headerCell:{class:"text-center bg-sky-300"},bodyCell:{class:"text-center"}}}),t(o,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),t(o,{header:"Imagen",select:"",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:n(i=>[r("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:i.data.imagen,alt:"image"},null,8,xe)]),_:2},1024),t(o,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96"}}}),t(o,{field:"bultos",header:"Bultos",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(o,{field:"pcs_bulto",header:"Pcs por Bulto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(o,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}})]),_:2},1032,["value","filters","selection"])])]),default:n(()=>[t(o,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),t(o,{sortable:"",field:"nombre",header:"Dep칩sito",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),t(o,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-24  text-center"},headerContent:{class:" mx-2"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(a=>[w(D(a.data.productos.length),1)]),_:1}),t(o,{header:"",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:"mx-2 text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(a=>[d(S).includes("Super Administrador")||d(S).includes("Administrador")?N((v(),y("div",re,[r("a",{href:s.route("depositos.exportar",a.data.id),target:"_blank",class:"py-auto p-2 text-xl"},ie,8,de)])),[[B,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):_("",!0)]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}},ke=se(he,[["__scopeId","data-v-2ade6b71"]]);export{ke as default};
