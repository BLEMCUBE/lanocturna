import{r as _,o as U,O as k,g as F,S as a,E as t,V as T,F as M,f as P,j as l,A as j,t as z,q as D,Q as g,a2 as f,a1 as O,u as $,aZ as A,aX as B}from"./@vue-1043e4d5.js";import{_ as q}from"./AppLayout-30bee2ca.js";import{T as N,K as y,Z as G,O as v}from"./@inertiajs-ab1bf9dd.js";import{aG as K,h}from"./primevue-232ee6f7.js";import{_ as n}from"./InputError-933cc936.js";import{_ as i}from"./InputLabel-bc304214.js";import{s as R}from"./@vueform-21ff8afc.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./sweetalert2-c47eda61.js";import"./apexcharts-f697a6eb.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const L=u=>(A("data-v-f590678d"),u=u(),B(),u),Q={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},W={class:"align-middle"},X=["onSubmit"],H={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},J={class:"col-span-12 shadow-default xl:col-span-3"},Y={class:"col-span-12 shadow-default xl:col-span-5"},ee={class:"col-span-12 shadow-default xl:col-span-4"},te={class:"col-span-12 shadow-default xl:col-span-3"},oe={class:"col-span-12 shadow-default xl:col-span-3"},ae={class:"col-span-12 shadow-default xl:col-span-3"},se={class:"col-span-12 shadow-default xl:col-span-3"},le={class:"col-span-12 shadow-default xl:col-span-6"},re=L(()=>l("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),ie={class:"col-span-12 shadow-default xl:col-span-3"},ne={class:"flex justify-end pt-2"},x="Editar Producto",c="productos",de={__name:"Edit",setup(u){const p=_("/images/productos/sin_foto.png"),w=K(),e=N({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,stock_minimo:0,imagen:"",photo:"",categorias:[]});U(()=>{b.value.options=y().props.lista_categorias;var s=y().props.producto;e.id=s.id,e.nombre=s.nombre,e.origen=s.origen,e.aduana=s.aduana,e.codigo_barra=s.codigo_barra,e.stock=s.stock,e.stock_minimo=s.stock_minimo,e.stock_futuro=s.stock_futuro,s.categorias.length>0&&s.categorias.forEach(o=>{e.categorias.push(o.id)}),p.value=s.imagen,e.imagen=s.imagen});const V=()=>{e.clearErrors(),e.post(route(c+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{I("success","Mensaje","Producto Actualizado"),setTimeout(()=>{v.get(route(c+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},b=_({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),S=s=>{s.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(s.target.value))},I=(s,o,d)=>{w.add({severity:s,summary:o,detail:d,life:3e3})},C=()=>{v.get(route(c+".index"))},E=s=>{s.preventDefault(),e.photo=s.target.files[0];let o=s.target.files;if(o&&o[0]){let d=new FileReader;d.onload=m=>{p.value=m.target.result},d.readAsDataURL(o[0])}};return(s,o)=>{const d=k("Toast"),m=k("InputText");return P(),F(M,null,[a(t(G),{title:x}),a(q,{pagina:[{label:"Productos",link:!0,url:s.route(c+".index")},{label:x,link:!1}]},{default:T(()=>[l("div",Q,[a(d),l("div",{class:"px-3 col-span-full flex justify-between items-center"},[l("h5",{class:"text-2xl font-medium"},j(x))]),l("div",W,[l("form",{onSubmit:z(V,["prevent"])},[l("div",H,[l("div",J,[a(i,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),a(m,{type:"text",id:"origen",modelValue:t(e).origen,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).origen=r),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(n,{class:"mt-1 text-xs",message:t(e).errors.origen},null,8,["message"])]),l("div",Y,[a(i,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),a(m,{type:"text",id:"nombre",modelValue:t(e).nombre,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).nombre=r),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(n,{class:"mt-1 text-xs",message:t(e).errors.nombre},null,8,["message"])]),l("div",ee,[a(i,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),a(t(R),D({id:"categorias",modelValue:t(e).categorias,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).categorias=r),class:"w-full"},b.value),null,16,["modelValue"])]),l("div",te,[a(i,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),a(m,{type:"text",id:"aduana",modelValue:t(e).aduana,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).aduana=r),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(n,{class:"mt-1 text-xs",message:t(e).errors.aduana},null,8,["message"])]),l("div",oe,[a(i,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),a(m,{type:"text",id:"codigo_barra",modelValue:t(e).codigo_barra,"onUpdate:modelValue":o[4]||(o[4]=r=>t(e).codigo_barra=r),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(n,{class:"mt-1 text-xs",message:t(e).errors.codigo_barra},null,8,["message"])]),l("div",ae,[a(i,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),g(l("input",{type:"number",required:"","onUpdate:modelValue":o[5]||(o[5]=r=>t(e).stock=r),step:"1",min:"0",onKeyup:o[6]||(o[6]=r=>S(r)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[f,t(e).stock]]),a(n,{class:"mt-1 text-xs",message:t(e).errors.stock},null,8,["message"])]),l("div",se,[a(i,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),g(l("input",{type:"number",required:"","onUpdate:modelValue":o[7]||(o[7]=r=>t(e).stock_minimo=r),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[f,t(e).stock_minimo]]),a(n,{class:"mt-1 text-xs",message:t(e).errors.stock_minimo},null,8,["message"])]),g(l("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":o[8]||(o[8]=r=>t(e).stock_futuro=r)},null,512),[[f,t(e).stock_futuro]]),l("div",le,[a(i,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),l("input",{onInput:E,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),re,a(n,{class:"mt-1 text-xs",message:t(e).errors.imagen},null,8,["message"])]),l("div",ie,[l("div",{class:"imagePreviewWrapper",style:O({"background-image":`url(${p.value})`})},null,4)])]),l("div",ne,[a(t(h),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:C,type:"button"}),a(t(h),{label:"Guardar",size:"small",type:"submit",class:$({"opacity-50":t(e).processing}),disabled:t(e).processing},null,8,["class","disabled"])])],40,X)])])]),_:1},8,["pagina"])],64)}}},Ae=Z(de,[["__scopeId","data-v-f590678d"]]);export{Ae as default};
