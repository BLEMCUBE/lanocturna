import{_ as I,S as F}from"./AppLayout-d455366d.js";import{k as B,l as x,K as c,T as R,h as S,F as M,m as d,p as U,f as z,a as e,u as t,w as s,q as $,o as h,Z as j,b as r,t as f,x as _,d as v,A as l,n as H,y as L,c as P,g as q,O as p}from"./app-9f12951d.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const G={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},K={class:"px-3 pb-2 col-span-full flex justify-between items-center"},Z={class:"align-middle"},J={class:"flex justify-content-end text-md"},Q=r("i",{class:"fas fa-edit"},null,-1),u="Historial de Ventas",b="ventas",se={__name:"Index",setup(W){B();const m=x(),{permissions:g}=c().props.auth,{tipo_cambio:y}=c().props;R({id:""});const C=a=>{switch(a){case"PENDIENTE DE FACTURACIÓN":return"text-orange-600";case"FACTURADO":return"text-blue-600";case"COMPLETADO":return"text-green-600";case"ANULADO":return"text-red-600";default:return"text-black"}},w=a=>{p.get(route(b+".show",a))},T=a=>{p.get(route(b+".edit",a))},N=a=>{w(a.data.id)};S(()=>{m.value=c().props.ventas.data});const k=()=>{y==!0?p.get(route(b+".create")):E("error","No se ha especificado el tipo de cambio para el día")},E=(a,n)=>{F.fire({width:350,title:n,icon:a})},i=x({global:{value:null,matchMode:M.CONTAINS}});return(a,n)=>{const D=d("Toast"),A=d("InputText"),V=d("DataTable"),O=U("tooltip");return h(),z($,null,[e(t(j),{title:u}),e(I,{pagina:[{label:u,link:!1}]},{default:s(()=>[r("div",G,[e(D),r("div",K,[r("h5",{class:"text-2xl font-medium"},f(u)),e(t(_),{size:"small",label:"Crear Venta",severity:"success",onClick:k})]),r("div",Z,[e(V,{showGridlines:"",filters:i.value,value:m.value,pt:{bodyRow:{class:"hover:cursor-pointer"}},scrollable:"",scrollHeight:"800px",virtualScrollerOptions:{class:"min-h-screen",itemSize:46},onRowClick:N,size:"small"},{header:s(()=>[r("div",J,[e(A,{modelValue:i.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=o=>i.value.global.value=o),placeholder:"Buscar"},null,8,["modelValue"])])]),empty:s(()=>[v(" No existe Resultado ")]),loading:s(()=>[v(" Cargando... ")]),default:s(()=>[e(t(l),{field:"fecha",header:"Facha y hora",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(l),{field:"codigo",header:"No. Pedido",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(l),{field:"cliente",header:"Cliente",sortable:"",pt:{bodyCell:{class:"text-center border"}}}),e(t(l),{field:"estado",header:"Estado",sortable:"",pt:{bodyCell:{class:"text-center"}}},{body:s(o=>[r("span",{class:H(["font-semibold text-md",C(o.data.estado)])},f(o.data.estado),3)]),_:1}),e(t(l),{field:"total",sortable:"",header:"Total",pt:{bodyCell:{class:"text-center"}}}),e(t(l),{field:"observaciones",sortable:"",header:"Observaciones",pt:{bodyCell:{class:"text-center"}}}),e(t(l),{header:"Acciones",style:{width:"100px"},pt:{bodyCell:{class:"text-center"}}},{body:s(o=>[t(g).includes("editar-ventas")&&o.data.estado=="PENDIENTE DE FACTURACIÓN"?L((h(),P(t(_),{key:0,onClick:X=>T(o.data.id),class:"w-8 h-8 rounded bg-primary-900 px-2 py-1 text-base font-normal text-white m-1 hover:bg-primary-100"},{default:s(()=>[Q]),_:2},1032,["onClick"])),[[O,{value:"Editar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):q("",!0)]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{se as default};
