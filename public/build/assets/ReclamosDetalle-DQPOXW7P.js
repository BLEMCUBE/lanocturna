import{o as B,c as D,M as j,e as n,f as l,Q as c,ab as t,S as p,i as e,y as o,j as _,F as h,u as x,q as b,x as u,p as E,O as N,a0 as O}from"./@vue-BG0wrCoO.js";import{_ as $}from"./AppLayout-DGXGhT07.js";import{K as g,T as z,Z as A,O as H}from"./@inertiajs-BPLxF6VH.js";import P from"./ModalRepuestaRapidas-l4IWbptM.js";import{u as U}from"./customToast-BHcAeENZ.js";import"./logo-C8Jea0Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./primevue-DlS7f910.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./InputError-cOM6HFrc.js";const K={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},q={class:"w-2/3 flex justify-between"},Q={class:"px-5 pb-2"},W=e("h5",{class:"text-2xl font-medium"},"Venta: ",-1),Z={class:"text-lg font-medium"},G={class:"h-8 p-2 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},J=["href"],X={class:"grid grid-cols-12 gap-6"},Y={class:"col-span-8"},ee={class:"bg-white rounded-xl shadow p-6"},te={class:"w-full max-h-screen flex flex-col"},se={class:"flex-1 overflow-y-auto p-4 space-y-2"},oe={class:"text-center text-gray-500 text-xs"},re={class:"space-y-2"},ae=["innerHTML"],ne={key:0,class:"w-auto text-xs"},le=["href"],ie=e("i",{class:"fa fa-paperclip"},null,-1),de={class:"ml-1",style:{"font-size":"12px"}},ce={class:"flex items-center justify-end gap-1 mt-1"},pe={class:"text-[12px] text-gray-500"},_e={class:"border-t py-3 bg-white"},ue={key:0,class:"cursor-pointer text-gray-500 hover:text-gray-700"},me=e("i",{class:"fa-solid fa-paperclip fa-xl"},null,-1),he=["readOnly"],fe={key:1,class:"flex justify-end"},xe=["disabled"],be={key:0,class:"text-red-500"},ge={key:1,class:"text-red-500"},ve={class:"col-span-4"},ye=e("div",{class:"flex align-items-center gap-2"},[e("span",{class:"font-bold white-space-nowrap"},"Reclamo")],-1),we=e("b",null,"Reclamo: ",-1),ke=e("p",null,[e("b",null,"Tipo: "),u(" Reclamo ")],-1),je=e("b",null,"Motivo: ",-1),Me=e("div",{class:"flex align-items-center gap-2"},[e("span",{class:"font-bold white-space-nowrap"},"Comprador")],-1),Te=e("b",null,"Nombre: ",-1),Ce=e("b",null,"Usuario: ",-1),Ie={class:"bg-white rounded-xl shadow p-5 mb-5"},Re=e("div",{class:"text-lg font-semibold pb-2"}," Compra ",-1),Se={class:"flex gap-3 items-center"},Ve=["src"],Fe={class:"text-sm text-gray-700"},Le=["href"],Be={class:"font-medium"},De={key:0,class:"text-gray-600"},Ee={class:"text-gray-500 text-xs"},Ne={class:"font-semibold mt-1"},Oe={class:"bg-white rounded-xl shadow p-5 overflow-y-auto"},$e=e("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),ze={class:"hidden sm:block flex-wrap gap-2 mb-4"},v="mercadolibre.reclamos",wt={__name:"ReclamosDetalle",setup(Ae){const{setShow:y}=U(),{datos:s}=g().props,{tienda:M}=g().props,T=`Reclamos Mensajes "${M}"`,{client_id:f}=g().props,r=z({reclamoId:null,sellerId:null,clientId:null,buyerId:null,text:"",files:[]}),C=i=>{r.files=Array.from(i.target.files)},I=()=>{if(r.text.length===0){y("error","Error","Por favor ingresá un Mensaje.");return}r.clearErrors(),r.post(route(v+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{y("success","Mensaje","Mensaje enviado"),setTimeout(()=>{H.get(route(v+".index",{client_id:f}))},500)},onFinish:()=>{},onError:()=>{}})};B(()=>{r.reclamoId=s.id,r.sellerId=s.comprador.seller,r.buyerId=s.comprador.id,r.clientId=f});const R=i=>{r.text=i.respuesta},S=i=>(i/1024/1024).toFixed(2),V=i=>new Date(i.replace(" ","T")).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase().replace(/\./g,"").replace(/\s+/g,""),F=D(()=>s.mensajes);return(i,m)=>{const w=j("TabPanel"),L=j("TabView");return l(),n(h,null,[c(t(A),{title:"Mercado Libre-Mensajes"}),c($,{pagina:[{label:T,link:!1}]},{default:p(()=>[e("div",K,[e("div",q,[e("div",Q,[W,e("p",Z,"#"+o(t(s).pack_id),1),e("p",null,o(t(s).date_created),1)]),e("span",G,[e("a",{href:"https://www.mercadolibre.com.uy/ventas/nueva/mensajeria/"+t(s).pack_id+"/reclamo/"+t(s).id,target:"_blank",class:"py-auto"},"Ver ficha de venta",8,J)])]),e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[(l(!0),n(h,null,x(F.value,(a,k)=>(l(),n(h,{key:k},[e("div",oe,o(k),1),e("div",re,[(l(!0),n(h,null,x(a,d=>(l(),n("div",{key:d.raw.id,class:b(["flex",d.sender_role=="complainant"?"justify-start":"justify-end"])},[e("div",{class:b(["p-2 rounded-xl max-w-lg shadow-md",d.sender_role=="complainant"?" bg-white text-gray-800":"bg-blue-100  text-gray-800"])},[e("p",{class:"text-xs",innerHTML:d.raw.message},null,8,ae),d.attachment_path!==null?(l(),n("div",ne,[e("a",{class:"text-blue-700",href:i.route(v+".descargarAdjunto",{filename:d.raw.attachments[0].filename,original_filename:d.raw.attachments[0].original_filename,client_id:t(f),reclamo_id:t(s).id}),target:"_blank"},[ie,u(" "+o(d.raw.attachments[0].original_filename),1)],8,le),e("span",de,"("+o(S(d.raw.attachments[0].size))+"MB)",1)])):_("",!0),e("div",ce,[e("span",pe,o(V(d.fecha)),1)])],2)],2))),128))])],64))),128))]),e("div",_e,[e("form",{class:"flex items-center gap-3",onSubmit:m[1]||(m[1]=E(a=>I(),["prevent"]))},[t(s).estado!=="closed"?(l(),n("label",ue,[me,e("input",{type:"file",multiple:"",class:"hidden",onChange:C},null,32)])):_("",!0),N(e("textarea",{rows:"1",maxlength:"340","onUpdate:modelValue":m[0]||(m[0]=a=>t(r).text=a),readOnly:t(s).estado==="closed",placeholder:"Ingresá tu mensaje...",class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,8,he),[[O,t(r).text]]),t(s).estado!=="closed"?(l(),n("div",fe,[e("button",{type:"submit",class:b(["bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700",{"opacity-50":t(r).processing}]),disabled:t(r).processing}," Enviar ",10,xe)])):_("",!0)],32)]),t(r).errors.text?(l(),n("div",be,o(t(r).errors.text),1)):_("",!0),t(r).errors["files.0"]?(l(),n("div",ge,o(t(r).errors["files.0"]),1)):_("",!0)])])]),e("div",ve,[c(L,{class:"py-2"},{default:p(()=>[c(w,null,{header:p(()=>[ye]),default:p(()=>[e("div",null,[e("p",null,[we,u(" #"+o(t(s).id),1)]),ke,e("p",null,[je,u(" "+o(t(s).motivo.problem),1)])])]),_:1}),c(w,null,{header:p(()=>[Me]),default:p(()=>[e("div",null,[e("p",null,[Te,u(" "+o(t(s).comprador.first_name)+" "+o(t(s).comprador.last_name),1)]),e("p",null,[Ce,u(" "+o(t(s).comprador.nickname),1)])])]),_:1})]),_:1}),e("div",Ie,[Re,(l(!0),n(h,null,x(t(s).compra,a=>(l(),n("div",Se,[e("img",{src:a.producto.thumbnail,class:"w-10 h-10 object-cover rounded"},null,8,Ve),e("div",Fe,[e("a",{target:"_blank",href:a.producto.permalink},[e("p",Be,o(a.producto.title),1)],8,Le),a.color?(l(),n("p",De,"Color "+o(a.color),1)):_("",!0),e("p",Ee,"SKU: "+o(a.seller_sku),1),e("p",Ne,o(a.cantidad)+" × $"+o(a.precio),1)])]))),256))]),e("div",Oe,[$e,e("div",ze,[c(P,{"app-id":t(f),onAddTexto:R,tipo:"reclamo"},null,8,["app-id"])])])])])])]),_:1},8,["pagina"])],64)}}};export{wt as default};
