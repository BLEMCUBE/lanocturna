import{r as C,o as J,R as w,S as Q,f as y,g as x,W as t,E as d,Y as n,j as a,D as R,C as S,T as B,u as h,U as F,y as M,F as X,ad as P,ae as ee}from"./@vue-BLfC86mR.js";import{_ as te}from"./AppLayout-BSm2L3NG.js";import{K as T,T as V,Z as oe,O as A}from"./@inertiajs-CMyvZJ1U.js";import{S as U}from"./sweetalert2-DhUVDY3P.js";import se from"./CambiarProductosDepositoModal-aSYGzpOM.js";import{aH as ae,aI as H}from"./primevue-DAb-R_om.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";const D=g=>(P("data-v-fbfb60ac"),g=g(),ee(),g),re={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},ne={class:"align-middle"},de={class:"flex justify-content-end text-base text-primary-900"},ie={class:"flex justify-center items-center mx-2"},ce={key:0,class:"w-8 h-8 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},ue=["href"],pe=D(()=>a("i",{class:"fas fa-file-excel text-white"},null,-1)),me=[pe],be={key:1,class:"w-8 h-8"},xe=D(()=>a("i",{class:"fas fa-trash-alt w-6 h-4"},null,-1)),fe={class:"px-1"},he={class:"flex justify-content-end text-base bg-sky-300 px-5 py-2"},ge={key:0},ve=D(()=>a("i",{class:"fas fa-trash-alt w-6 h-4"},null,-1)),Ce=["src"],E="Depósitos",_="depositos",we={__name:"Index",setup(g){const{roles:I}=T().props.auth,{permissions:L}=T().props.auth,p=C([]),O=ae(),v=C(),f=C(!1),l=V({id:"",productos:[]}),N=V({id:""});J(()=>{v.value=T().props.depositos,p.value=null});const $=()=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminará definitivamente, tenga en cuenta que no podrá editar la importacion de bultos donde el producto este incluido.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(e=>{e.isConfirmed&&(f.value=!0,l.post(route(_+".destroyproductos"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,l.reset(),j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{A.get(route(_+".index"))},700)}}))})},q=o=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(m=>{m.isConfirmed&&(f.value=!0,N.id=o,N.post(route(_+".destroydepositolista"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,l.reset(),j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{A.get(route(_+".index"))},700)}}))})},z=o=>{var e=o.productos.map(i=>i.sku.toLowerCase()),m=o.productos.map(i=>i.nombre.toLowerCase());if(u.value.global.value!=null&&u.value.global.value!=""){const i=e.filter(b=>b.includes(u.value.global.value.toLowerCase())),r=m.filter(b=>b.includes(u.value.global.value.toLowerCase()));return[{"bg-orange-400":i.length>0||r.length>0}]}else return["bg-secondary-900/70"]},K=o=>{o&&l.reset()},W=()=>{p.value=null},Y=o=>{p.value=v.value.filter(e=>e.id==o.data.id),l.reset()},Z=o=>{p.value=null,l.reset()},G=()=>{p.value=v.value.filter(o=>o.id)},j=(o,e,m)=>{O.add({severity:o,summary:e,detail:m,life:3e3})},u=C({global:{value:null,matchMode:H.CONTAINS},productos:{value:null,matchMode:H.CONTAINS}});return(o,e)=>{const m=w("InputText"),i=w("Button"),r=w("Column"),b=w("DataTable"),k=Q("tooltip");return x(),y(X,null,[t(d(oe),{title:E}),t(te,{pagina:[{label:E,link:!1}]},{default:n(()=>[a("div",re,[a("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},R(E))]),a("div",ne,[t(b,{expandedRows:p.value,"onUpdate:expandedRows":e[5]||(e[5]=s=>p.value=s),size:"small",rowClass:z,onRowCollapse:Z,onRowExpand:Y,value:v.value,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,tableStyle:"min-width: 50rem",pt:{}},{header:n(()=>[a("div",de,[t(m,{modelValue:u.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"]),t(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:G}),t(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:W})])]),empty:n(()=>[S(" No existe Resultado ")]),loading:n(()=>[S(" Cargando... ")]),expansion:n(s=>[a("div",fe,[t(b,{value:s.data.productos,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,filters:u.value,"onUpdate:filters":e[3]||(e[3]=c=>u.value=c),selection:d(l).productos,"onUpdate:selection":e[4]||(e[4]=c=>d(l).productos=c),pt:{header:{class:"text-center pb-0 mb-0"},headerContent:{class:"bg-sky-300 pb-0 mb-0"}}},{header:n(()=>[a("div",he,[a("div",null,[t(se,{"origen-id":s.data.id,"origen-nombre":s.data.nombre,productos:d(l).productos,"onUpdate:valor":e[1]||(e[1]=c=>K(c)),"disabled-status":!d(l).productos||!d(l).productos.length},null,8,["origen-id","origen-nombre","productos","disabled-status"])]),f.value==!1?(x(),y("div",ge,[s.data.id==2?B((x(),F(i,{key:0,disabled:!d(l).productos||!d(l).productos.length,class:"w-auto rounded bg-red-700 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:e[2]||(e[2]=M(c=>$(),["prevent"]))},{default:n(()=>[ve]),_:1},8,["disabled"])),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):h("",!0)])):h("",!0)])]),default:n(()=>[t(r,{selectionMode:"multiple",headerStyle:"width: 3rem",pt:{headerCell:{class:"text-center bg-sky-300"},bodyCell:{class:"text-center"}}}),t(r,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),t(r,{header:"Imagen",select:"",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:n(c=>[a("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:c.data.imagen,alt:"image"},null,8,Ce)]),_:2},1024),t(r,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96"}}}),t(r,{field:"bultos",header:"Bultos",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(r,{field:"pcs_bulto",header:"Pcs por Bulto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(r,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}})]),_:2},1032,["value","filters","selection"])])]),default:n(()=>[t(r,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),t(r,{sortable:"",field:"nombre",header:"Depósito",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),t(r,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:" mx-2"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(s=>[S(R(s.data.productos.length),1)]),_:1}),t(r,{header:"",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:"mx-2 text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(s=>[a("div",ie,[d(L).includes("depositos-exportar")?B((x(),y("div",ce,[a("a",{href:o.route("depositos.exportar",s.data.id),target:"_blank",class:"py-auto p-2 text-xl"},me,8,ue)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):h("",!0),d(I).includes("Super Administrador")||d(I).includes("Administrador")?(x(),y("div",be,[s.data.id>2&&s.data.productos.length==0?B((x(),F(i,{key:0,class:"w-8 h-8 rounded bg-red-700 p-2 text-base font-normal text-white hover:bg-red-600",onClick:M(c=>q(s.data.id),["prevent"])},{default:n(()=>[xe]),_:2},1032,["onClick"])),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):h("",!0)])):h("",!0)])]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}},rt=le(we,[["__scopeId","data-v-fbfb60ac"]]);export{rt as default};
