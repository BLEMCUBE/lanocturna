import{r as p,o as H,R as v,f as g,g as c,W as s,E as o,Y as K,j as t,u as x,D as u,U as D,F as I,A as W,O as Y,x as Z,y as q,z as J}from"./@vue-BLfC86mR.js";import{_ as Q}from"./AppLayout-BSm2L3NG.js";import{K as _,T as X,Z as ee,O as U}from"./@inertiajs-CMyvZJ1U.js";import{aH as oe,h as E}from"./primevue-DAb-R_om.js";import{_ as m}from"./InputError-DdpGOVhM.js";import{_ as n}from"./InputLabel-CkCrW4zf.js";import{s as te}from"./@vueform-CFisUGo2.js";import{a as se}from"./axios-ngrFHoWO.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-DhUVDY3P.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const ae={class:"grid grid-cols-12 p-2 m-0 gap-2 mb-4 bg-white col-span-10 py-2 rounded-lg shadow-lg lg:col-span-10 2xl:col-span-8"},le={class:"mt-2 mb-4 col-span-12 lg:col-span-12"},re={key:0,class:"px-0 py-1 m-2 mt-0 bg-red-600 text-white col-span-full flex justify-center items-center"},de={class:"text-md font-medium"},ne={class:"grid grid-cols-12 gap-1 py-0"},ie={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ce={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},me={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},pe={class:"table-auto mx-2 border border-gray-300 col-span-12"},ue={class:"p-2 bg-secondary-900 border"},fe=t("th",{class:"border border-gray-300 w-24"},"Cantidad",-1),ge=t("th",{class:"border border-gray-300 w-24"},"Origen",-1),xe=t("th",{class:"border border-gray-300"},"Nombre",-1),_e={key:0,class:"border border-gray-300"},be={class:"font-sans text-center font-normal text-gray-800 border border-gray-300"},ye={class:"border border-gray-300 p-1"},ve={class:"border border-gray-300 p-1"},he={class:"border border-gray-300 p-1"},we={key:0,class:"border border-gray-300 p-1"},Ve={class:"col-span-12 mx-2 py-1 shadow-default 2xl:col-span-12"},ke=t("div",{class:"px-0 py-1 m-2 bg-primary-900 text-white col-span-full flex justify-center items-center"},[t("h5",{class:"text-lg font-medium uppercase"},"Datos")],-1),Se={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ce={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ne={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Oe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},De={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ie={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ue={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-12"},Ee={class:"flex justify-end py-3"},h="Subir Envio RMA",w="rmas",bo={__name:"RmaSubir",setup(Te){const T=oe(),{lista_destinos:V}=_().props,{lista_rmas:b}=_().props,{vendedor:y}=_().props,{vendedor_id:M}=_().props,R=r=>{V.find(a=>a.value===r),e.destino=r},e=X({vendedor_id:"",destino:"",total:0,total_sin_iva:0,tipo:"RMA",nro_compra:"",estado:"PENDIENTE DE VALIDACIÓN",observaciones:"",parametro:{rma:{},opt:{mueve_stock:"NO",producto_completo:"SI"}},productos:[],cliente:{nombre:"",telefono:"",localidad:"",direccion:""}}),j=r=>{r.value.code!=e.parametro.opt.mueve_stock&&(e.parametro.opt.mueve_stock=r.value.code)},L=r=>{r.value.code!=e.parametro.opt.producto_completo&&(e.parametro.opt.producto_completo=r.value.code)},k=p({name:"NO",code:"NO"}),S=p({name:"SI",code:"SI"}),A=p([{name:"SI",code:"SI"},{name:"NO",code:"NO"}]),P=p([{name:"SI",code:"SI"},{name:"NO",code:"NO"}]),C=p({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!1,options:[]});H(()=>{C.value.options=V,b.value=b,e.vendedor_id=M});const N=p({name:"",code:""}),z=r=>{r.value.code!=e.parametro.rma.id&&se.get(route(w+".showsubir",r.value.code)).then(a=>{var d=a.data.venta;e.parametro.rma=d,e.productos=[{producto_id:d.producto_id,nombre:d.prod_nombre,origen:d.prod_origen,cantidad:d.prod_cantidad,precio:null}],e.cliente={nombre:d.cliente,telefono:d.telefono,localidad:d.localidad,direccion:d.direccion}})},B=()=>{e.clearErrors(),e.post(route(w+".subir-store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{F("success","Mensaje","Creado"),setTimeout(()=>{U.get(route(w+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},F=(r,a,d)=>{T.add({severity:r,summary:a,detail:d,life:3e3})},$=()=>{U.get(route("rmas.index"))};return(r,a)=>{const d=v("Dropdown"),f=v("InputText"),G=v("Textarea");return c(),g(I,null,[s(o(ee),{title:h}),s(Q,{pagina:[{label:h,link:!1}]},{default:K(()=>[t("div",ae,[t("div",le,[o(e).errors.rma_existe?(c(),g("div",re,[t("h5",de,u(o(e).errors.rma_existe),1)])):x("",!0),t("div",{class:"px-0 py-1 m-2 mt-0 bg-primary-900 text-white col-span-full flex justify-center items-center"},[t("h5",{class:"text-2xl font-medium"},u(h))]),t("form",null,[t("div",ne,[t("div",ie,[s(n,{for:"estado",value:"Rma",class:"text-base font-medium leading-1 text-gray-900"}),s(d,{modelValue:N.value,"onUpdate:modelValue":a[0]||(a[0]=l=>N.value=l),id:"estado",onChange:z,filter:"",options:o(b),optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:l,state:O,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"])]),t("div",ce,[s(n,{for:"productoCompleto",value:"Producto Completo?",class:"text-base font-medium leading-1 text-gray-900"}),s(d,{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=l=>S.value=l),id:"productoCompleto",onChange:L,filter:"",options:P.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:l,state:O,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"])]),t("div",me,[s(n,{for:"stock",value:"Mueve Stock?",class:"text-base font-medium leading-1 text-gray-900"}),s(d,{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=l=>k.value=l),id:"stock",disabled:o(e).parametro.rma-r.stock==0,onChange:j,filter:"",options:A.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:l,state:O,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","disabled","options","pt"]),o(e).parametro.rma-r.stock==0?(c(),D(m,{key:0,class:"mt-1 text-xs",message:"No existe stock"})):x("",!0)]),t("table",pe,[t("thead",null,[t("tr",ue,[fe,ge,xe,o(e).parametro.rma.prod_serie?(c(),g("th",_e,"Serie")):x("",!0)])]),t("tbody",null,[t("tr",be,[t("td",ye,u(o(e).parametro.rma.prod_cantidad),1),t("td",ve,u(o(e).parametro.rma.prod_origen),1),t("td",he,u(o(e).parametro.rma.prod_nombre),1),o(e).parametro.rma.prod_serie?(c(),g("td",we,u(o(e).parametro.rma.prod_serie),1)):x("",!0)])])]),t("div",Ve,[s(m,{class:"mt-1 text-lg w-full",message:o(e).errors.productos},null,8,["message"]),(c(!0),g(I,null,W(o(e).errors.campos_productos,l=>(c(),D(m,{class:"mt-1 mb-0 text-lg",message:l},null,8,["message"]))),256))]),ke,t("div",Se,[s(n,{for:"vendedor",value:"Vendedor",class:"text-base font-medium leading-1 text-gray-900"}),s(f,{type:"text",id:"vendedor",modelValue:o(y),"onUpdate:modelValue":a[3]||(a[3]=l=>Y(y)?y.value=l:null),readonly:"",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(m,{class:"mt-1 text-xs",message:o(e).errors.vendedor_id},null,8,["message"])]),t("div",Ce,[s(n,{for:"destino",value:"Destino",class:"text-base font-medium leading-1 text-gray-900"}),s(o(te),Z({id:"rol",modelValue:o(e).destino,"onUpdate:modelValue":a[4]||(a[4]=l=>o(e).destino=l)},C.value,{onSelect:R}),null,16,["modelValue"]),s(m,{class:"mt-1 text-xs",message:o(e).errors.destino},null,8,["message"])]),t("div",Ne,[s(n,{for:"cliente",value:"Cliente",class:"text-base font-medium leading-6 text-gray-900"}),s(f,{type:"text",id:"cliente",readonly:"",modelValue:o(e).cliente.nombre,"onUpdate:modelValue":a[5]||(a[5]=l=>o(e).cliente.nombre=l),placeholder:"ingrese nombre cliente",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(m,{class:"mt-1 text-xs",message:o(e).errors["cliente.nombre"]},null,8,["message"])]),t("div",Oe,[s(n,{for:"telefono",value:"Telefono",class:"text-base font-medium leading-6 text-gray-900"}),s(f,{type:"text",id:"telefono",readonly:"",modelValue:o(e).cliente.telefono,"onUpdate:modelValue":a[6]||(a[6]=l=>o(e).cliente.telefono=l),placeholder:"ingrese telefono",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"])]),t("div",De,[s(n,{for:"localidad",value:"Localidad",class:"text-base font-medium leading-6 text-gray-900"}),s(f,{type:"text",id:"localidad",modelValue:o(e).cliente.localidad,"onUpdate:modelValue":a[7]||(a[7]=l=>o(e).cliente.localidad=l),placeholder:"ingrese localidad",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"])]),t("div",Ie,[s(n,{for:"direccion",value:"Dirección",class:"text-base font-medium leading-6 text-gray-900"}),s(f,{type:"text",id:"direccion",modelValue:o(e).cliente.direccion,"onUpdate:modelValue":a[8]||(a[8]=l=>o(e).cliente.direccion=l),placeholder:"ingrese direccion",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(m,{class:"mt-1 text-xs",message:o(e).errors["cliente.direccion"]},null,8,["message"])]),t("div",Ue,[s(n,{for:"rut",value:"Observaciones:",class:"text-base font-medium leading-6 text-gray-900"}),s(G,{modelValue:o(e).observaciones,"onUpdate:modelValue":a[9]||(a[9]=l=>o(e).observaciones=l),pt:{root:{rows:"1",class:"w-full"}}},null,8,["modelValue"])])]),t("div",Ee,[s(o(E),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:$,type:"button"}),s(o(E),{label:"Guardar",size:"small",type:"button",class:J({"opacity-50":o(e).processing}),disabled:o(e).processing,onClick:q(B,["prevent"])},null,8,["class","disabled","onClick"])])])])])]),_:1},8,["pagina"])],64)}}};export{bo as default};
