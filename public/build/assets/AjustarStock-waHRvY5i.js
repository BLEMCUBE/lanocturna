import{r,o as D,R as M,f as u,g as f,W as l,E as i,Y as n,j as e,D as v,y as N,z as E,u as $,F as y,A as B}from"./@vue-BLfC86mR.js";import{_ as I}from"./AppLayout-BSm2L3NG.js";import{T as L,Z as T,O as V}from"./@inertiajs-CMyvZJ1U.js";import{aH as O,h as x}from"./primevue-DAb-R_om.js";import{_ as P}from"./InputError-DdpGOVhM.js";import{_ as U}from"./InputLabel-CkCrW4zf.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-DhUVDY3P.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const H={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-8"},R={class:"grid grid-cols-12 gap-4 py-3"},W={class:"col-span-7 sm:col-span-12 md:col-span-6 shadow-default lg:col-span-5 2xl:col-span-6 mx-2"},Y=["disabled"],Z={class:"col-span-3 font-medium sm:col-span-6 shadow-default xl:col-span-3 2xl:col-span-3 flex h-auto items-end justify-center"},q={class:"h-8"},G={class:"col-span-3 shadow-default xl:col-span-3 flex h-auto items-end 2xl:col-span-2 justify-center"},J={class:"h-8"},K={key:0},Q=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos no estan registrado , por favor registre y vuelva a intentar. ",-1),X={class:"w-full border"},ee=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),te={class:"w-full text-center border"},se={class:"text-center border"},oe={class:"text-center border"},le=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ae={class:"flex justify-end py-3"},ie={class:"mb-2 mt-0 font-semibold text-center text-md"},re=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ne={class:"flex justify-end py-3"},b="Ajuste Stock",k="productos",Ye={__name:"AjustarStock",setup(ce){const w=O(),_=r(!1),c=r(null),o=L({archivo:""}),d=r(!1),p=r(!1),h=r(),g=r();D(()=>{});const j=(t,s,m)=>{w.add({severity:t,summary:s,detail:m,life:3e3})},C=t=>{t.preventDefault(),o.archivo=t.target.files[0]},S=()=>{c.value.value=null,o.reset("archivo"),d.value=!1},A=()=>{c.value.value=null,o.reset("archivo"),p.value=!1},F=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},z=()=>{_.value=!0,o.clearErrors(),o.post(route(k+".importarstock"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{_.value=!1,j("success","Mensaje","Stock Ajustado"),setTimeout(()=>{V.get(route(k+".ajuste-stock"))},1e3)},onFinish:()=>{},onError:t=>{_.value=!1,c.value.value=null,o.reset("archivo"),t.filas!=null?t.filas.length>0&&(h.value=t.filas,d.value=!0):t.error_sku!=null&&t.error_sku.length>0&&(g.value=t.error_sku,p.value=!0)}})};return(t,s)=>{const m=M("Dialog");return f(),u(y,null,[l(i(T),{title:b}),l(I,{pagina:[{label:b,link:!1}]},{default:n(()=>[e("div",H,[e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},v(b))]),e("div",R,[e("div",W,[l(U,{for:"file_input1",value:"Importar excel",class:"block text-base font-semibold leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:c,onInput:C,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:i(o).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,Y),l(P,{class:"mt-1 text-xs",message:i(o).errors.archivo},null,8,["message"])]),e("div",Z,[e("div",q,[l(i(x),{label:"Importar",type:"button",class:E(["text-normal font-medium",{"opacity-50":i(o).processing}]),disabled:i(o).processing,onClick:N(z,["prevent"])},null,8,["class","disabled","onClick"])])]),e("div",G,[e("div",J,[l(i(x),{label:"Descargar formato",size:"md",severity:"success",type:"button",class:"p-1 text-xs font-medium ring-0",onClick:s[0]||(s[0]=a=>F("importar_stock_productos.xlsx"))})])])])]),l(m,{visible:d.value,"onUpdate:visible":s[2]||(s[2]=a=>d.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[le]),default:n(()=>[h.value.length>0?(f(),u("div",K,[Q,e("table",X,[ee,e("tbody",null,[(f(!0),u(y,null,B(h.value,a=>(f(),u("tr",te,[e("td",se,v(a.fila),1),e("td",oe,v(a.sku),1)]))),256))])])])):$("",!0),e("div",ae,[l(i(x),{label:"Aceptar",size:"small",type:"button",onClick:s[1]||(s[1]=a=>S())})])]),_:1},8,["visible"]),l(m,{visible:p.value,"onUpdate:visible":s[4]||(s[4]=a=>p.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[re]),default:n(()=>[e("div",null,[e("p",ie,v(g.value),1)]),e("div",ne,[l(i(x),{label:"Aceptar",size:"small",type:"button",onClick:s[3]||(s[3]=a=>A())})])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}};export{Ye as default};
