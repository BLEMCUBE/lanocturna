import{o as D,c as E,R as k,f as l,g as n,W as c,E as t,Y as p,j as e,D as o,u as m,F as u,A as x,z as g,C as h,y as F,T as L,a5 as z}from"./@vue-BLfC86mR.js";import{_ as B}from"./AppLayout-uReGjGr-.js";import{K as j,T as N,Z as A,O}from"./@inertiajs-CMyvZJ1U.js";import $ from"./ModalRepuestaRapidas-BJztC2cv.js";import{u as H}from"./customToast-BYTpZDIn.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-DhUVDY3P.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./primevue-DAb-R_om.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";const P={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},U={class:"w-2/3 flex justify-between"},K={class:"px-5 pb-2"},W=e("h5",{class:"text-2xl font-medium"},"Reclamo: ",-1),Y={class:"text-lg font-medium"},Z={class:"h-8 p-2 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},q=["href"],G={class:"grid grid-cols-12 gap-6"},J={class:"col-span-8"},Q={class:"bg-white rounded-xl shadow p-6"},X={class:"w-full max-h-screen flex flex-col"},ee={class:"flex-1 overflow-y-auto p-4 space-y-2"},te={class:"text-center text-gray-500 text-xs"},se={class:"space-y-2"},oe=["innerHTML"],re={key:0,class:"w-auto text-xs"},ae=["href"],le=e("i",{class:"fa fa-paperclip"},null,-1),ne={class:"ml-1",style:{"font-size":"12px"}},ie={class:"flex items-center justify-end gap-1 mt-1"},de={class:"text-[12px] text-gray-500"},ce={key:0,class:"cursor-pointer text-gray-500 hover:text-gray-700"},pe=e("i",{class:"fa-solid fa-paperclip fa-xl"},null,-1),me=["readOnly"],_e={key:1,class:"flex justify-end"},ue=["disabled"],he={key:0,class:"text-red-500"},fe={key:1,class:"text-red-500"},xe={class:"col-span-4"},ge=e("div",{class:"flex align-items-center gap-2"},[e("span",{class:"font-bold white-space-nowrap"},"Reclamo")],-1),be=e("p",null,[e("b",null,"Tipo: "),h(" Reclamo ")],-1),ve=e("b",null,"Motivo: ",-1),ye=e("div",{class:"flex align-items-center gap-2"},[e("span",{class:"font-bold white-space-nowrap"},"Comprador")],-1),we=e("b",null,"Nombre: ",-1),ke=e("b",null,"Usuario: ",-1),je={class:"bg-white rounded-xl shadow p-5 mb-5"},Te=e("div",{class:"text-lg font-semibold pb-2"}," Compra ",-1),Me={class:"flex gap-3 items-center"},Ce=["src"],Re={class:"text-sm text-gray-700"},Ie=["href"],Se={class:"font-medium"},Ve={key:0,class:"text-gray-600"},De={class:"text-gray-500 text-xs"},Ee={class:"font-semibold mt-1"},Fe={class:"bg-white rounded-xl shadow p-5 overflow-y-auto"},Le=e("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),ze={class:"hidden sm:block flex-wrap gap-2 mb-4"},Be="Reclamos Mensajes",b="mercadolibre.reclamos",wt={__name:"ReclamosDetalle",setup(Ne){const{setShow:v}=H(),{datos:r}=j().props,{client_id:f}=j().props,s=N({reclamoId:null,sellerId:null,clientId:null,buyerId:null,text:"",files:[]}),T=i=>{s.files=Array.from(i.target.files)},M=()=>{if(s.text.length===0){v("error","Error","Por favor ingresá un Mensaje.");return}s.clearErrors(),s.post(route(b+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{v("success","Mensaje","Mensaje enviado"),setTimeout(()=>{O.get(route(b+".index",{client_id:f}))},500)},onFinish:()=>{},onError:()=>{}})};D(()=>{s.reclamoId=r.id,s.sellerId=r.comprador.seller,s.buyerId=r.comprador.id,s.clientId=f});const C=i=>{s.text=i.respuesta},R=i=>(i/1024/1024).toFixed(2),I=i=>new Date(i.replace(" ","T")).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase().replace(/\./g,"").replace(/\s+/g,""),S=E(()=>r.mensajes);return(i,_)=>{const y=k("TabPanel"),V=k("TabView");return n(),l(u,null,[c(t(A),{title:"Mercado Libre-Mensajes"}),c(B,{pagina:[{label:Be,link:!1}]},{default:p(()=>[e("div",P,[e("div",U,[e("div",K,[W,e("p",Y,"#"+o(t(r).id),1),e("p",null,o(t(r).date_created),1)]),e("span",Z,[e("a",{href:"https://www.mercadolibre.com.uy/ventas/"+t(r).orden_id+"/detalle",target:"_blank",class:"py-auto"},"Ver ficha de venta",8,q)])]),e("div",G,[e("div",J,[e("div",Q,[e("div",X,[e("div",ee,[(n(!0),l(u,null,x(S.value,(a,w)=>(n(),l(u,{key:w},[e("div",te,o(w),1),e("div",se,[(n(!0),l(u,null,x(a,d=>(n(),l("div",{key:d.raw.id,class:g(["flex",d.sender_role=="complainant"?"justify-start":"justify-end"])},[e("div",{class:g(["p-2 rounded-xl max-w-lg shadow-md",d.sender_role=="complainant"?" bg-white text-gray-800":"bg-blue-100  text-gray-800"])},[e("p",{class:"text-xs",innerHTML:d.raw.message},null,8,oe),d.attachment_path!==null?(n(),l("div",re,[e("a",{class:"text-blue-700",href:i.route(b+".descargarAdjunto",{filename:d.raw.attachments[0].filename,original_filename:d.raw.attachments[0].original_filename,client_id:t(f),reclamo_id:t(r).id}),target:"_blank"},[le,h(" "+o(d.raw.attachments[0].original_filename),1)],8,ae),e("span",ne,"("+o(R(d.raw.attachments[0].size))+"MB)",1)])):m("",!0),e("div",ie,[e("span",de,o(I(d.fecha)),1)])],2)],2))),128))])],64))),128))]),e("form",{class:"border-t p-4 bg-white flex items-center gap-3",onSubmit:_[1]||(_[1]=F(a=>M(),["prevent"]))},[t(r).estado!=="closed"?(n(),l("label",ce,[pe,e("input",{type:"file",multiple:"",class:"hidden",onChange:T},null,32)])):m("",!0),L(e("textarea",{rows:"1",maxlength:"340","onUpdate:modelValue":_[0]||(_[0]=a=>t(s).text=a),readOnly:t(r).estado==="closed",placeholder:"Ingresá tu mensaje...",class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,8,me),[[z,t(s).text]]),t(r).estado!=="closed"?(n(),l("div",_e,[e("button",{type:"submit",class:g(["bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700",{"opacity-50":t(s).processing}]),disabled:t(s).processing}," Enviar ",10,ue)])):m("",!0)],32),t(s).errors.text?(n(),l("div",he,o(t(s).errors.text),1)):m("",!0),t(s).errors["files.0"]?(n(),l("div",fe,o(t(s).errors["files.0"]),1)):m("",!0)])])]),e("div",xe,[c(V,{class:"py-2"},{default:p(()=>[c(y,null,{header:p(()=>[ge]),default:p(()=>[e("div",null,[be,e("p",null,[ve,h(" "+o(t(r).motivo),1)])])]),_:1}),c(y,null,{header:p(()=>[ye]),default:p(()=>[e("div",null,[e("p",null,[we,h(" "+o(t(r).comprador.first_name)+" "+o(t(r).comprador.last_name),1)]),e("p",null,[ke,h(" "+o(t(r).comprador.nickname),1)])])]),_:1})]),_:1}),e("div",je,[Te,(n(!0),l(u,null,x(t(r).compra,a=>(n(),l("div",Me,[e("img",{src:a.producto.thumbnail,class:"w-10 h-10 object-cover rounded"},null,8,Ce),e("div",Re,[e("a",{target:"_blank",href:a.producto.permalink},[e("p",Se,o(a.producto.title),1)],8,Ie),a.color?(n(),l("p",Ve,"Color "+o(a.color),1)):m("",!0),e("p",De,"SKU: "+o(a.seller_sku),1),e("p",Ee,o(a.cantidad)+" × $"+o(a.precio),1)])]))),256))]),e("div",Fe,[Le,e("div",ze,[c($,{onAddTexto:C,tipo:"reclamo"})])])])])])]),_:1},8,["pagina"])],64)}}};export{wt as default};
