import{r as f,o as j,R as m,S as X,f as _,g as v,W as a,E as o,Y as d,j as t,D as h,y as E,T as x,u as ee,x as te,a5 as y,a4 as oe,F as z,A as se,z as ae,C as $,ad as le,ae as re}from"./@vue-BLfC86mR.js";import{_ as ne}from"./AppLayout-uReGjGr-.js";import{K as I,T as ie,Z as de,O as F}from"./@inertiajs-CMyvZJ1U.js";import{aH as ce,h as S}from"./primevue-DAb-R_om.js";import{_ as c}from"./InputError-DdpGOVhM.js";import{_ as i}from"./InputLabel-CkCrW4zf.js";import{s as pe}from"./@vueform-CFisUGo2.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-DhUVDY3P.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const k=g=>(le("data-v-1a5f4777"),g=g(),re(),g),me={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},xe={class:"align-middle"},ge=["onSubmit"],be={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},fe={class:"col-span-12 shadow-default xl:col-span-3"},_e={class:"col-span-12 shadow-default xl:col-span-5"},ve={class:"col-span-12 shadow-default xl:col-span-4"},he={class:"col-span-12 shadow-default xl:col-span-3"},ye={class:"col-span-12 shadow-default xl:col-span-3"},we={class:"col-span-12 shadow-default xl:col-span-3"},ke={class:"col-span-12 shadow-default xl:col-span-3"},Ce={class:"col-span-12 shadow-default xl:col-span-3"},Ve={class:"col-span-12 shadow-default xl:col-span-6"},Te=k(()=>t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),Ie={class:"col-span-12 shadow-default xl:col-span-3"},Se={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-12"},Ue=k(()=>t("div",{class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},[t("div",{class:"bg-gray-200 w-full text-start"},[t("h3",{class:"font-semibold text-gray-800 text-lg px-5"},"ATRIBUTOS: ")])],-1)),Ae={class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},De={class:"flex justify-start col-span-12 w-full flex-col md:flex-row py-1 px-5"},Re={class:"flex items-center w-full md:w-1/3 xl:w-1/3 mr-2"},je={class:"font-semibold text-gray-800 text-base"},Ee={class:"font-normal text-gray-800 text-base px-3"},ze={class:"rounded-md p-1 flex justify-center items-center bg-red-600 py-auto text-base font-semibold text-white hover:bg-red-700"},$e=["onClick"],Fe=k(()=>t("i",{class:"fas fa-trash"},null,-1)),Me=[Fe],Ne={class:"flex justify-end pt-2"},Oe={class:"card flex w-full"},Be={class:"px-1"},Pe={class:"flex justify-between items-center mx-2 w-1/2"},He={class:"mx-3"},qe={class:"px-5 text-end"},Le=["onClick","disabled"],We=k(()=>t("i",{class:"fas fa-plus"},null,-1)),Ge=[We],U="Agregar Producto",w="productos",Ke={__name:"Create",setup(g){const A=f("/images/productos/sin_foto.png"),M=ce(),{lista_atributos:N}=I().props,{lista_valores:O}=I().props,C=f([]),b=f(!1),e=ie({origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,precio:0,stock_minimo:0,stock_futuro:0,observaciones:"",imagen:"",photo:"",categorias:[],atributos:[]}),B=r=>{e.stock_futuro=r},D=f({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});j(()=>{D.value.options=I().props.lista_categorias});const P=()=>{e.clearErrors(),e.post(route(w+".store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{H("success","Mensaje","Producto creado"),setTimeout(()=>{F.get(route(w+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},H=(r,s,n)=>{M.add({severity:r,summary:s,detail:n,life:3e3})},q=()=>{F.get(route(w+".index"))},L=r=>{r.preventDefault(),e.photo=r.target.files[0];let s=r.target.files;if(s&&s[0]){let n=new FileReader;n.onload=p=>{A.value=p.target.result},n.readAsDataURL(s[0])}},W=r=>{},G=r=>{},K=r=>{if(e.atributos.length>0){const n=e.atributos.findIndex(p=>p.atributo_id===r.atributo_id);n!==-1&&e.atributos.splice(n,1)}var s=O.find(n=>n.id===r.id);e.atributos.push({id:s.id,valor:s.valor,nombre:s.nombre,atributo_id:s.atributo_id,producto_id:e.id}),b.value=!1},Y=r=>{e.atributos.splice(r,1)},Z=()=>{b.value=!0};return j(()=>{C.value=null}),(r,s)=>{const n=m("InputText"),p=m("Textarea"),V=m("Column"),R=m("DataTable"),J=m("Dialog"),Q=X("tooltip");return v(),_(z,null,[a(o(de),{title:U}),a(ne,{pagina:[{label:"Productos",link:!0,url:r.route(w+".index")},{label:U,link:!1}]},{default:d(()=>[t("div",me,[t("div",{class:"px-3 col-span-full flex justify-between items-center"},[t("h5",{class:"text-2xl font-medium"},h(U))]),t("div",xe,[t("form",{onSubmit:E(P,["prevent"])},[t("div",be,[t("div",fe,[a(i,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),a(n,{type:"text",id:"origen",modelValue:o(e).origen,"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).origen=l),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(c,{class:"mt-1 text-xs",message:o(e).errors.origen},null,8,["message"])]),t("div",_e,[a(i,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),a(n,{type:"text",id:"nombre",modelValue:o(e).nombre,"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).nombre=l),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(c,{class:"mt-1 text-xs",message:o(e).errors.nombre},null,8,["message"])]),t("div",ve,[a(i,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),a(o(pe),te({id:"categorias",modelValue:o(e).categorias,"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).categorias=l),class:"w-full"},D.value),null,16,["modelValue"])]),t("div",he,[a(i,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),a(n,{type:"text",id:"aduana",modelValue:o(e).aduana,"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).aduana=l),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(c,{class:"mt-1 text-xs",message:o(e).errors.aduana},null,8,["message"])]),t("div",ye,[a(i,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),a(n,{type:"text",id:"codigo_barra",modelValue:o(e).codigo_barra,"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).codigo_barra=l),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),a(c,{class:"mt-1 text-xs",message:o(e).errors.codigo_barra},null,8,["message"])]),t("div",we,[a(i,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),x(t("input",{type:"number",required:"","onUpdate:modelValue":s[5]||(s[5]=l=>o(e).stock=l),step:"1",min:"0","on:update:modelValue":s[6]||(s[6]=l=>B(l)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[y,o(e).stock]]),a(c,{class:"mt-1 text-xs",message:o(e).errors.stock},null,8,["message"])]),t("div",ke,[a(i,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),x(t("input",{type:"number",required:"","onUpdate:modelValue":s[7]||(s[7]=l=>o(e).stock_minimo=l),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[y,o(e).stock_minimo]]),a(c,{class:"mt-1 text-xs",message:o(e).errors.stock_minimo},null,8,["message"])]),t("div",Ce,[a(i,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),x(t("input",{type:"number",required:"","onUpdate:modelValue":s[8]||(s[8]=l=>o(e).precio=l),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[y,o(e).precio]]),a(c,{class:"mt-1 text-xs",message:o(e).errors.precio},null,8,["message"])]),x(t("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":s[9]||(s[9]=l=>o(e).stock_futuro=l)},null,512),[[y,o(e).stock_futuro]]),t("div",Ve,[a(i,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),t("input",{onInput:L,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),Te,a(c,{class:"mt-1 text-xs",message:o(e).errors.imagen},null,8,["message"])]),t("div",Ie,[t("div",{class:"imagePreviewWrapper",style:oe({"background-image":`url(${A.value})`})},null,4)]),t("div",Se,[a(i,{for:"observacion",value:"Observaciones:",class:"text-base font-medium leading-6 text-gray-900"}),a(p,{modelValue:o(e).observaciones,"onUpdate:modelValue":s[10]||(s[10]=l=>o(e).observaciones=l),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"])]),Ue,t("div",Ae,[a(o(S),{size:"small",onClick:Z,type:"button",label:"Agregar Atributo",severity:"success"})]),o(e).atributos.length>0?(v(!0),_(z,{key:0},se(o(e).atributos,(l,u)=>(v(),_("div",De,[t("div",Re,[t("h3",je,h(l.nombre)+": ",1),t("h3",Ee,h(l.valor),1),t("div",ze,[x((v(),_("button",{type:"button",onClick:E(T=>Y(u),["prevent"]),class:"w-6"},Me,8,$e)),[[Q,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 m-0 text-xs text-white rounded"}},void 0,{top:!0}]])])])]))),256)):ee("",!0)]),t("div",Ne,[a(o(S),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:q,type:"button"}),a(o(S),{label:"Guardar",size:"small",type:"submit",class:ae({"opacity-50":o(e).processing}),disabled:o(e).processing},null,8,["class","disabled"])])],40,ge)])]),a(J,{visible:b.value,"onUpdate:visible":s[12]||(s[12]=l=>b.value=l),modal:"",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 flex justify-around text-end"},content:{class:"p-4 lg:p-4"}}},{default:d(()=>[t("div",Oe,[a(R,{expandedRows:C.value,"onUpdate:expandedRows":s[11]||(s[11]=l=>C.value=l),size:"small",onRowCollapse:G,onRowExpand:W,value:o(N).data,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,pt:{root:{class:"w-full"}}},{empty:d(()=>[$(" No existe Resultado ")]),loading:d(()=>[$(" Cargando... ")]),expansion:d(l=>[t("div",Be,[a(R,{value:l.data.valores,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,pt:{header:{class:"text-center pb-0 mb-0 text-start"},headerContent:{class:"bg-white pb-0 mb-0 text-start"}}},{default:d(()=>[a(V,{pt:{bodyCell:{class:"text-start p-0 m-0"},headerCell:{class:"bg-white p-0 m-0"},headerContent:{class:"text-start stickyToTopTableHeaders"},bodyCellContent:{class:"text-start"}}},{body:d(u=>[t("div",Pe,[t("div",He,h(u.data.valor),1),t("div",qe,[t("button",{onClick:T=>K(u.data),class:"bg-green-500 disabled:bg-gray-800 disabled:text-white hover:bg-green-600 text-white rounded px-2 py-1.5",disabled:o(e).atributos.filter(T=>T.id===u.data.id).length>0},Ge,8,Le)])])]),_:2},1024)]),_:2},1032,["value"])])]),default:d(()=>[a(V,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-start"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),a(V,{sortable:"",field:"nombre",header:"Atributos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-start"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}})]),_:1},8,["expandedRows","value"])])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}},jt=ue(Ke,[["__scopeId","data-v-1a5f4777"]]);export{jt as default};
