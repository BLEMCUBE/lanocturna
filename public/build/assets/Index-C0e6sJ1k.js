import{r as g,w as H,o as K,M as L,N as B,e as m,f as p,Q as c,ab as a,S as Q,i as e,y as h,O as x,ag as R,G as V,l as Z,F as D,u as J,q as W,j as E,p as $}from"./@vue-BG0wrCoO.js";import{_ as X}from"./AppLayout-DGXGhT07.js";import{K as w,T as O,O as _,Z as Y}from"./@inertiajs-BPLxF6VH.js";import{S as ee}from"./sweetalert2-DhUVDY3P.js";import{aH as te,h as oe}from"./primevue-DlS7f910.js";import{s as re}from"./@vueform-CSVNwuWD.js";import{_ as se}from"./Pagination-uFg9EnNQ.js";import ae from"./CrearMasivoModal-W6pJXY21.js";import"./logo-C8Jea0Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./InputError-cOM6HFrc.js";import"./InputLabel-BIVuqiPx.js";const ie={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},le={class:"px-3 pb-2 col-span-full flex justify-end items-center"},ne=e("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),ce={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},de=["href"],ue=e("i",{class:"fas fa-file-excel text-white"},null,-1),me=[ue],pe={class:"align-middle py-4"},he={class:"grid grid-cols-12 gap-4 m-3"},fe={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ge={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},xe={style:{overflow:"auto","max-height":"700px"}},_e={class:"w-full text-md bg-white shadow-md rounded mb-4"},be=e("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[e("tr",{class:"bg-secondary-100"},[e("th",{class:"p-1.5"},"Stock"),e("th",null,"Stock futuro"),e("th",{class:"p-2"},"Imagen"),e("th",null,"Origen"),e("th",null,"Nombre"),e("th",null,"Categoria"),e("th",null,"Acciones")])],-1),ve=["onClick"],we=["onClick"],ye=["onClick"],ke=["src"],Ce=["onClick"],Se=["onClick"],Fe=["onClick"],je={class:"flex justify-end"},Be=["onClick"],Ve=e("i",{class:"fa-regular fa-copy"},null,-1),De=[Ve],Ee=["onClick"],$e=e("i",{class:"fas fa-trash-alt"},null,-1),Oe=[$e],y="Productos",i="productos",xt={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(b){const k=b,T=te(),M=g(),v=g(!1),{permissions:C}=w().props.auth,N=O({id:""});let l=g([k.filtro.categoria]),d=g(k.filtro.buscar);const I=()=>{_.get(route(i+".index"),{buscar:d.value,categoria:l.value},{preserveState:!0,replace:!0})},S=O({id:""});H(l,o=>{_.get(route(i+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const P=(o,r,n)=>{if(parseFloat(o)<=parseFloat(r)&&parseFloat(o)==parseFloat(n))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(r)&&parseFloat(n)>parseFloat(o))return"bg-orange-500 text-black"},z=o=>{_.get(route(i+".show",o))},U=o=>{S.clearErrors(),S.post(route(i+".duplicar",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{j("success","Mensaje","Producto Duplicado")},onFinish:()=>{},onError:()=>{}})},q=(o,r)=>{ee.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+r,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(f=>{f.isConfirmed&&N.delete(route(i+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{_.get(route(i+".index"))},1e3)}})})},F=g({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});K(()=>{M.value=w().props.productos.data,F.value.options=w().props.lista_categorias});const j=(o,r,n)=>{T.add({severity:o,summary:r,detail:n,life:3e3})},A=()=>{_.get(route(i+".create"))},u=o=>{z(o)};return(o,r)=>{const n=L("InputText"),f=B("tooltip"),G=B("debounce");return p(),m(D,null,[c(a(Y),{title:y}),c(X,{pagina:[{label:y,link:!1}]},{default:Q(()=>[e("div",ie,[e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},h(y))]),e("div",le,[x(e("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t)},null,512),[[R,v.value]]),ne,c(ae),x((p(),m("div",ce,[e("a",{href:o.route(i+".exportar",{categoria:a(l),foto:v.value}),target:"_blank",class:"py-auto"},me,8,de)])),[[f,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),c(a(oe),{size:"small",label:"Crear Producto",severity:"success",onClick:A})]),e("div",pe,[e("div",he,[e("div",fe,[x(c(n,{"debounce-events":["keyup"],class:"w-full",modelValue:a(d),"onUpdate:modelValue":r[1]||(r[1]=t=>V(d)?d.value=t:d=t),placeholder:"Buscar"},null,8,["modelValue"]),[[G,I,"500ms"]])]),e("div",ge,[c(a(re),Z({id:"categorias",modelValue:a(l),"onUpdate:modelValue":r[2]||(r[2]=t=>V(l)?l.value=t:l=t),class:"w-full"},F.value),null,16,["modelValue"])])]),e("div",xe,[e("table",_e,[be,e("tbody",null,[(p(!0),m(D,null,J(b.productos.data,t=>(p(),m("tr",{class:W(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",P(t.stock,t.stock_minimo,t.stock_futuro)])},[e("td",{onClick:s=>u(t.id)},h(t.stock??""),9,ve),e("td",{onClick:s=>u(t.id)},h(t.stock_futuro),9,we),e("td",{onClick:s=>u(t.id)},[e("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:t.imagen,alt:"image"},null,8,ke)],8,ye),e("td",{onClick:s=>u(t.id)},h(t.origen),9,Ce),e("td",{onClick:s=>u(t.id)},h(t.nombre),9,Se),e("td",{onClick:s=>u(t.id)},h(t.categorias.map(s=>s.name).join(",")),9,Fe),e("td",null,[e("div",je,[e("div",null,[a(C).includes("productos-eliminar")?x((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-green-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-green-600",onClick:$(s=>U(t.id),["prevent"])},De,8,Be)),[[f,{value:"Duplicar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):E("",!0)]),e("div",null,[a(C).includes("productos-eliminar")?x((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:$(s=>q(t.id,t.nombre),["prevent"])},Oe,8,Ee)),[[f,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):E("",!0)])])])],2))),256))])])]),c(se,{elements:b.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{xt as default};
