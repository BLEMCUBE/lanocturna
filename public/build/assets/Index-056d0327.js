import{r as _,w as y,o as z,O as S,P as q,g as p,S as a,E as n,V as A,F as B,f as h,j as t,A as m,Q as F,K as V,q as K,v as M,u as U,t as G,n as L}from"./@vue-1043e4d5.js";import{_ as Q}from"./AppLayout-50b5d09a.js";import{K as b,T as R,Z,O as f}from"./@inertiajs-ab1bf9dd.js";import{S as H}from"./sweetalert2-c47eda61.js";import{aG as J,h as W}from"./primevue-232ee6f7.js";import{s as X}from"./@vueform-21ff8afc.js";import{_ as Y}from"./Pagination-e120bd15.js";import tt from"./CrearMasivoModal-d81651ec.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./InputError-933cc936.js";import"./InputLabel-bc304214.js";const et={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},ot={class:"px-3 pb-2 col-span-full flex justify-end items-center"},st={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},rt=["href"],at=t("i",{class:"fas fa-file-excel text-white"},null,-1),it=[at],lt={class:"align-middle py-4"},nt={class:"grid grid-cols-12 gap-4 m-3"},ct={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},dt={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},ut={style:{overflow:"auto","max-height":"700px"}},mt={class:"w-full text-md bg-white shadow-md rounded mb-4"},pt=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"Stock"),t("th",null,"Stock futuro"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Origen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Acciones")])],-1),ht=["onClick"],ft=["onClick"],_t=["onClick"],gt=["src"],xt=["onClick"],bt=["onClick"],vt=["onClick"],wt=["onClick"],Ct=t("i",{class:"fas fa-trash-alt"},null,-1),kt=[Ct],v="Productos",c="productos",te={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(g){const w=g,j=J(),T=_(),{permissions:$}=b().props.auth,E=R({id:""});let i=_([w.filtro.categoria]),d=_(w.filtro.buscar);y(d,o=>{f.get(route(c+".index"),{buscar:o,categoria:i.value},{preserveState:!0,replace:!0})}),y(i,o=>{f.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const D=(o,s,l)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(l))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(l)>parseFloat(o))return"bg-orange-500 text-black"},O=o=>{f.get(route(c+".show",o))},I=(o,s)=>{H.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(x=>{x.isConfirmed&&E.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{f.get(route(c+".index"))},1e3)}})})},C=_({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});z(()=>{T.value=b().props.productos.data,C.value.options=b().props.lista_categorias});const N=(o,s,l)=>{j.add({severity:o,summary:s,detail:l,life:3e3})},P=()=>{f.get(route(c+".create"))},u=o=>{O(o)};return(o,s)=>{const l=S("Toast"),x=S("InputText"),k=q("tooltip");return h(),p(B,null,[a(n(Z),{title:v}),a(Q,{pagina:[{label:v,link:!1}]},{default:A(()=>[t("div",et,[a(l),t("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[t("h5",{class:"text-2xl font-medium pr-5"},m(v))]),t("div",ot,[a(tt),F((h(),p("div",st,[t("a",{href:o.route(c+".exportar",{categoria:n(i)}),target:"_blank",class:"py-auto"},it,8,rt)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),a(n(W),{size:"small",label:"Crear Producto",severity:"success",onClick:P})]),t("div",lt,[t("div",nt,[t("div",ct,[a(x,{class:"w-full",modelValue:n(d),"onUpdate:modelValue":s[0]||(s[0]=e=>V(d)?d.value=e:d=e),placeholder:"Buscar"},null,8,["modelValue"])]),t("div",dt,[a(n(X),K({id:"categorias",modelValue:n(i),"onUpdate:modelValue":s[1]||(s[1]=e=>V(i)?i.value=e:i=e),class:"w-full"},C.value),null,16,["modelValue"])])]),t("div",ut,[t("table",mt,[pt,t("tbody",null,[(h(!0),p(B,null,M(g.productos.data,e=>(h(),p("tr",{class:U(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",D(e.stock,e.stock_minimo,e.stock_futuro)])},[t("td",{onClick:r=>u(e.id)},m(e.stock??""),9,ht),t("td",{onClick:r=>u(e.id)},m(e.stock_futuro),9,ft),t("td",{onClick:r=>u(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,gt)],8,_t),t("td",{onClick:r=>u(e.id)},m(e.origen),9,xt),t("td",{onClick:r=>u(e.id)},m(e.nombre),9,bt),t("td",{onClick:r=>u(e.id)},m(e.categorias.map(r=>r.name).join(", ")),9,vt),t("td",null,[n($).includes("eliminar-productos")?F((h(),p("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:G(r=>I(e.id,e.nombre),["prevent"])},kt,8,wt)),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):L("",!0)])],2))),256))])])]),a(Y,{elements:g.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{te as default};
