import{r as c,o as L,O as V,g as G,j as l,S as o,V as I,f as $,E as a,Q as y,a2 as h,u as Q,t as q}from"./@vue-1043e4d5.js";import{_ as p}from"./InputError-933cc936.js";import{_ as m}from"./InputLabel-bc304214.js";import{T as A,O as H}from"./@inertiajs-ab1bf9dd.js";import{a as w}from"./axios-4a70c6fc.js";import{aG as J,h as k}from"./primevue-232ee6f7.js";import{i as K}from"./vue-datepicker-next-31061510.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";const R=l("i",{class:"fas fa-edit"},null,-1),W=[R],X=["onSubmit"],Z={class:"px-2 grid grid-cols-6 gap-4 md:gap-2 2xl:gap-6 mb-2"},ee={class:"col-span-12"},oe={class:"col-span-12"},te={class:"col-span-12"},ae={class:"col-span-12"},se={class:"col-span-12"},ne={class:"col-span-12"},le={class:"col-span-12"},re={class:"flex justify-end py-3"},de="Pago",f="pago-servicio",Ye={__name:"EditarModal",props:{itemId:{type:Number,default:null}},setup(D){const S=D,b=c(),v=c(),E=J(),_=c(),x=c(),u=c(!1),g=c({name:"Pesos",code:"Pesos"}),M=c([{name:"Pesos",code:"Pesos"},{name:"Dólares",code:"Dólares"}]),e=A({id:"",fecha_pago:"",moneda:"",nro_factura:"",monto:"",concepto_pago_id:"",metodo_pago_id:"",observacion:""}),U=r=>{g.value.code!=e.moneda&&(e.moneda=g.value.code)},Y=()=>{w.get(route(f+".conceptos")).then(r=>{_.value=r.data.conceptos})},P=()=>{w.get(route(f+".metodos")).then(r=>{x.value=r.data.metodos})},F=r=>{e.concepto_pago_id=b.value.code},N=r=>{e.metodo_pago_id=v.value.code},O=()=>{T(S.itemId)},T=r=>{w.get(route(f+".show",r)).then(t=>{u.value=!0;var n=t.data.item;e.id=n.id,e.fecha_pago=n.fecha_pago,e.moneda=n.moneda,e.nro_factura=n.nro_factura,e.monto=n.monto,e.concepto_pago_id=n.concepto_pago_id,e.metodo_pago_id=n.metodo_pago_id,e.observacion=n.observacion,g.value=M.value.find(i=>i.code===n.moneda),b.value=_.value.find(i=>i.code===n.concepto_pago_id),v.value=x.value.find(i=>i.code===n.metodo_pago_id)})};L(()=>{Y(),P()});const j=()=>{e.reset(),e.clearErrors(),u.value=!1},z=()=>{e.clearErrors(),e.post(route(f+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{u.value=!1,B("success","Mensaje","Se ha editado"),setTimeout(()=>{H.get(route(f+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},B=(r,t,n)=>{E.add({severity:r,summary:t,detail:n,life:3e3})};return(r,t)=>{const n=V("Dropdown"),i=V("Dialog");return $(),G("section",null,[l("button",{type:"button",onClick:O},W),o(i,{visible:u.value,"onUpdate:visible":t[7]||(t[7]=s=>u.value=s),modal:"",header:"Editar "+de,style:{width:"30vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 "},content:{class:"p-4 lg:p-4"}}},{default:I(()=>[l("form",{onSubmit:q(z,["prevent"])},[l("div",Z,[l("div",ee,[o(m,{for:"fecha_pago",value:"Fecha",class:"block text-base font-medium leading-6 text-gray-900"}),o(a(K),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-12 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_pago,"onUpdate:value":t[0]||(t[0]=s=>a(e).fecha_pago=s),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),o(p,{class:"mt-1 text-xs",message:a(e).errors.fecha_pago},null,8,["message"])]),l("div",oe,[o(m,{for:"moneda",value:"Moneda",class:"text-base font-medium leading-1 text-gray-900"}),o(n,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onChange:U,options:M.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:C,context:d})=>({class:d.selected?"text-white bg-primary-900":d.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Moneda"},null,8,["modelValue","options","pt"]),o(p,{class:"mt-1 text-xs",message:a(e).errors.moneda},null,8,["message"])]),l("div",te,[o(m,{for:"metodo",value:"Método de pago",class:"text-base font-medium leading-1 text-gray-900"}),o(n,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),onChange:N,options:x.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:C,context:d})=>({class:d.selected?"text-white bg-primary-900":d.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Método"},null,8,["modelValue","options","pt"]),o(p,{class:"mt-1 text-xs",message:a(e).errors.metodo_pago_id},null,8,["message"])]),l("div",ae,[o(m,{for:"concepto",value:"Concepto",class:"text-base font-medium leading-1 text-gray-900"}),o(n,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),onChange:F,options:_.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:C,context:d})=>({class:d.selected?"text-white bg-primary-900":d.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Concepto"},null,8,["modelValue","options","pt"]),o(p,{class:"mt-1 text-xs",message:a(e).errors.concepto_pago_id},null,8,["message"])]),l("div",se,[o(m,{for:"nro_factura",value:"Nro. Factura",class:"block text-base font-medium leading-6 text-gray-900"}),y(l("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>a(e).nro_factura=s),class:"p-inputtext p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,a(e).nro_factura]]),o(p,{class:"mt-1 text-xs",message:a(e).errors.nro_factura},null,8,["message"])]),l("div",ne,[o(m,{for:"monto",value:"Monto",class:"block text-base font-medium leading-6 text-gray-900"}),y(l("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>a(e).monto=s),step:"0.01",class:"p-inputtext p-component text-gray-700 bg-white border appearance-none rounded text-basw h-9 m-0 w-full text-end"},null,512),[[h,a(e).monto]]),o(p,{class:"mt-1 text-xs",message:a(e).errors.monto},null,8,["message"])]),l("div",le,[o(m,{for:"observacion",value:"Observación",class:"block text-base font-medium leading-6 text-gray-900"}),y(l("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>a(e).observacion=s),class:"p-inputtext p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,a(e).observacion]]),o(p,{class:"mt-1 text-xs",message:a(e).errors.observacion},null,8,["message"])])]),l("div",re,[o(a(k),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:j,type:"button"}),o(a(k),{label:"Guardar",size:"small",type:"submit",class:Q({"opacity-50":a(e).processing}),disabled:a(e).processing},null,8,["class","disabled"])])],40,X)]),_:1},8,["visible","header"])])}}};export{Ye as default};
