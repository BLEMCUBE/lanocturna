import{r as c,w as z,o as H,O as b,P as U,g,S as t,E as o,V as i,F as K,f,j as a,A as T,Q as G,R as P,t as M,q as Q,K as Y,z as S,n as B}from"./@vue-1043e4d5.js";import{_ as Z}from"./AppLayout-50b5d09a.js";import{K as p,T as J,O as _,Z as L}from"./@inertiajs-ab1bf9dd.js";import{aG as W,aH as X,h as ee,q as d}from"./primevue-232ee6f7.js";import{i as te}from"./vue-datepicker-next-31061510.js";import{h as O}from"./moment-fbc5633a.js";import oe from"./CrearModal-9e23413e.js";import ae from"./EditarModal-2817073a.js";import{s as se}from"./@vueform-21ff8afc.js";import{S as le}from"./sweetalert2-c47eda61.js";import{s as y,a as ne,e as re,b as ie,c as ce}from"./date-fns-7c3f4903.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";import"./InputError-933cc936.js";import"./InputLabel-bc304214.js";import"./@babel-7fd5df1e.js";const de={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},pe={class:"px-2.5 pb-2 grid grid-cols-12 gap-4"},ue={class:"ml-5 flex justify-end col-span-12 sm:col-span-4"},me=a("i",{class:"fas fa-file-excel text-white text-lg"},null,-1),fe={class:"align-middle py-1 px-3"},xe={class:"grid grid-cols-12 gap-2 m-1"},ve={class:"flex justify-content-end text-md col-span-12 lg:col-span-3 2xl:col-span-3"},he={class:"flex justify-content-end text-md col-span-12 lg:col-span-5 2xl:col-span-7"},be={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-2"},ge={class:"flex justify-end justify-items-center"},_e={key:0,class:"h-8 inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},ye={key:1,class:"h-8 inline-block rounded bg-red-700 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-red-600"},we=["onClick"],Ce=a("i",{class:"fas fa-trash-alt"},null,-1),De=[Ce],w="Pagos",u="pago-servicio",it={__name:"Index",props:{filtro:{type:Object,default:()=>({})}},setup(ke){const{permissions:C}=p().props.auth,x=c([]),V=W(),j=J({id:""});let e=c(),E=c(),F=c(),r=c([]);e.value=[O(y(new Date,30)).format("YYYY-MM-DD"),O(new Date).format("YYYY-MM-DD")],z(r,s=>{_.get(route(u+".index"),{concepto:r.value,inicio:e.value[0],fin:e.value[1]},{preserveState:!0,onSuccess:()=>{x.value=p().props.items.data}})});const N=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[y(new Date,1),y(new Date,1)]}},{text:"Este mes",onClick(){return[ne(new Date),re(new Date)]}},{text:"Este año",onClick(){return[ie(new Date),ce(new Date)]}}],v=c({global:{value:null,matchMode:X.CONTAINS}}),R=(s,n,m)=>{V.add({severity:s,summary:n,detail:m,life:3e3})},$=(s,n)=>{le.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+n,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(h=>{h.isConfirmed&&j.delete(route(u+".destroy",s),{preserveScroll:!0,onSuccess:()=>{R("success","Eliminado","Se ha eliminado"),setTimeout(()=>{_.get(route(u+".index"))},1e3)}})})},D=c({value:"",closeOnSelect:!0,placeholder:"Conceptos",mode:"tags",searchable:!0,options:[]}),A=()=>{if(e.value[0]!=null&&e.value[1]!=null)window.open(route(u+".exportar",[{concepto:r.value,inicio:e.value[0],fin:e.value[1]}]),"_blank");else return},k=s=>{s[0]!=null&&s[1]!=null&&(E.value=e.value[0],F.value=e.value[1]),_.get(route(u+".index"),{concepto:r.value,inicio:e.value[0],fin:e.value[1]},{preserveState:!0,onSuccess:()=>{r.value=p().props.filtro.concepto,x.value=p().props.items.data}})};return H(()=>{D.value.options=p().props.conceptos,k(e.value)}),(s,n)=>{const m=b("Toast"),h=b("InputText"),I=b("DataTable"),q=U("tooltip");return f(),g(K,null,[t(o(L),{title:w}),t(Z,{pagina:[{label:w,link:!1}]},{default:i(()=>[a("div",de,[t(m),a("div",pe,[a("div",{class:"py-1 px-3 col-span-12 sm:col-span-8 flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},T(w))]),a("div",ue,[t(oe),G((f(),P(o(ee),{onClick:M(A,["prevent"]),pt:{root:{class:"py-auto px-2.5 ml-5 py-2 text-lg bg-green-600 border-none hover:bg-green-500"}}},{default:i(()=>[me]),_:1},8,["onClick"])),[[q,{value:"Exportar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),a("div",fe,[t(I,{filters:v.value,value:x.value,globalFilterFields:["tconcepto","observacion"],scrollable:"",scrollHeight:"700px",paginator:"",rows:50,columnResizeMode:"expand",pt:{bodyRow:{class:"hover:bg-gray-100 hover:text-black"},root:{class:"text-base"}},size:"small"},{header:i(()=>[a("div",xe,[a("div",ve,[t(h,{class:"h-9 w-full",modelValue:v.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=l=>v.value.global.value=l),placeholder:"Buscar"},null,8,["modelValue"])]),a("div",he,[t(o(se),Q({id:"conceptos",modelValue:o(r),"onUpdate:modelValue":n[1]||(n[1]=l=>Y(r)?r.value=l:r=l),class:"w-full"},D.value),null,16,["modelValue"])]),a("div",be,[t(o(te),{onChange:k,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:o(e),"onUpdate:value":n[2]||(n[2]=l=>Y(e)?e.value=l:e=l),shortcuts:N,clearable:!1,lang:"es",editable:!1,placeholder:"Seleccione Fecha"},null,8,["value"])])])]),empty:i(()=>[S(" No existe Resultado ")]),loading:i(()=>[S(" Cargando... ")]),default:i(()=>[t(o(d),{field:"fecha",sortable:"",header:"Fecha",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(d),{field:"nro_factura",header:"No. de Factura",sortable:"",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(d),{field:"moneda",header:"Moneda",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(d),{sortable:"",header:"Monto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:i(l=>[a("span",null,T(s.$numberFormat(l.data.monto)),1)]),_:1}),t(o(d),{field:"tconcepto",sortable:"",header:"Concepto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(d),{field:"observacion",header:"Observación",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(d),{header:"Acciones",style:{width:"100px"},pt:{bodyCell:{class:"text-center"}}},{body:i(l=>[a("div",ge,[o(C).includes("editar-pagoservicio")?(f(),g("div",_e,[t(ae,{"item-id":l.data.id},null,8,["item-id"])])):B("",!0),o(C).includes("eliminar-pagoservicio")?(f(),g("div",ye,[a("button",{onClick:M(Te=>$(l.data.id,l.data.nro_factura),["prevent"])},De,8,we)])):B("",!0)])]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{it as default};
