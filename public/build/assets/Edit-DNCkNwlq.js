import{r as C,o as z,R as g,S as se,f as u,g as p,W as l,E as t,Y as m,j as o,D as x,y as F,u as v,T as b,x as ae,a5 as h,a4 as le,F as $,A as re,z as ne,C as M,ad as ie,ae as de}from"./@vue-BLfC86mR.js";import{_ as ce}from"./AppLayout-BWpqwQoE.js";import{K as f,T as ue,Z as pe,O as N}from"./@inertiajs-CMyvZJ1U.js";import{aH as me,h as A}from"./primevue-DAb-R_om.js";import{_ as d}from"./InputError-DdpGOVhM.js";import{_ as n}from"./InputLabel-CkCrW4zf.js";import{s as ge}from"./@vueform-CFisUGo2.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-5zhdP7Ax.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const T=y=>(ie("data-v-6f51fe0d"),y=y(),de(),y),be={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},fe={class:"align-middle"},_e=["onSubmit"],ve={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},he={class:"col-span-12 shadow-default xl:col-span-3"},ye={class:"col-span-12 shadow-default xl:col-span-5"},we={class:"col-span-12 shadow-default xl:col-span-4"},ke={class:"col-span-12 shadow-default xl:col-span-3"},Ce={class:"col-span-12 shadow-default xl:col-span-3"},Ve={class:"col-span-12 shadow-default xl:col-span-3"},Te={class:"col-span-12 shadow-default xl:col-span-3"},Ie={key:0,class:"col-span-12 shadow-default xl:col-span-3"},Se={class:"font-normal text-gray-800 text-base"},Ue={key:1,class:"col-span-12 shadow-default xl:col-span-3"},Re={key:2,class:"col-span-12 shadow-default xl:col-span-3"},Ae={class:"font-normal text-gray-800 text-base"},Ee={key:3,class:"col-span-12 shadow-default xl:col-span-3"},De={class:"col-span-12 shadow-default xl:col-span-6"},je=T(()=>o("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),ze={class:"col-span-12 shadow-default xl:col-span-3"},Fe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-12"},$e=T(()=>o("div",{class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},[o("div",{class:"bg-gray-200 w-full text-start"},[o("h3",{class:"font-semibold text-gray-800 text-lg px-5"},"ATRIBUTOS: ")])],-1)),Me={class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},Ne={class:"flex justify-start col-span-12 w-full flex-col md:flex-row py-1 px-5"},Oe={class:"flex items-center w-full md:w-1/3 xl:w-1/3 mr-2"},Pe={class:"font-semibold text-gray-800 text-base"},Be={class:"font-normal text-gray-800 text-base px-3"},qe={class:"rounded-md p-1 flex justify-center items-center bg-red-600 py-auto text-base font-semibold text-white hover:bg-red-700"},He=["onClick"],Ke=T(()=>o("i",{class:"fas fa-trash"},null,-1)),Le=[Ke],We={class:"flex justify-end pt-2"},Ge={class:"card flex w-full"},Ye={class:"px-1"},Ze={class:"flex justify-between items-center mx-2 w-1/2"},Je={class:"mx-3"},Qe={class:"px-5 text-end"},Xe=["onClick","disabled"],et=T(()=>o("i",{class:"fas fa-plus"},null,-1)),tt=[et],E="Editar Producto",V="productos",ot={__name:"Edit",setup(y){const I=C("/images/productos/sin_foto.png"),O=me(),{permissions:w}=f().props.auth,{atributos:P}=f().props,{lista_atributos:B}=f().props,{lista_valores:q}=f().props,S=C([]),k=C(!1),e=ue({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,precio:0,stock_minimo:0,observaciones:"",imagen:"",photo:"",costo_origen:null,costo_fecha:null,costo_real:0,costo_id:null,categorias:[],atributos:[]});z(()=>{D.value.options=f().props.lista_categorias;var a=f().props.producto;e.id=a.id,e.nombre=a.nombre,e.origen=a.origen,e.aduana=a.aduana,e.codigo_barra=a.codigo_barra,e.precio=a.precio,e.stock=a.stock,e.stock_minimo=a.stock_minimo,e.stock_futuro=a.stock_futuro,e.observaciones=a.observaciones,e.costo_real=a.costos_reales.length>0?a.costos_reales[0].monto:0,e.costo_origen=a.costos_reales.length>0?a.costos_reales[0].origen:null,e.costo_id=a.costos_reales.length>0?a.costos_reales[0].id:null,e.costo_fecha=a.costos_reales.length>0?a.costos_reales[0].fecha:null,e.atributos=P,a.categorias.length>0&&a.categorias.forEach(s=>{e.categorias.push(s.id)}),I.value=a.imagen,e.imagen=a.imagen});const H=()=>{e.clearErrors(),e.post(route(V+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{L("success","Mensaje","Producto Actualizado"),setTimeout(()=>{N.get(route(V+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},D=C({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),K=a=>{a.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(a.target.value))},L=(a,s,i)=>{O.add({severity:a,summary:s,detail:i,life:3e3})},W=()=>{N.get(route(V+".index"))},G=a=>{a.preventDefault(),e.photo=a.target.files[0];let s=a.target.files;if(s&&s[0]){let i=new FileReader;i.onload=c=>{I.value=c.target.result},i.readAsDataURL(s[0])}},Y=a=>{},Z=a=>{},J=a=>{if(e.atributos.length>0){const i=e.atributos.findIndex(c=>c.atributo_id===a.atributo_id);i!==-1&&e.atributos.splice(i,1)}var s=q.find(i=>i.id===a.id);e.atributos.push({id:s.id,valor:s.valor,nombre:s.nombre,atributo_id:s.atributo_id,producto_id:e.id}),k.value=!1},Q=a=>{e.atributos.splice(a,1)},X=()=>{k.value=!0};return z(()=>{S.value=null}),(a,s)=>{const i=g("Toast"),c=g("InputText"),ee=g("Textarea"),U=g("Column"),j=g("DataTable"),te=g("Dialog"),oe=se("tooltip");return p(),u($,null,[l(t(pe),{title:E}),l(ce,{pagina:[{label:"Productos",link:!0,url:a.route(V+".index")},{label:E,link:!1}]},{default:m(()=>[o("div",be,[l(i),o("div",{class:"px-3 col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},x(E))]),o("div",fe,[o("form",{onSubmit:F(H,["prevent"])},[o("div",ve,[o("div",he,[l(n,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"origen",modelValue:t(e).origen,"onUpdate:modelValue":s[0]||(s[0]=r=>t(e).origen=r),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.origen},null,8,["message"])]),o("div",ye,[l(n,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"nombre",modelValue:t(e).nombre,"onUpdate:modelValue":s[1]||(s[1]=r=>t(e).nombre=r),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.nombre},null,8,["message"])]),o("div",we,[l(n,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),l(t(ge),ae({id:"categorias",modelValue:t(e).categorias,"onUpdate:modelValue":s[2]||(s[2]=r=>t(e).categorias=r),class:"w-full"},D.value),null,16,["modelValue"])]),o("div",ke,[l(n,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"aduana",modelValue:t(e).aduana,"onUpdate:modelValue":s[3]||(s[3]=r=>t(e).aduana=r),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.aduana},null,8,["message"])]),o("div",Ce,[l(n,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"codigo_barra",modelValue:t(e).codigo_barra,"onUpdate:modelValue":s[4]||(s[4]=r=>t(e).codigo_barra=r),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.codigo_barra},null,8,["message"])]),o("div",Ve,[l(n,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),b(o("input",{type:"number",required:"","onUpdate:modelValue":s[5]||(s[5]=r=>t(e).stock=r),step:"1",min:"0",onKeyup:s[6]||(s[6]=r=>K(r)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[h,t(e).stock]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock},null,8,["message"])]),o("div",Te,[l(n,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),b(o("input",{type:"number",required:"","onUpdate:modelValue":s[7]||(s[7]=r=>t(e).stock_minimo=r),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).stock_minimo]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock_minimo},null,8,["message"])]),t(w).includes("productos-editar_precio")==!1?(p(),u("div",Ie,[l(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Se,x(t(e).precio),1)])):v("",!0),t(w).includes("productos-editar_precio")?(p(),u("div",Ue,[l(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),b(o("input",{type:"number",required:"","onUpdate:modelValue":s[8]||(s[8]=r=>t(e).precio=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).precio]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.precio},null,8,["message"])])):v("",!0),t(w).includes("productos-costoreal")==!1?(p(),u("div",Re,[l(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Ae,x(t(e).costo_real),1)])):v("",!0),t(w).includes("productos-costoreal")?(p(),u("div",Ee,[l(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),b(o("input",{type:"number",required:"","onUpdate:modelValue":s[9]||(s[9]=r=>t(e).costo_real=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[h,t(e).costo_real]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.costo_real},null,8,["message"])])):v("",!0),b(o("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":s[10]||(s[10]=r=>t(e).stock_futuro=r)},null,512),[[h,t(e).stock_futuro]]),o("div",De,[l(n,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),o("input",{onInput:G,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),je,l(d,{class:"mt-1 text-xs",message:t(e).errors.imagen},null,8,["message"])]),o("div",ze,[o("div",{class:"imagePreviewWrapper",style:le({"background-image":`url(${I.value})`})},null,4)]),o("div",Fe,[l(n,{for:"observacion",value:"Observaciones:",class:"text-base font-medium leading-6 text-gray-900"}),l(ee,{modelValue:t(e).observaciones,"onUpdate:modelValue":s[11]||(s[11]=r=>t(e).observaciones=r),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"])]),$e,o("div",Me,[l(t(A),{size:"small",onClick:X,type:"button",label:"Agregar Atributo",severity:"success"})]),t(e).atributos.length>0?(p(!0),u($,{key:4},re(t(e).atributos,(r,_)=>(p(),u("div",Ne,[o("div",Oe,[o("h3",Pe,x(r.nombre)+": ",1),o("h3",Be,x(r.valor),1),o("div",qe,[b((p(),u("button",{type:"button",onClick:F(R=>Q(_),["prevent"]),class:"w-6"},Le,8,He)),[[oe,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 m-0 text-xs text-white rounded"}},void 0,{top:!0}]])])])]))),256)):v("",!0)]),o("div",We,[l(t(A),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:W,type:"button"}),l(t(A),{label:"Guardar",size:"small",type:"submit",class:ne({"opacity-50":t(e).processing}),disabled:t(e).processing},null,8,["class","disabled"])])],40,_e)])]),l(te,{visible:k.value,"onUpdate:visible":s[13]||(s[13]=r=>k.value=r),modal:"",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 flex justify-around text-end"},content:{class:"p-4 lg:p-4"}}},{default:m(()=>[o("div",Ge,[l(j,{expandedRows:S.value,"onUpdate:expandedRows":s[12]||(s[12]=r=>S.value=r),size:"small",onRowCollapse:Z,onRowExpand:Y,value:t(B).data,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,pt:{root:{class:"w-full"}}},{empty:m(()=>[M(" No existe Resultado ")]),loading:m(()=>[M(" Cargando... ")]),expansion:m(r=>[o("div",Ye,[l(j,{value:r.data.valores,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,pt:{header:{class:"text-center pb-0 mb-0 text-start"},headerContent:{class:"bg-white pb-0 mb-0 text-start"}}},{default:m(()=>[l(U,{pt:{bodyCell:{class:"text-start p-0 m-0"},headerCell:{class:"bg-white p-0 m-0"},headerContent:{class:"text-start stickyToTopTableHeaders"},bodyCellContent:{class:"text-start"}}},{body:m(_=>[o("div",Ze,[o("div",Je,x(_.data.valor),1),o("div",Qe,[o("button",{onClick:R=>J(_.data),class:"bg-green-500 disabled:bg-gray-800 disabled:text-white hover:bg-green-600 text-white rounded px-2 py-1.5",disabled:t(e).atributos.filter(R=>R.id===_.data.id).length>0},tt,8,Xe)])])]),_:2},1024)]),_:2},1032,["value"])])]),default:m(()=>[l(U,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-start"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),l(U,{sortable:"",field:"nombre",header:"Atributos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-start"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}})]),_:1},8,["expandedRows","value"])])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}},Ot=xe(ot,[["__scopeId","data-v-6f51fe0d"]]);export{Ot as default};
