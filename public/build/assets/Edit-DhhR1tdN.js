import{r as C,o as z,R as _,S as oe,f as p,g as u,W as l,E as t,Y as m,j as o,D as g,y as F,u as h,T as x,x as se,a5 as v,a4 as ae,F as $,A as le,z as re,C as M,ad as ne,ae as ie}from"./@vue-BLfC86mR.js";import{_ as de}from"./AppLayout-BWpqwQoE.js";import{K as b,T as ce,Z as pe,O as N}from"./@inertiajs-CMyvZJ1U.js";import{aH as ue,h as A}from"./primevue-DAb-R_om.js";import{_ as d}from"./InputError-DdpGOVhM.js";import{_ as n}from"./InputLabel-CkCrW4zf.js";import{s as me}from"./@vueform-CFisUGo2.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-5zhdP7Ax.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const T=y=>(ne("data-v-ba66ecf4"),y=y(),ie(),y),xe={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},be={class:"align-middle"},fe=["onSubmit"],_e={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},he={class:"col-span-12 shadow-default xl:col-span-3"},ve={class:"col-span-12 shadow-default xl:col-span-5"},ye={class:"col-span-12 shadow-default xl:col-span-4"},we={class:"col-span-12 shadow-default xl:col-span-3"},ke={class:"col-span-12 shadow-default xl:col-span-3"},Ce={class:"col-span-12 shadow-default xl:col-span-3"},Ve={class:"col-span-12 shadow-default xl:col-span-3"},Te={key:0,class:"col-span-12 shadow-default xl:col-span-3"},Ie={class:"font-normal text-gray-800 text-base"},Se={key:1,class:"col-span-12 shadow-default xl:col-span-3"},Ue={key:2,class:"col-span-12 shadow-default xl:col-span-3"},Re={class:"font-normal text-gray-800 text-base"},Ae={key:3,class:"col-span-12 shadow-default xl:col-span-3"},Ee={class:"col-span-12 shadow-default xl:col-span-6"},De=T(()=>o("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),je={class:"col-span-12 shadow-default xl:col-span-3"},ze=T(()=>o("div",{class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},[o("div",{class:"bg-gray-200 w-full text-start"},[o("h3",{class:"font-semibold text-gray-800 text-lg px-5"},"ATRIBUTOS: ")])],-1)),Fe={class:"col-span-12 w-full flex flex-col md:flex-row pt-2"},$e={class:"flex justify-start col-span-12 w-full flex-col md:flex-row py-1 px-5"},Me={class:"flex items-center w-full md:w-1/3 xl:w-1/3 mr-2"},Ne={class:"font-semibold text-gray-800 text-base"},Pe={class:"font-normal text-gray-800 text-base px-3"},Be={class:"rounded-md p-1 flex justify-center items-center bg-red-600 py-auto text-base font-semibold text-white hover:bg-red-700"},Oe=["onClick"],qe=T(()=>o("i",{class:"fas fa-trash"},null,-1)),He=[qe],Ke={class:"flex justify-end pt-2"},Le={class:"card flex w-full"},We={class:"px-1"},Ge={class:"flex justify-between items-center mx-2 w-1/2"},Ye={class:"mx-3"},Ze={class:"px-5 text-end"},Je=["onClick","disabled"],Qe=T(()=>o("i",{class:"fas fa-plus"},null,-1)),Xe=[Qe],E="Editar Producto",V="productos",et={__name:"Edit",setup(y){const I=C("/images/productos/sin_foto.png"),P=ue(),{permissions:w}=b().props.auth,{atributos:B}=b().props,{lista_atributos:O}=b().props,{lista_valores:q}=b().props,S=C([]),k=C(!1),e=ce({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,precio:0,stock_minimo:0,imagen:"",photo:"",costo_origen:null,costo_fecha:null,costo_real:0,costo_id:null,categorias:[],atributos:[]});z(()=>{D.value.options=b().props.lista_categorias;var s=b().props.producto;e.id=s.id,e.nombre=s.nombre,e.origen=s.origen,e.aduana=s.aduana,e.codigo_barra=s.codigo_barra,e.precio=s.precio,e.stock=s.stock,e.stock_minimo=s.stock_minimo,e.stock_futuro=s.stock_futuro,e.costo_real=s.costos_reales.length>0?s.costos_reales[0].monto:0,e.costo_origen=s.costos_reales.length>0?s.costos_reales[0].origen:null,e.costo_id=s.costos_reales.length>0?s.costos_reales[0].id:null,e.costo_fecha=s.costos_reales.length>0?s.costos_reales[0].fecha:null,e.atributos=B,s.categorias.length>0&&s.categorias.forEach(a=>{e.categorias.push(a.id)}),I.value=s.imagen,e.imagen=s.imagen});const H=()=>{e.clearErrors(),e.post(route(V+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{L("success","Mensaje","Producto Actualizado"),setTimeout(()=>{N.get(route(V+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},D=C({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),K=s=>{s.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(s.target.value))},L=(s,a,i)=>{P.add({severity:s,summary:a,detail:i,life:3e3})},W=()=>{N.get(route(V+".index"))},G=s=>{s.preventDefault(),e.photo=s.target.files[0];let a=s.target.files;if(a&&a[0]){let i=new FileReader;i.onload=c=>{I.value=c.target.result},i.readAsDataURL(a[0])}},Y=s=>{},Z=s=>{},J=s=>{if(e.atributos.length>0){const i=e.atributos.findIndex(c=>c.atributo_id===s.atributo_id);i!==-1&&e.atributos.splice(i,1)}var a=q.find(i=>i.id===s.id);e.atributos.push({id:a.id,valor:a.valor,nombre:a.nombre,atributo_id:a.atributo_id,producto_id:e.id}),k.value=!1},Q=s=>{e.atributos.splice(s,1)},X=()=>{k.value=!0};return z(()=>{S.value=null}),(s,a)=>{const i=_("Toast"),c=_("InputText"),U=_("Column"),j=_("DataTable"),ee=_("Dialog"),te=oe("tooltip");return u(),p($,null,[l(t(pe),{title:E}),l(de,{pagina:[{label:"Productos",link:!0,url:s.route(V+".index")},{label:E,link:!1}]},{default:m(()=>[o("div",xe,[l(i),o("div",{class:"px-3 col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},g(E))]),o("div",be,[o("form",{onSubmit:F(H,["prevent"])},[o("div",_e,[o("div",he,[l(n,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"origen",modelValue:t(e).origen,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).origen=r),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.origen},null,8,["message"])]),o("div",ve,[l(n,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"nombre",modelValue:t(e).nombre,"onUpdate:modelValue":a[1]||(a[1]=r=>t(e).nombre=r),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.nombre},null,8,["message"])]),o("div",ye,[l(n,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),l(t(me),se({id:"categorias",modelValue:t(e).categorias,"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).categorias=r),class:"w-full"},D.value),null,16,["modelValue"])]),o("div",we,[l(n,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"aduana",modelValue:t(e).aduana,"onUpdate:modelValue":a[3]||(a[3]=r=>t(e).aduana=r),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.aduana},null,8,["message"])]),o("div",ke,[l(n,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),l(c,{type:"text",id:"codigo_barra",modelValue:t(e).codigo_barra,"onUpdate:modelValue":a[4]||(a[4]=r=>t(e).codigo_barra=r),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),l(d,{class:"mt-1 text-xs",message:t(e).errors.codigo_barra},null,8,["message"])]),o("div",Ce,[l(n,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),x(o("input",{type:"number",required:"","onUpdate:modelValue":a[5]||(a[5]=r=>t(e).stock=r),step:"1",min:"0",onKeyup:a[6]||(a[6]=r=>K(r)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[v,t(e).stock]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock},null,8,["message"])]),o("div",Ve,[l(n,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),x(o("input",{type:"number",required:"","onUpdate:modelValue":a[7]||(a[7]=r=>t(e).stock_minimo=r),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[v,t(e).stock_minimo]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.stock_minimo},null,8,["message"])]),t(w).includes("productos-editar_precio")==!1?(u(),p("div",Te,[l(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Ie,g(t(e).precio),1)])):h("",!0),t(w).includes("productos-editar_precio")?(u(),p("div",Se,[l(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),x(o("input",{type:"number",required:"","onUpdate:modelValue":a[8]||(a[8]=r=>t(e).precio=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[v,t(e).precio]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.precio},null,8,["message"])])):h("",!0),t(w).includes("productos-costoreal")==!1?(u(),p("div",Ue,[l(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),o("h3",Re,g(t(e).costo_real),1)])):h("",!0),t(w).includes("productos-costoreal")?(u(),p("div",Ae,[l(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),x(o("input",{type:"number",required:"","onUpdate:modelValue":a[9]||(a[9]=r=>t(e).costo_real=r),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[v,t(e).costo_real]]),l(d,{class:"mt-1 text-xs",message:t(e).errors.costo_real},null,8,["message"])])):h("",!0),x(o("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":a[10]||(a[10]=r=>t(e).stock_futuro=r)},null,512),[[v,t(e).stock_futuro]]),o("div",Ee,[l(n,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),o("input",{onInput:G,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),De,l(d,{class:"mt-1 text-xs",message:t(e).errors.imagen},null,8,["message"])]),o("div",je,[o("div",{class:"imagePreviewWrapper",style:ae({"background-image":`url(${I.value})`})},null,4)]),ze,o("div",Fe,[l(t(A),{size:"small",onClick:X,type:"button",label:"Agregar Atributo",severity:"success"})]),t(e).atributos.length>0?(u(!0),p($,{key:4},le(t(e).atributos,(r,f)=>(u(),p("div",$e,[o("div",Me,[o("h3",Ne,g(r.nombre)+": ",1),o("h3",Pe,g(r.valor),1),o("div",Be,[x((u(),p("button",{type:"button",onClick:F(R=>Q(f),["prevent"]),class:"w-6"},He,8,Oe)),[[te,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 m-0 text-xs text-white rounded"}},void 0,{top:!0}]])])])]))),256)):h("",!0)]),o("div",Ke,[l(t(A),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:W,type:"button"}),l(t(A),{label:"Guardar",size:"small",type:"submit",class:re({"opacity-50":t(e).processing}),disabled:t(e).processing},null,8,["class","disabled"])])],40,fe)])]),l(ee,{visible:k.value,"onUpdate:visible":a[12]||(a[12]=r=>k.value=r),modal:"",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 flex justify-around text-end"},content:{class:"p-4 lg:p-4"}}},{default:m(()=>[o("div",Le,[l(j,{expandedRows:S.value,"onUpdate:expandedRows":a[11]||(a[11]=r=>S.value=r),size:"small",onRowCollapse:Z,onRowExpand:Y,value:t(O).data,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,pt:{root:{class:"w-full"}}},{empty:m(()=>[M(" No existe Resultado ")]),loading:m(()=>[M(" Cargando... ")]),expansion:m(r=>[o("div",We,[l(j,{value:r.data.valores,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,pt:{header:{class:"text-center pb-0 mb-0 text-start"},headerContent:{class:"bg-white pb-0 mb-0 text-start"}}},{default:m(()=>[l(U,{pt:{bodyCell:{class:"text-start p-0 m-0"},headerCell:{class:"bg-white p-0 m-0"},headerContent:{class:"text-start stickyToTopTableHeaders"},bodyCellContent:{class:"text-start"}}},{body:m(f=>[o("div",Ge,[o("div",Ye,g(f.data.valor),1),o("div",Ze,[o("button",{onClick:R=>J(f.data),class:"bg-green-500 disabled:bg-gray-800 disabled:text-white hover:bg-green-600 text-white rounded px-2 py-1.5",disabled:t(e).atributos.filter(R=>R.id===f.data.id).length>0},Xe,8,Je)])])]),_:2},1024)]),_:2},1032,["value"])])]),default:m(()=>[l(U,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-start"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),l(U,{sortable:"",field:"nombre",header:"Atributos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-start"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}})]),_:1},8,["expandedRows","value"])])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}},Mt=ge(et,[["__scopeId","data-v-ba66ecf4"]]);export{Mt as default};
