import{K as h,l as x,k as M,T as O,h as V,F as w,m,p as j,f as A,a as e,u as L,w as o,q as P,o as g,Z as U,b as s,t as v,d as y,v as $,c as q,e as _,O as H}from"./app-f0f0425b.js";import{_ as z,S as K}from"./AppLayout-d1645504.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},G={class:"align-middle"},J={class:"flex justify-content-end text-base text-primary-900"},Q={class:"flex items-center justify-center"},W={class:"mx-2"},X=s("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),Y={class:"px-1"},ee=["src"],te=s("i",{class:"fas fa-trash-alt"},null,-1),f="Stock Rma",k="rmas",ce={__name:"StockRma",setup(le){h().props.auth;const p=x([]),T=M(),b=x(),S=O({id:""});V(()=>{b.value=h().props.depositos,p.value=null});const B=l=>{if(l!=null)window.open(route("reportes.exportstockrma",{completo:l}),"_blank");else return},D=l=>{K.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminarÃ¡ definitivamente?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(c=>{c.isConfirmed&&S.delete(route(k+".destroy-stock",l),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{F("success","Eliminado","Se ha eliminado"),setTimeout(()=>{H.get(route(k+".rma-stock"))},1e3)}})})},E=l=>{var a=l.productos.map(d=>d.sku.toLowerCase()),c=l.productos.map(d=>d.nombre.toLowerCase());if(n.value.global.value!=null&&n.value.global.value!=""){const d=a.filter(t=>t.includes(n.value.global.value.toLowerCase())),i=c.filter(t=>t.includes(n.value.global.value.toLowerCase()));return[{"bg-orange-400":d.length>0||i.length>0}]}else return["bg-secondary-900/70"]},N=()=>{p.value=null},R=()=>{p.value=b.value.filter(l=>l.id)},F=(l,a,c)=>{T.add({severity:l,summary:a,detail:c,life:3e3})},n=x({global:{value:null,matchMode:w.CONTAINS},productos:{value:null,matchMode:w.CONTAINS}});return(l,a)=>{const c=m("Toast"),d=m("InputText"),i=m("Button"),t=m("Column"),C=m("DataTable"),I=j("tooltip");return g(),A(P,null,[e(L(U),{title:f}),e(z,{pagina:[{label:f,link:!1}]},{default:o(()=>[s("div",Z,[e(c),s("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[s("h5",{class:"text-2xl font-medium"},v(f))]),s("div",G,[e(C,{expandedRows:p.value,"onUpdate:expandedRows":a[2]||(a[2]=r=>p.value=r),size:"small",rowClass:E,value:b.value,scrollable:"",scrollHeight:"800px",tableStyle:"min-width: 50rem",pt:{}},{header:o(()=>[s("div",J,[e(d,{modelValue:n.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value.global.value=r),placeholder:"Buscar"},null,8,["modelValue"]),e(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:R}),e(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:N})])]),empty:o(()=>[y(" No existe Resultado ")]),loading:o(()=>[y(" Cargando... ")]),expansion:o(r=>[s("div",Y,[e(C,{value:r.data.productos,filters:n.value,"onUpdate:filters":a[1]||(a[1]=u=>n.value=u),paginator:!0,rows:20,rowsPerPageOptions:[20,40,100,200]},{default:o(()=>[e(t,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:o(u=>[s("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:u.data.imagen,alt:"image"},null,8,ee)]),_:2},1024),e(t,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96 font-sm"}}}),e(t,{field:"defecto",header:"Defecto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"observaciones",header:"Observaciones",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96"},bodyCellContent:{class:"text-center w-96 font-sm"}}}),e(t,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36 font-sm"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 font-sm"},headerContent:{class:"text-center w-36 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Acciones",pt:{bodyCell:{class:"text-center"},headerCell:{class:"bg-sky-300 p-0 m-0 w-10"}}},{body:o(u=>[s("div",null,[$((g(),q(i,{class:"w-8 h-8 rounded bg-red-700 border-0 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:_(oe=>D(u.data.stock_id),["prevent"])},{default:o(()=>[te]),_:2},1032,["onClick"])),[[I,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),_:2},1024)]),_:2},1032,["value","filters"])])]),default:o(()=>[e(t,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),e(t,{sortable:"",field:"nombre",header:"Items",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),e(t,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 text-sm font-bold w-56  text-center"},headerContent:{class:" mx-2 "},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:o(r=>[s("div",Q,[s("div",W,v(r.data.productos.length),1),e(i,{pt:{root:{class:"px-2 py-2 text-xl bg-green-600 border-none hover:bg-green-500"}},onClick:_(u=>B(r.data.producto_completo),["prevent"])},{default:o(()=>[X]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}};export{ce as default};
