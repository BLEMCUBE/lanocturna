import{r as w,o as W,O as f,P as Y,g as y,S as t,E as d,V as n,F as P,f as b,j as l,A as V,z as S,Q as B,R as A,t as F,n as g,aZ as ee,aX as te}from"./@vue-1043e4d5.js";import{_ as oe}from"./AppLayout-842afc1b.js";import{K as T,T as M,Z as se,O}from"./@inertiajs-ab1bf9dd.js";import{S as U}from"./sweetalert2-c47eda61.js";import{aG as ae,aH as H}from"./primevue-232ee6f7.js";import le from"./CambiarProductosDepositoModal-d3d21227.js";import{_ as re}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./InputError-933cc936.js";import"./InputLabel-bc304214.js";const D=v=>(ee("data-v-075500c8"),v=v(),te(),v),ne={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},de={class:"align-middle"},ie={class:"flex justify-content-end text-base text-primary-900"},ce={class:"flex justify-center items-center mx-2"},ue={key:0,class:"w-8 h-8 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},pe=["href"],me=D(()=>l("i",{class:"fas fa-file-excel text-white"},null,-1)),xe=[me],be={key:1,class:"w-8 h-8"},he=D(()=>l("i",{class:"fas fa-trash-alt w-6 h-4"},null,-1)),fe={class:"px-1"},ge={class:"flex justify-content-end text-base bg-sky-300 px-5 py-2"},ve={key:0},Ce=D(()=>l("i",{class:"fas fa-trash-alt w-6 h-4"},null,-1)),we=["src"],E="Depósitos",_="depositos",ye={__name:"Index",setup(v){const{roles:I}=T().props.auth,{permissions:L}=T().props.auth,u=w([]),$=ae(),C=w(),h=w(!1),r=M({id:"",productos:[]}),N=M({id:""});W(()=>{C.value=T().props.depositos,u.value=null});const q=()=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminará definitivamente, tenga en cuenta que no podrá editar la importacion de bultos donde el producto este incluido.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(e=>{e.isConfirmed&&(h.value=!0,r.post(route(_+".destroyproductos"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{h.value=!1,r.reset(),j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{O.get(route(_+".index"))},700)}}))})},z=o=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(p=>{p.isConfirmed&&(h.value=!0,N.id=o,N.post(route(_+".destroydepositolista"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{h.value=!1,r.reset(),j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{O.get(route(_+".index"))},700)}}))})},Z=o=>{var e=o.productos.map(m=>m.sku.toLowerCase()),p=o.productos.map(m=>m.nombre.toLowerCase());if(c.value.global.value!=null&&c.value.global.value!=""){const m=e.filter(s=>s.includes(c.value.global.value.toLowerCase())),x=p.filter(s=>s.includes(c.value.global.value.toLowerCase()));return[{"bg-orange-400":m.length>0||x.length>0}]}else return["bg-secondary-900/70"]},G=o=>{o&&r.reset()},K=()=>{u.value=null},Q=o=>{u.value=C.value.filter(e=>e.id==o.data.id),r.reset()},X=o=>{u.value=null,r.reset()},J=()=>{u.value=C.value.filter(o=>o.id)},j=(o,e,p)=>{$.add({severity:o,summary:e,detail:p,life:3e3})},c=w({global:{value:null,matchMode:H.CONTAINS},productos:{value:null,matchMode:H.CONTAINS}});return(o,e)=>{const p=f("Toast"),m=f("InputText"),x=f("Button"),s=f("Column"),R=f("DataTable"),k=Y("tooltip");return b(),y(P,null,[t(d(se),{title:E}),t(oe,{pagina:[{label:E,link:!1}]},{default:n(()=>[l("div",ne,[t(p),l("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[l("h5",{class:"text-2xl font-medium"},V(E))]),l("div",de,[t(R,{expandedRows:u.value,"onUpdate:expandedRows":e[5]||(e[5]=a=>u.value=a),size:"small",rowClass:Z,onRowCollapse:X,onRowExpand:Q,value:C.value,scrollable:"",scrollHeight:"800px",pagination:"",rows:50,tableStyle:"min-width: 50rem",pt:{}},{header:n(()=>[l("div",ie,[t(m,{modelValue:c.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"]),t(x,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:J}),t(x,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:K})])]),empty:n(()=>[S(" No existe Resultado ")]),loading:n(()=>[S(" Cargando... ")]),expansion:n(a=>[l("div",fe,[t(R,{value:a.data.productos,scrollable:"",scrollHeight:"300px",paginator:"",rows:100,filters:c.value,"onUpdate:filters":e[3]||(e[3]=i=>c.value=i),selection:d(r).productos,"onUpdate:selection":e[4]||(e[4]=i=>d(r).productos=i),pt:{header:{class:"text-center pb-0 mb-0"},headerContent:{class:"bg-sky-300 pb-0 mb-0"}}},{header:n(()=>[l("div",ge,[l("div",null,[t(le,{"origen-id":a.data.id,"origen-nombre":a.data.nombre,productos:d(r).productos,"onUpdate:valor":e[1]||(e[1]=i=>G(i)),"disabled-status":!d(r).productos||!d(r).productos.length},null,8,["origen-id","origen-nombre","productos","disabled-status"])]),h.value==!1?(b(),y("div",ve,[a.data.id==2?B((b(),A(x,{key:0,disabled:!d(r).productos||!d(r).productos.length,class:"w-auto rounded bg-red-700 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:e[2]||(e[2]=F(i=>q(),["prevent"]))},{default:n(()=>[Ce]),_:1},8,["disabled"])),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):g("",!0)])):g("",!0)])]),default:n(()=>[t(s,{selectionMode:"multiple",headerStyle:"width: 3rem",pt:{headerCell:{class:"text-center bg-sky-300"},bodyCell:{class:"text-center"}}}),t(s,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),t(s,{header:"Imagen",select:"",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:n(i=>[l("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:i.data.imagen,alt:"image"},null,8,we)]),_:2},1024),t(s,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96"}}}),t(s,{field:"bultos",header:"Bultos",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(s,{field:"pcs_bulto",header:"Pcs por Bulto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),t(s,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}})]),_:2},1032,["value","filters","selection"])])]),default:n(()=>[t(s,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),t(s,{sortable:"",field:"nombre",header:"Depósito",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),t(s,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:" mx-2"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(a=>[S(V(a.data.productos.length),1)]),_:1}),t(s,{header:"",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:"mx-2 text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:n(a=>[l("div",ce,[d(L).includes("exportar-depositos")?B((b(),y("div",ue,[l("a",{href:o.route("depositos.exportar",a.data.id),target:"_blank",class:"py-auto p-2 text-xl"},xe,8,pe)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):g("",!0),d(I).includes("Super Administrador")||d(I).includes("Administrador")?(b(),y("div",be,[a.data.id>2&&a.data.productos.length==0?B((b(),A(x,{key:0,class:"w-8 h-8 rounded bg-red-700 p-2 text-base font-normal text-white hover:bg-red-600",onClick:F(i=>z(a.data.id),["prevent"])},{default:n(()=>[he]),_:2},1032,["onClick"])),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):g("",!0)])):g("",!0)])]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}},Ye=re(ye,[["__scopeId","data-v-075500c8"]]);export{Ye as default};
