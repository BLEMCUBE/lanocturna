import{_ as V}from"./AppLayout-9c5ade44.js";import{K as i,l as c,h as T,F as N,m as u,p as j,f as b,a as t,u as p,w as l,q as O,O as L,o as w,Z as A,b as a,t as D,v as S,g as B,d as f}from"./app-1100dd31.js";import{i as E}from"./es.es-6c852dc4.js";import{h as m}from"./moment-fbc5633a.js";import{s as g,a as F,e as I,b as R,c as U}from"./index-3b59ec08.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"card px-4 mb-4 col-span-12 rounded-lg"},$=a("div",{class:"col-span-full flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},"Listado Productos más vendidos")],-1),q={class:"grid grid-cols-12 gap-4 mt-4 mb-2"},z={class:"grid grid-cols-1 col-span-full gap-4 lg:grid-cols-12 mt-2 2lg:grid-cols-12"},H={class:"col-span-1 md:col-span-3 lg:col-span-3"},Z={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},G={class:"flex justify-content-end text-md"},J={key:0,class:"w-10 h-8 ml-5 rounded flex justify-center items-center text-base font-semibold text-white mr-1"},Q=a("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),W=["src"],X="Productos Vendidos",de={__name:"ProductosVendidos",setup(ee){i().props.auth;const{roles:v}=i().props.auth,x=c([]),_=c(),s=c(),h=e=>{e[0]!=null&&e[1]!=null&&(L.get("/reportes-productos-vendidos/",{inicio:m(e[0]).format("YYYY-MM-DD"),fin:m(e[1]).format("YYYY-MM-DD")},{preserveState:!0,onSuccess:()=>{_.value=i().props.total_cantidad,x.value=i().props.total_productos}}),s.value=[m(e[0]).format("YYYY-MM-DD"),m(e[1]).format("YYYY-MM-DD")])},Y=()=>{if(s.value[0]!=null&&s.value[1]!=null)window.open(route("reportes.exportproductoventas",[{inicio:s.value[0],fin:s.value[1]}]),"_blank");else return};T(()=>{s.value=[g(new Date,30),new Date],h(s.value)});const d=c({global:{value:null,matchMode:N.CONTAINS}}),y=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[g(new Date,1),g(new Date,1)]}},{text:"Este mes",onClick(){return[F(new Date),I(new Date)]}},{text:"Este año",onClick(){return[R(new Date),U(new Date)]}}];return(e,n)=>{const k=u("InputText"),C=u("Button"),r=u("Column"),M=u("DataTable"),P=j("tooltip");return w(),b(O,null,[t(p(A),{title:"Reporte Ventas"}),t(V,{pagina:[{label:"Reportes",link:!1},{label:X,link:!1}]},{default:l(()=>[a("div",K,[$,a("div",q,[a("div",z,[a("div",H,[t(p(E),{onChange:h,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",value:s.value,"onUpdate:value":n[0]||(n[0]=o=>s.value=o),shortcuts:y,lang:"es",clearable:!1,placeholder:"seleccione Fecha"},null,8,["value"])])]),a("div",Z,[a("b",null," TOTAL CANTIDADES : "+D(_.value)+" ",1),t(M,{size:"small",filters:d.value,"onUpdate:filters":n[3]||(n[3]=o=>d.value=o),value:x.value,paginator:!0,rows:20,rowsPerPageOptions:[20,40,100,200],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},{header:l(()=>[a("div",G,[t(k,{modelValue:d.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=o=>d.value.global.value=o),placeholder:"Buscar"},null,8,["modelValue"]),p(v).includes("Super Administrador")||p(v).includes("Administrador")?S((w(),b("div",J,[t(C,{onClick:n[2]||(n[2]=o=>Y()),pt:{root:{class:"py-auto px-3 py-2.5 text-xl bg-green-600 border-none hover:bg-green-500"}}},{default:l(()=>[Q]),_:1})])),[[P,{value:"Descargar Excel",pt:{text:"bg-gray-500 text-xs text-white rounded"}},void 0,{top:!0}]]):B("",!0)])]),empty:l(()=>[f(" No existe Resultado ")]),loading:l(()=>[f(" Cargando... ")]),default:l(()=>[t(r,{field:"sku",header:"SKU"}),t(r,{field:"imagen",header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"w-10"}}},{loading:l(()=>[]),body:l(o=>[a("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:o.data.imagen,alt:"image"},null,8,W)]),_:1}),t(r,{field:"nombre",header:"Nombre",sortable:""}),t(r,{field:"ventas_totales",header:"Ventas Totales",sortable:"",pt:{bodyCell:{class:"flex justify-center text-center w-14"},headerCell:{class:"w-14"}}}),t(r,{field:"porcentaje",header:"Porcentaje",sortable:"",pt:{bodyCell:{class:"text-center w-20"},headerCell:{class:"w-20"}}},{body:l(o=>[f(D(o.data.porcentaje)+" % ",1)]),_:1})]),_:1},8,["filters","value"])])])])]),_:1},8,["pagina"])],64)}}};export{de as default};
