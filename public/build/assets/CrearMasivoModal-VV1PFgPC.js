import{r as i,R as D,f as u,g as m,W as a,E as r,Y as b,j as e,y as P,z as S,u as z,F as j,A,D as h}from"./@vue-BLfC86mR.js";import{_ as N}from"./InputError-DdpGOVhM.js";import{_ as $}from"./InputLabel-CkCrW4zf.js";import{T as B,O as L}from"./@inertiajs-B6DOW0KO.js";import{aG as T,h as n}from"./primevue-B_pu_EB_.js";import"./axios-Dq7h7Pqt.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-Dzj_DFKn.js";import"./side-channel-DZFSYYHh.js";import"./get-intrinsic-gH0OeWJ1.js";import"./has-symbols-CABd5qHC.js";import"./has-proto-CpIZBmUT.js";import"./function-bind-C4RYm_-a.js";import"./has-D2ofp1JE.js";import"./call-bind-7ir4MDz-.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const V={class:"space-y-4"},I={class:"h-8"},O={class:"px-2 grid grid-cols-6 gap-2 md:gap-3 mb-2"},U={class:"col-span-12 md:col-span-6 shadow-default lg:col-span-6 mx-2 py-2"},G=["disabled"],R={class:"flex justify-end py-2"},W={class:"h-8"},Y={key:0},q=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos ya existen registrado. ",-1),H={class:"w-full border"},J=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku "),e("th",{class:"text-center border"}," CÃ³digo de barra ")])],-1),K={class:"w-full text-center border"},Q={class:"text-center border"},X={class:"text-center border"},Z={class:"text-center border"},ee=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),te={class:"flex justify-end py-3"},se="Producto Masivo",y="productos",Ce={__name:"CrearMasivoModal",setup(oe){const g=T(),c=i(!1),f=i(!1),v=i(null),_=i(),d=i(!1),s=B({archivo:""}),w=t=>{s.clearErrors(),t.preventDefault(),s.archivo=t.target.files[0]},C=()=>{s.reset("archivo"),d.value=!1},k=()=>{c.value=!0},x=()=>{v.value.value=null,s.reset("archivo"),c.value=!1},M=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},E=()=>{f.value=!0,s.clearErrors(),s.post(route(y+".storemasivo"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,F("success","Mensaje","Productos creados"),setTimeout(()=>{L.get(route(y+".index"))},1e3)},onFinish:()=>{},onError:t=>{f.value=!1,v.value.value=null,s.reset("archivo"),t.filas!=null&&t.filas.length>0&&(_.value=t.filas,x(),d.value=!0)}})},F=(t,o,p)=>{g.add({severity:t,summary:o,detail:p,life:3e3})};return(t,o)=>{const p=D("Dialog");return m(),u("section",V,[a(r(n),{size:"small",onClick:k,type:"button",label:"Crear Producto Masivo",severity:"success"}),a(p,{visible:c.value,"onUpdate:visible":o[1]||(o[1]=l=>c.value=l),modal:"",header:"Crear "+se,style:{width:"40vw"},position:"top",pt:{header:{class:"mt-6 px-4 py-2"},content:{class:"px-4 py-2"}}},{default:b(()=>[e("div",I,[a(r(n),{label:"Descargar formato",severity:"success",type:"button",class:"p-1 text-xs ring-0 font-medium",onClick:o[0]||(o[0]=l=>M("formato_crear_masivo_productos.xlsx"))})]),e("div",O,[e("div",U,[a($,{for:"file_input1",value:"Importar Excel",class:"block text-base font-medium leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:v,onInput:w,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:r(s).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,G),a(N,{class:"mt-1 text-xs",message:r(s).errors.archivo},null,8,["message"])])]),e("div",R,[a(r(n),{label:"Cancelar",pt:{root:"mr-5 py-0"},severity:"danger",onClick:x,type:"button"}),e("div",W,[a(r(n),{label:"Crear Productos",type:"button",class:S(["text-normal",{"opacity-50":r(s).processing}]),disabled:r(s).processing,onClick:P(E,["prevent"])},null,8,["class","disabled","onClick"])])])]),_:1},8,["visible","header"]),a(p,{visible:d.value,"onUpdate:visible":o[3]||(o[3]=l=>d.value=l),modal:"",style:{width:"40vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:b(()=>[ee]),default:b(()=>[_.value.length>0?(m(),u("div",Y,[q,e("table",H,[J,e("tbody",null,[(m(!0),u(j,null,A(_.value,l=>(m(),u("tr",K,[e("td",Q,h(l.fila),1),e("td",X,h(l.sku),1),e("td",Z,h(l.codigo_barra),1)]))),256))])])])):z("",!0),e("div",te,[a(r(n),{label:"Aceptar",size:"small",type:"button",onClick:o[2]||(o[2]=l=>C())})])]),_:1},8,["visible"])])}}};export{Ce as default};
