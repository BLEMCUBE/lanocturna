import{l as $,k as C,K as S,T as j,h as O,F as z,m as _,A as R,f as d,a as t,u as o,w as l,p as q,o as u,Z as G,b as a,t as H,v as K,d as T,B as s,C as f,e as g,g as y,O as p}from"./app-da52df30.js";import{_ as P}from"./AppLayout-ad6a5584.js";import{S as U}from"./sweetalert2.all-e30d0676.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},Z={class:"px-3 pb-4 col-span-full flex justify-between items-center"},J={class:"align-middle"},L={class:"flex justify-content-end text-md"},Q=["src"],X=["onClick"],Y=a("i",{class:"fas fa-eye"},null,-1),ee=[Y],te=["onClick"],oe=a("i",{class:"fas fa-edit"},null,-1),se=[oe],ae=["onClick"],re=a("i",{class:"fas fa-trash-alt"},null,-1),le=[re],v="Productos",i="productos",me={__name:"Index",setup(ne){const B=$(),w=C(),{permissions:m}=S().props.auth,F=j({id:""}),V=e=>{if(parseFloat(e.stock)<=parseFloat(e.stock_minimo)&&parseFloat(e.stock)==parseFloat(e.stock_futuro))return["bg-red-700 text-xs text-white"];if(parseFloat(e.stock)<=parseFloat(e.stock_minimo)&&parseFloat(e.stock_futuro)>parseFloat(e.stock))return"bg-orange-500 text-xs text-white"},E=e=>{p.get(route(i+".show",e))},D=e=>{p.get(route(i+".edit",e))},N=(e,n)=>{U.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+n,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(h=>{h.isConfirmed&&F.delete(route(i+".destroy",e),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{A("success","Eliminado","Se ha eliminado"),setTimeout(()=>{p.get(route(i+".index"))},1e3)}})})};O(()=>{w.value=S().props.productos.data});const A=(e,n,c)=>{B.add({severity:e,summary:n,detail:c,life:3e3})},I=()=>{p.get(route(i+".create"))},b=C({global:{value:null,matchMode:z.STARTS_WITH}});return(e,n)=>{const c=_("Toast"),h=_("InputText"),M=_("DataTable"),x=R("tooltip");return u(),d(q,null,[t(o(G),{title:v}),t(P,{pagina:[{label:v,link:!1}]},{default:l(()=>[a("div",W,[t(c),a("div",Z,[a("h5",{class:"text-2xl font-medium"},H(v)),t(o(K),{size:"small",label:"Agregar Producto",severity:"success",onClick:I})]),a("div",J,[t(M,{rowClass:V,showGridlines:"",filters:b.value,value:w.value,paginator:"",rows:10,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",size:"small"},{header:l(()=>[a("div",L,[t(h,{modelValue:b.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=r=>b.value.global.value=r),placeholder:"Buscar"},null,8,["modelValue"])])]),empty:l(()=>[T(" No existe Resultado ")]),loading:l(()=>[T(" Cargando... ")]),default:l(()=>[t(o(s),{field:"origen",header:"Origen",sortable:""}),t(o(s),{field:"imagen",header:"Imagen",style:{width:"60px"},pt:{bodyCell:{class:"flex justify-center text-center"}}},{body:l(r=>[a("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-12 h-12 object-contain",src:r.data.imagen,alt:"image description"},null,8,Q)]),_:1}),t(o(s),{field:"nombre",header:"Nombre",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{field:"aduana",header:"Aduana",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{field:"codigo_barra",header:"Código barra",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{field:"stock",sortable:"",header:"Stock",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{field:"stock_minimo",sortable:"",header:"Stock mínimo",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{field:"stock_futuro",sortable:"",header:"Stock futuro",pt:{bodyCell:{class:"text-center"}}}),t(o(s),{header:"Acciones",style:{width:"130px"}},{body:l(r=>[o(m).includes("editar-productos")?f((u(),d("button",{key:0,class:"w-8 h-8 rounded bg-yellow-500 px-2 py-1 text-base font-normal text-black m-1 hover:bg-yellow-400",onClick:g(k=>E(r.data.id),["prevent"])},ee,8,X)),[[x,{value:"Ver",pt:{text:"bg-gray-500 p-1 m-0 text-xs text-white rounded"}},void 0,{top:!0}]]):y("",!0),o(m).includes("editar-productos")?f((u(),d("button",{key:1,class:"w-8 h-8 rounded bg-primary-900 px-2 py-1 text-base font-normal text-white m-1 hover:bg-primary-100",onClick:g(k=>D(r.data.id),["prevent"])},se,8,te)),[[x,{value:"Editar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):y("",!0),o(m).includes("eliminar-productos")?f((u(),d("button",{key:2,class:"w-8 h-8 rounded bg-red-700 px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:g(k=>N(r.data.id,r.data.nombre),["prevent"])},le,8,ae)),[[x,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):y("",!0)]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{me as default};
