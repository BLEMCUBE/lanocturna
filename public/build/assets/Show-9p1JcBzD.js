import{r as m,o as P,R as f,S as U,f as _,g as h,W as t,E as o,Y as n,j as e,D as s,T as S,C,F as I,A as L,y as H,z as G}from"./@vue-BLfC86mR.js";import{_ as K}from"./AppLayout-CiOD__YY.js";import{K as T,T as W,Z}from"./@inertiajs-CMyvZJ1U.js";import{aG as q,aH as J,h as b}from"./primevue-B_pu_EB_.js";import{h as F}from"./moment-D15uM1gO.js";import Q from"./EditarModal-DZ1dLGxH.js";import X from"./EditarProductoModal-Cww-429L.js";import{_ as ee}from"./InputError-DdpGOVhM.js";import{_ as te}from"./InputLabel-CkCrW4zf.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-5zhdP7Ax.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./vue-datepicker-next-MGkLgL3F.js";import"./date-format-parse-DuecP4dO.js";const oe={class:"card px-4 mb-0 bg-white col-span-12 justify-center md:col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-10 dark:border-gray-700 dark:bg-gray-800"},le={class:"px-0 py-1 m-2 mt-0 text-white col-span-full flex justify-end items-center"},se={class:"px-3 py-1.5 w-auto h-8 rounded bg-yellow-500 flex justify-center items-center text-xs font-normal text-black mr-2 hover:bg-yellow-600"},ae=["href"],re=e("i",{class:"fa-solid fa-file-arrow-down mr-1"},null,-1),ie={class:"inline-block rounded bg-primary-900 px-2 my-0 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},ne={class:"grid grid-cols-6 my-2 col-span-12"},ce={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},de=e("b",null," No. de Carpeta:",-1),pe={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},me=e("b",null," BL o No. de Contenedor:",-1),ue={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},fe=e("b",null," Estado:",-1),_e={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},he=e("b",null," Mueve Stock:",-1),be={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},xe=e("b",null,"Total:",-1),ge={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},ve=e("b",null,"Fecha En Camino :",-1),ye={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},Ce=e("b",null,"Fecha Arribado :",-1),we={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},ke=e("b",null,"Cantidad productos :",-1),De={class:"mx-5 col-span-6 gap-2 m-1 lg:col-span-3 flex"},Me=e("b",null,"Costo CIF :",-1),Se={class:"bg-white mr-0 ml-0 mt-6 shadow rounded-lg border border-gray-300"},Ie={class:"bg-gray-100 rounded-t-lg py-2 px-3"},Te={class:"text-2xl font-medium pb-0 pl-2"},Fe=e("div",{class:"bg-gradient-to-r from-primary-900 to-primary-100 h-1 mb-0"},null,-1),Be={class:"align-middle"},je={class:"flex justify-content-end text-md"},ze={class:"flex items-center"},Ne={class:"w-20"},Ee=["src"],Re={class:"text-xs text-center flex-wrap"},Ye=e("p",{class:"mb-2 font-bold text-md"}," Listado ",-1),Ae={class:"w-full border"},Ve=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),$e={class:"w-full text-center border"},Oe={class:"text-center border"},Pe={class:"text-center border"},Ue=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-bold text-2xl m-3"},"No se ha podido importar")],-1),Le={class:"flex justify-end py-3"},He=["onSubmit"],Ge={class:"px-2 grid grid-cols-6 gap-4 md:gap-3 2xl:gap-6 mb-2"},Ke={class:"col-span-12 shadow-default lg:col-span-12"},We={class:"flex justify-end py-3"},w="Detalle ImportaciÃ³n",B="importaciones",Et={__name:"Show",setup(Ze){const j=q(),{importacion:r}=T().props,{importacion_detalle:x}=T().props,p=m(!1),u=m(!1),z=m(null),g=m(),k=m(),v=m({global:{value:null,matchMode:J.CONTAINS}}),N=()=>{c.reset("archivo"),u.value=!1},E=l=>{l.preventDefault(),c.archivo=l.target.files[0]},R=()=>{c.reset(),c.clearErrors(),p.value=!1},c=W({archivo:"",importacion_id:r.id}),Y=()=>{p.value=!0},A=()=>{c.clearErrors(),c.post(route(B+".costoreal"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p.value=!1,V("success","Mensaje","Costo real creado"),setTimeout(()=>{location.reload()},1e3)},onFinish:()=>{},onError:l=>{l.filas!=null&&(p.value=!1,l.filas.length>0&&(g.value=l.filas,u.value=!0)),l.error_sku!=null&&(p.value=!1,l.error_sku.length>0&&(g.value=l.error_sku,u.value=!0))}})},V=(l,d,y)=>{j.add({severity:l,summary:d,detail:y,life:3e3})};P(()=>{k.value=Array.from(x,l=>l)});const $=l=>{document.getElementById("show-"+l.data.id).click()};return(l,d)=>{const y=f("InputText"),i=f("Column"),O=f("DataTable"),D=f("Dialog"),M=U("tooltip");return h(),_(I,null,[t(o(Z),{title:w}),t(K,{pagina:[{label:"Importaciones",link:!0,url:l.route(B+".index")},{label:w,link:!1}]},{default:n(()=>[e("div",oe,[e("div",{class:"mb-5 px-3 col-span-full flex justify-between items-center"},[e("h5",{class:"text-2xl font-medium"},s(w))]),e("div",le,[S((h(),_("span",se,[e("a",{href:l.route("importaciones.exportarcostoreal",o(r).id),target:"_blank",class:"py-auto"},[re,C(" Descargar formato ")],8,ae)])),[[M,{value:"Descargar Formato",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),S(t(o(b),{size:"small",onClick:Y,icon:"fa-solid fa-file-arrow-up",type:"button",label:"Subir Costo Real",pt:{root:"ouline-none bg-green-600 mr-2 border-0 h-8 hover:bg-green-700 text-white",label:"text-xs font-normal"}},null,512),[[M,{value:"Subir Costo Real",pt:{text:"bg-gray-500 p-1  text-xs text-white rounded"}},void 0,{top:!0}]]),e("span",ie,[t(Q,{clienteId:o(r).id},null,8,["clienteId"])])]),e("div",ne,[e("div",ce,[de,e("p",null,s(o(r).nro_carpeta),1)]),e("div",pe,[me,e("p",null,s(o(r).nro_contenedor),1)]),e("div",ue,[fe,e("p",null,s(o(r).estado),1)]),e("div",_e,[he,e("p",null,s(o(r).mueve_stock?" SI ":" NO "),1)]),e("div",be,[xe,e("p",null,s(o(r).total),1)]),e("div",ge,[ve,e("p",null,s(o(F)(o(r).fecha_camino).format("DD/MM/YYYY")),1)]),e("div",ye,[Ce,e("p",null,s(o(F)(o(r).fecha_arribado).format("DD/MM/YYYY")),1)]),e("div",we,[ke,e("p",null,s(o(x).length),1)]),e("div",De,[Me,e("p",null,s(o(r).costo_cif),1)])]),e("div",Se,[e("div",Ie,[e("h2",Te,"Productos ("+s(o(x).length)+") ",1)]),Fe,e("div",Be,[t(O,{sortField:"id",sortOrder:1,filters:v.value,value:k.value,scrollable:"",scrollHeight:"700px",resizableColumns:"",columnResizeMode:"expand",paginator:"",rows:50,onRowClick:$,pt:{bodyRow:{class:"hover:cursor-pointer hover:bg-gray-100 hover:text-black"}},size:"small"},{header:n(()=>[e("div",je,[t(y,{modelValue:v.value.global.value,"onUpdate:modelValue":d[0]||(d[0]=a=>v.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"])])]),empty:n(()=>[C(" No existe Resultado ")]),loading:n(()=>[C(" Cargando... ")]),default:n(()=>[t(i,{field:"sku",header:"Origen",sortable:"",pt:{bodyCell:{class:"text-center"},headerContent:{class:"break-words "}}}),t(i,{field:"imagen",header:"Referencia",pt:{bodyCell:{class:"flex items-center"},bodyCellContent:{class:"flex items-center"}}},{body:n(a=>[e("div",ze,[e("div",Ne,[e("img",{class:"rounded bg-white shadow-2xl text-center w-20 h-14 object-contain mr-2",src:a.data.imagen,alt:"image"},null,8,Ee)]),e("p",Re,s(a.data.nombre),1)])]),_:1}),t(i,{field:"precio",header:"Precio",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(i,{field:"unidad",header:"Unidad",sortable:"",pt:{bodyCell:{class:"text-center"}}}),t(i,{field:"pcs_bulto",header:"PCS Bulto",sortable:"",pt:{bodyCell:{class:"text-center"},headerContent:{class:"text-center break-all"}}}),t(i,{field:"bultos",sortable:"",header:"Bultos",pt:{bodyCell:{class:"text-center"},headerCell:{class:"text-center"}}}),t(i,{field:"cantidad_total",sortable:"",header:"Cantidad Total",pt:{bodyCell:{class:"text-center"}}}),t(i,{field:"valor_total",sortable:"",header:"Valor Total",pt:{bodyCell:{class:"text-center"}}}),t(i,{field:"cbm_bulto",sortable:"",header:"CBM/Bulto",pt:{bodyCell:{class:"text-center"},headerContent:{class:"text-center break-all"}}}),t(i,{field:"cbm_total",sortable:"",header:"Total CBM",pt:{bodyCell:{class:"text-center"}}}),t(i,{pt:{bodyCell:{class:"hidden"},headerCell:{class:"hidden"}}},{body:n(a=>[t(X,{clienteId:a.data.id},null,8,["clienteId"])]),_:1})]),_:1},8,["filters","value"])])]),t(D,{visible:u.value,"onUpdate:visible":d[1]||(d[1]=a=>u.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[Ue]),default:n(()=>[Ye,e("table",Ae,[Ve,e("tbody",null,[(h(!0),_(I,null,L(g.value,a=>(h(),_("tr",$e,[e("td",Oe,s(a.fila),1),e("td",Pe,s(a.sku),1)]))),256))])]),e("div",Le,[t(o(b),{label:"Aceptar",size:"small",type:"button",onClick:N})])]),_:1},8,["visible"]),t(D,{visible:p.value,"onUpdate:visible":d[2]||(d[2]=a=>p.value=a),modal:"",header:"Subir Costo Real",style:{width:"30vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 "},content:{class:"p-4 lg:p-4"}}},{default:n(()=>[e("form",{onSubmit:H(A,["prevent"])},[e("div",Ge,[e("div",Ke,[t(te,{for:"file_input1",value:"Archivo Excel",class:"block text-base font-medium leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:z,onInput:E,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,544),t(ee,{class:"mt-1 text-xs",message:o(c).errors.archivo},null,8,["message"])])]),e("div",We,[t(o(b),{label:"Cancelar",pt:{root:"mr-5 py-1 text-xs font-normal"},severity:"danger",size:"small",onClick:R,type:"button"}),t(o(b),{label:"Subir",pt:{root:"mr-5 py-1 text-xs font-normal"},size:"small",type:"submit",class:G({"opacity-50":o(c).processing}),disabled:o(c).processing},null,8,["class","disabled"])])],40,He)]),_:1},8,["visible"])])]),_:1},8,["pagina"])],64)}}};export{Et as default};
