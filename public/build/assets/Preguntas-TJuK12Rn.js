import{r as k,o as N,e as c,f as l,Q as f,ab as y,S as C,i as s,y as o,F as w,u as L,j as b,x as h,p as O,P as S,O as A,a0 as K}from"./@vue-BG0wrCoO.js";import{_ as z}from"./AppLayout-DGXGhT07.js";import{K as p,T as v,Z as Q,O as Z}from"./@inertiajs-BPLxF6VH.js";import{_ as F}from"./CheckboxName-BpBT_XwE.js";import q from"./ModalRepuestaRapidas-l4IWbptM.js";import"./sweetalert2-DhUVDY3P.js";import{u as G}from"./customToast-BHcAeENZ.js";import"./logo-C8Jea0Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./primevue-DlS7f910.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./InputError-cOM6HFrc.js";const H={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},J={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},W={class:"md:col-span-8 xl:col-span-9"},X={class:"bg-white rounded-xl shadow p-6 my-5"},Y={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 border-b pb-4"},I={class:"flex items-start gap-2 w-full"},ee=["src"],te={class:"w-full"},se=["href"],ae={class:"mx-3 text-xs text-gray-500"},oe={class:"inline-block bg-blue-700 text-white text-xs font-normal px-2 py-0.5 rounded"},re={key:0,class:"text-xs text-gray-700 mt-1"},ie={class:"font-medium"},le={class:"text-base font-semibold text-blue-600 mt-1"},ue={class:"text-base text-gray-600 mt-1"},ne=["href"],ce={key:0,class:"px-1"},de=s("i",{class:"fa fa-map-marker-alt text-gray-500"},null,-1),pe={key:0},me={class:"mt-3 flex"},_e={class:"font-medium text-gray-800 mb-1"},he={class:"ml-3 text-gray-500 text-xs flex items-center gap-1"},fe=s("i",{class:"far fa-clock"},null,-1),be=["onSubmit"],ve=["onUpdate:modelValue","onFocus"],ge=s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700"}," Enviar respuesta ")],-1),xe={class:"md:col-span-4 xl:col-span-3"},ke={class:"bg-white rounded-xl shadow p-5 fixed overflow-y-auto"},ye=s("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),we={class:"hidden sm:block flex-wrap gap-2 mb-4"},T="mercadolibre.preguntas",lt={__name:"Preguntas",setup(Se){const{setShow:g}=G(),{items:P}=p().props,{saludo:U}=p().props,{firma:$}=p().props,{client_id:m}=p().props,{tienda:j}=p().props,x=`ML Preguntas "${j}"`,i=k([]),d=k(null);v({id:""}),v({id:""});const r=v({pregunta_id:null,client_id:null,from_user_id:null,text:null,payload:null});N(()=>{P.data.forEach(e=>{i.value.push({id:e.id,pregunta_id:e.pregunta_id,client_id:m,pregunta:e.pregunta,publicado:e.publicado,from_user_id:e.from_user_id,haveSaludo:!0,haveFirma:!0,saludo:U.value,firma:$.value,respuesta:"",producto:{thumbnail:e.producto.thumbnail,title:e.producto.title,id:e.producto.id,sku:e.producto.sku,permalink:e.producto.permalink,base_price:e.producto.base_price,listing_type_id:e.producto.listing_type_id},usuario:{nickname:e.usuario.nickname,permalink:e.usuario.permalink,city:e.usuario.city,state:e.usuario.state}})})});const E=e=>{d.value=e},M=e=>{if(i.value[e].respuesta.trim().length===0){g("error","Error","Por favor ingresá una respuesta.");return}V(e),r.clearErrors(),r.post(route(T+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{g("success","Mensaje","Respuesta enviada"),setTimeout(()=>{Z.get(route(T+".lista",m))},500)},onFinish:()=>{},onError:()=>{}})},R=e=>{d.value!==null&&(i.value[d.value].respuesta=e.respuesta,n(d.value),d.value=null)},V=e=>{if(e!==null){let a=i.value[e];r.pregunta_id=a.pregunta_id,r.client_id=m,r.from_user_id=a.from_user_id,r.payload=a,n(e)}},B=(e,a)=>{if(e!==null){let t=i.value[e];a?(t.haveSaludo=!0,n(e)):(t.haveSaludo=!1,n(e))}},D=(e,a)=>{if(e!==null){let t=i.value[e];a?(t.haveFirma=!0,n(e)):(t.haveFirma=!1,n(e))}},n=e=>{if(e!==null){let a=i.value[e];switch(!0){case(a.haveSaludo==!0&&a.haveFirma==!1):r.text=a.saludo+`
`+a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!1):r.text=a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!0):r.text=a.respuesta+`
`+a.firma;break;default:r.text=a.saludo+`
`+a.respuesta+`
`+a.firma;break}}};return(e,a)=>(l(),c(w,null,[f(y(Q),{title:"Mercado Libre-Preguntas"}),f(z,{pagina:[{label:x,link:!1}]},{default:C(()=>[s("div",H,[s("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[s("h5",{class:"text-2xl font-medium"},o(x))]),s("div",J,[s("div",W,[(l(!0),c(w,null,L(i.value,(t,_)=>(l(),c("div",X,[s("div",Y,[s("div",I,[s("img",{src:t.producto.thumbnail,alt:"Producto",class:"w-16 h-16 rounded object-cover"},null,8,ee),s("div",te,[s("span",null,[s("a",{href:t.producto.permalink,class:"text-gray-800 font-medium text-sm hover:text-blue-600",target:"_blank"},o(t.producto.title),9,se)]),s("span",ae,o(t.producto.id),1),s("span",oe,o(t.producto.listing_type_id),1),t.producto.sku?(l(),c("div",re,[h(" SKU: "),s("span",ie,o(t.producto.sku),1)])):b("",!0),s("div",le,"$"+o(t.producto.base_price)+" ",1),s("div",ue,[s("a",{href:t.usuario.permalink,target:"_blank",class:"text-blue-500 hover:underline"},o(t.usuario.nickname),9,ne),t.usuario.city?(l(),c("span",ce,[h(" | "),de,h(" "+o(t.usuario.city)+" ",1),t.usuario.state?(l(),c("span",pe," , "+o(t.usuario.state),1)):b("",!0)])):b("",!0)])])])]),s("div",me,[s("span",_e,o(t.pregunta),1),s("span",he,[fe,h(" "+o(t.publicado),1)])]),s("form",{class:"mt-6 space-y-4",onSubmit:O(u=>M(_),["prevent"])},[(l(),S(F,{"onUpdate:checked":u=>B(_,u),label:t.saludo,key:t.id,checked:t.haveSaludo},null,8,["onUpdate:checked","label","checked"])),A(s("textarea",{rows:"2","onUpdate:modelValue":u=>t.respuesta=u,placeholder:"Ingresá tu respuesta",onFocus:u=>E(_),class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,40,ve),[[K,t.respuesta]]),(l(),S(F,{"onUpdate:checked":u=>D(_,u),label:t.firma,key:t.id,checked:t.haveFirma},null,8,["onUpdate:checked","label","checked"])),ge],40,be)]))),256))]),s("div",xe,[s("div",ke,[ye,s("div",we,[f(q,{onAddTexto:R,"app-id":y(m),tipo:"pregunta"},null,8,["app-id"])])])])])])]),_:1},8,["pagina"])],64))}};export{lt as default};
