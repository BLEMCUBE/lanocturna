import{r as b,o as P,M as f,N as $,e as h,f as i,Q as g,S as v,i as t,x as y,y as n,ab as s,F as L,u as R,O as V,j as C,P as w,p as D,q as Y}from"./@vue-BG0wrCoO.js";import{K as j,T as k}from"./@inertiajs-BPLxF6VH.js";import{a as z}from"./axios-ngrFHoWO.js";import"./vue-datepicker-next-BBtlwD79.js";import{h as T}from"./moment-D15uM1gO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./date-format-parse-DuecP4dO.js";const G={class:"px-2 pt-0 pb-0 grid grid-cols-12 gap-2 mb-2"},O={class:"col-span-12"},q=t("b",null,"Costo CIF: ",-1),H=t("div",{class:"col-span-12"},[t("p",null,[t("b",null,"Pagos Ingresados: ")])],-1),K={class:"col-span-12"},Q={class:"w-full border"},U=t("thead",null,[t("tr",{class:"w-full border text-[14px]"},[t("th",{class:"w-26 text-center border"}," Fecha "),t("th",{class:"text-center border"}," Banco "),t("th",{class:"text-center border"}," Nro. de Transacción "),t("th",{class:"text-center border"}," Monto "),t("th",{class:"text-center border"}," Acciones ")])],-1),J={class:"w-full text-center border text-xs"},W={class:"text-center border text-[14px]"},X={class:"text-center border text-[14px]"},Z={class:"text-center border text-[14px]"},tt={class:"text-center border text-[14px]"},ot={class:"text-center border text-[14px]"},et=t("i",{class:"fas fa-trash-alt text-[14px] text-center"},null,-1),st={class:"col-span-12 pt-2"},rt=t("b",null,"Saldo: ",-1),at={class:"flex justify-end py-3"},F="pagos-importaciones",St={__name:"DetalleModal",props:{importacionId:{type:Number,default:null},showDetalle:{type:Boolean,default:!1}},emits:["pass-info"],setup(I,{emit:M}){const d=I,{permissions:N}=j().props.auth,A=k({id:""}),m=b(!1),l=b("CANCELAR"),o=k({id:"",nro_carpeta:"",costo_cif:"",pagos:[],pagado:"",saldo:""}),E=r=>{A.delete(route(F+".destroy",r),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x(d.importacionId),l.value="ELIMINADO",c()}})},B=()=>{l.value="AGREGAR",c()};P(()=>{x(d.importacionId)});function c(){M("pass-info",{store:l.value,importacionId:d.importacionId})}const x=r=>{z.get(route(F+".showdetalle",r)).then(p=>{var e=p.data.importacion;o.id=e.id,o.nro_carpeta=e.nro_carpeta,o.costo_cif=e.costo_cif,o.pagos=e.importaciones_pagos,o.pagado=e.importaciones_pagos.reduce((u,_)=>u+parseFloat(_.monto),0).toFixed(2),o.saldo=e.costo_cif-o.pagado,m.value=!0})},S=()=>{o.reset(),o.clearErrors(),l.value="CANCELAR",c()};return(r,p)=>{const e=f("Button"),u=f("Dialog"),_=$("tooltip");return i(),h("section",null,[g(u,{visible:m.value,"onUpdate:visible":p[0]||(p[0]=a=>m.value=a),onHide:c,modal:"",header:`Pagos importación: ${s(o).nro_carpeta}`,style:{width:"40vw"},position:"top",pt:{header:{class:"mt-4 p-2"},content:{class:"p-2"}}},{default:v(()=>[t("form",null,[t("div",G,[t("div",O,[t("p",null,[q,y(" "+n(r.$numberFormat(s(o).costo_cif)),1)])]),H,t("div",K,[t("table",Q,[U,t("tbody",null,[(i(!0),h(L,null,R(s(o).pagos,a=>(i(),h("tr",J,[t("td",W,n(s(T)(a.fecha_pago).format("DD/MM/YYYY")),1),t("td",X,n(a.banco),1),t("td",Z,n(a.nro_transaccion),1),t("td",tt,n(r.$numberFormat(a.monto)),1),t("td",ot,[s(N).includes("pagoimportacion-eliminar")?V((i(),w(e,{key:0,class:"w-8 h-8 rounded bg-red-700 border-0 flex justify-center text-center text-base font-normal text-white hover:bg-red-600",onClick:D(nt=>E(a.id),["prevent"])},{default:v(()=>[et]),_:2},1032,["onClick"])),[[_,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):C("",!0)])]))),256))])])]),t("div",st,[t("p",null,[rt,y(" "+n(r.$numberFormat(s(o).saldo)),1)])])]),t("div",at,[g(e,{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:S,type:"button"}),s(o).saldo>0?(i(),w(e,{key:0,label:"Agregar Pago",size:"small",type:"button",onClick:D(B,["prevent"]),class:Y({"opacity-50":s(o).processing}),disabled:s(o).processing},null,8,["onClick","class","disabled"])):C("",!0)])])]),_:1},8,["visible","header"])])}}};export{St as default};
