import{r as i,M as S,e as u,f as m,Q as l,ab as a,S as b,i as e,p as D,q as P,j,F as z,u as N,y as h}from"./@vue-BG0wrCoO.js";import{_ as $}from"./InputError-cOM6HFrc.js";import{_ as A}from"./InputLabel-BIVuqiPx.js";import{T as B,O as L}from"./@inertiajs-BPLxF6VH.js";import{aH as T,h as n}from"./primevue-DlS7f910.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";const V={class:"space-y-4"},I={class:"h-8"},O={class:"px-2 grid grid-cols-6 gap-2 md:gap-3 mb-2"},U={class:"col-span-12 md:col-span-6 shadow-default lg:col-span-6 mx-2 py-2"},q=["disabled"],H={class:"flex justify-end py-2"},Q={class:"h-8"},G={key:0},J=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos ya existen registrado. ",-1),K={class:"w-full border"},R=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku "),e("th",{class:"text-center border"}," CÃ³digo de barra ")])],-1),W={class:"w-full text-center border"},X={class:"text-center border"},Y={class:"text-center border"},Z={class:"text-center border"},ee=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),te={class:"flex justify-end py-3"},se="Producto Masivo",y="productos",Pe={__name:"CrearMasivoModal",setup(oe){const g=T(),c=i(!1),f=i(!1),v=i(null),_=i(),d=i(!1),s=B({archivo:""}),w=t=>{s.clearErrors(),t.preventDefault(),s.archivo=t.target.files[0]},C=()=>{s.reset("archivo"),d.value=!1},k=()=>{c.value=!0},x=()=>{v.value.value=null,s.reset("archivo"),c.value=!1},M=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},F=()=>{f.value=!0,s.clearErrors(),s.post(route(y+".storemasivo"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,E("success","Mensaje","Productos creados"),setTimeout(()=>{L.get(route(y+".index"))},1e3)},onFinish:()=>{},onError:t=>{f.value=!1,v.value.value=null,s.reset("archivo"),t.filas!=null&&t.filas.length>0&&(_.value=t.filas,x(),d.value=!0)}})},E=(t,o,p)=>{g.add({severity:t,summary:o,detail:p,life:3e3})};return(t,o)=>{const p=S("Dialog");return m(),u("section",V,[l(a(n),{size:"small",onClick:k,type:"button",label:"Crear Producto Masivo",severity:"success"}),l(p,{visible:c.value,"onUpdate:visible":o[1]||(o[1]=r=>c.value=r),modal:"",header:"Crear "+se,style:{width:"40vw"},position:"top",pt:{header:{class:"mt-6 px-4 py-2"},content:{class:"px-4 py-2"}}},{default:b(()=>[e("div",I,[l(a(n),{label:"Descargar formato",severity:"success",type:"button",class:"p-1 text-xs ring-0 font-medium",onClick:o[0]||(o[0]=r=>M("formato_crear_masivo_productos.xlsx"))})]),e("div",O,[e("div",U,[l(A,{for:"file_input1",value:"Importar Excel",class:"block text-base font-medium leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:v,onInput:w,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:a(s).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,q),l($,{class:"mt-1 text-xs",message:a(s).errors.archivo},null,8,["message"])])]),e("div",H,[l(a(n),{label:"Cancelar",pt:{root:"mr-5 py-0"},severity:"danger",onClick:x,type:"button"}),e("div",Q,[l(a(n),{label:"Crear Productos",type:"button",class:P(["text-normal",{"opacity-50":a(s).processing}]),disabled:a(s).processing,onClick:D(F,["prevent"])},null,8,["class","disabled","onClick"])])])]),_:1},8,["visible","header"]),l(p,{visible:d.value,"onUpdate:visible":o[3]||(o[3]=r=>d.value=r),modal:"",style:{width:"40vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:b(()=>[ee]),default:b(()=>[_.value.length>0?(m(),u("div",G,[J,e("table",K,[R,e("tbody",null,[(m(!0),u(z,null,N(_.value,r=>(m(),u("tr",W,[e("td",X,h(r.fila),1),e("td",Y,h(r.sku),1),e("td",Z,h(r.codigo_barra),1)]))),256))])])])):j("",!0),e("div",te,[l(a(n),{label:"Aceptar",size:"small",type:"button",onClick:o[2]||(o[2]=r=>C())})])]),_:1},8,["visible"])])}}};export{Pe as default};
