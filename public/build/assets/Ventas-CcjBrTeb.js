import{r as i,o as Q,M as O,N as j,e as c,f as u,Q as a,ab as b,S as Z,i as e,y as r,O as Y,G as J,F as k,u as S,q as T,x as m,p as W}from"./@vue-BG0wrCoO.js";import{_ as X}from"./AppLayout-DGXGhT07.js";import{_ as C}from"./InputLabel-BIVuqiPx.js";import{K as B,Z as ee,O as M}from"./@inertiajs-BPLxF6VH.js";import{i as te}from"./vue-datepicker-next-BBtlwD79.js";import{h as F}from"./moment-D15uM1gO.js";import{_ as oe}from"./Pagination-uFg9EnNQ.js";import{s as N,a as se,e as ae,b as le,c as ne}from"./date-fns-Bj3OEEs3.js";import"./logo-C8Jea0Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./primevue-DlS7f910.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./date-format-parse-DuecP4dO.js";import"./@babel-QjJsDpFa.js";const re={class:"px-4 py-3 mb-4 bg-white col-span-12 2xl:col-span-9"},ie={class:"align-middle"},de={class:"grid grid-cols-6 gap-4 mx-1.5 mt-3 mb-6"},ce={class:"col-span-2"},ue={class:"col-span-2"},me={class:"col-span-2"},pe={class:"bg-white shadow-md border border-gray-300 overflow-hidden"},fe={class:"flex flex-col md:flex-row items-stretch border-b border-dashed border-gray-300"},ve={class:"flex-1 p-4"},_e={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},xe={class:"flex-1"},be={class:"ml-6 my-1 text-lg text-gray-900"},ge={class:"font-semibold text-gray-800"},he={class:"flex flex-row items-center gap-2"},we={class:"w-10 h-10 flex-shrink-0"},ye=["src","alt"],De={class:"px-2"},Ye={class:"mt-1 text-gray-800 font-semibold"},ke={class:"max-w-56 md:w-56 flex flex-col items-start md:items-start justify-between"},Ce=e("div",{class:"font-semibold text-gray-700"},"Comprador",-1),Me={class:"flex items-center gap-2"},Ve=e("i",{class:"fa-regular fa-user"},null,-1),Ee=e("div",{class:"font-semibold text-gray-700"},"Fecha",-1),Oe={class:"flex items-center gap-2"},je=e("i",{class:"fa-regular fa-calendar"},null,-1),Se={class:"w-50 h-full flex px-5 items-center justify-center py-auto"},Te=["onClick"],V="mercadolibre.ventas",bt={__name:"Ventas",props:{datos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(g){const d=g,{tienda:$}=B().props,h=`ML Ventas "${$}"`,{client_id:w}=B().props,p=i(d.filtro.buscar??""),f=i(d.filtro.inicio??null),v=i(d.filtro.fin??null),_=i(d.filtro.estado??null);let l=i([d.filtro.inicio,d.filtro.fin]);const L=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[N(new Date,1),N(new Date,1)]}},{text:"Este mes",onClick(){return[se(new Date),ae(new Date)]}},{text:"Este año",onClick(){return[le(new Date),ne(new Date)]}}],U=(o,s,D)=>{M.get(route(V+".detalle",[o,s,D]))},x=i({name:"Todos",code:null}),I=i([{name:"Todos",code:null},{name:"Pagado",code:"paid"},{name:"Cancelado",code:"cancelled"}]),P=o=>{x.value.code!=_.value&&(_.value=x.value.code)},R=o=>{switch(o){case"paid":return"text-green-600";case"cancelled":return"text-red-600";default:return"text-black"}},q=o=>{switch(o){case"paid":return"bg-green-600";case"cancelled":return"bg-red-600";default:return"bg-white"}},z=o=>{switch(o){case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return""}};Q(()=>{});const y=()=>{M.get(route(V+".index",[w]),{buscar:p.value,inicio:f.value,estado:_.value,fin:v.value},{preserveState:!0,replace:!0})},A=o=>{o[0]!=null&&o[1]!=null?(l.value=[F(o[0]).format("YYYY-MM-DD"),F(o[1]).format("YYYY-MM-DD")],f.value=l.value[0],v.value=l.value[1]):(l.value=[],f.value=null,v.value=null),setTimeout(function(){M.get(route(V+".index",[w]),{buscar:p.value,inicio:f.value,estado:_.value,fin:v.value},{preserveState:!0,replace:!0})},100)};return(o,s)=>{const D=O("InputText"),G=O("Dropdown"),E=j("debounce"),H=j("tooltip");return u(),c(k,null,[a(b(ee),{title:h}),a(X,{pagina:[{label:h,link:!1}]},{default:Z(()=>[e("div",re,[e("div",{class:"p-3 col-span-full flex justify-between items-center"},[e("h5",{class:"text-2xl font-medium"},r(h))]),e("div",ie,[e("div",de,[e("div",ce,[a(C,{for:"buscar",value:"Buscar",class:"text-base font-medium leading-1 text-gray-900"}),Y(a(D,{id:"buscar",modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),"debounce-events":["keyup"],placeholder:"Numero de venta",pt:{root:{class:"col-span-6 lg:col-span-2 w-full"}}},null,8,["modelValue"]),[[E,y,"500ms"]])]),e("div",ue,[a(C,{for:"estado",value:"Estado",class:"text-base font-medium leading-1 text-gray-900"}),Y(a(G,{id:"estado",modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),onChange:s[2]||(s[2]=t=>{P(),y()}),options:I.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:t,state:K,context:n})=>({class:n.selected?"text-white bg-primary-900":n.focused?"bg-blue-100":void 0})},placeholder:"Seleccione estado"},null,8,["modelValue","options","pt"]),[[E,y,"500ms"]])]),e("div",me,[a(C,{for:"date1",value:"Rango de Fecha",class:"text-base font-medium leading-1 text-gray-900"}),a(b(te),{id:"date1",onChange:A,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:b(l),"onUpdate:value":s[3]||(s[3]=t=>J(l)?l.value=t:l=t),shortcuts:L,lang:"es",editable:"false",placeholder:"Seleccione Fecha"},null,8,["value"])])]),e("div",pe,[(u(!0),c(k,null,S(g.datos.data,(t,K)=>(u(),c("div",fe,[e("div",{class:T(["w-2 hidden md:block",q(t.estado)])},null,2),e("div",ve,[e("div",_e,[e("div",xe,[e("div",be,[m("Venta "),e("span",ge,"#"+r(t.venta_id),1),m(),e("span",{class:T(["ml-3 px-2 py-0.5 text-[15px] rounded font-semibold",R(t.estado)])},r(z(t.estado)),3)]),(u(!0),c(k,null,S(t.productos,n=>(u(),c("div",he,[e("div",we,[e("img",{src:n.imagen,alt:n.titulo,class:"w-10 h-10 object-cover rounded border border-gray-800"},null,8,ye)]),e("div",De,[e("div",Ye,r(n.cantidad)+" × "+r(n.titulo),1)])]))),256))]),e("div",ke,[Ce,e("div",Me,[Ve,m(" "+r(t.comprador?.first_name)+" "+r(t.comprador?.last_name),1)]),Ee,e("div",Oe,[je,m(" "+r(t.created_at),1)])]),e("div",Se,[Y((u(),c("button",{class:"rounded bg-blue-700 border border-white px-3 py-2 text-base font-normal text-white m-1 hover:bg-blue-600",onClick:W(n=>U(b(w),t.venta_id,t.tipo),["prevent"])},[m("Ver Detalle")],8,Te)),[[H,{value:"Ver Detalle",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])])])]))),256))]),a(oe,{elements:g.datos.links},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{bt as default};
