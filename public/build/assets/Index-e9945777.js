import{r as p,w as V,o as M,O as B,P as U,g as h,S as a,E as n,V as q,F,f,j as t,A as m,Q as v,bn as A,K as j,q as K,v as G,u as L,t as Q,n as R}from"./@vue-1043e4d5.js";import{_ as Z}from"./AppLayout-86ce6f8f.js";import{K as w,T as H,Z as J,O as g}from"./@inertiajs-ab1bf9dd.js";import{S as W}from"./sweetalert2-c47eda61.js";import{aG as X,h as Y}from"./primevue-232ee6f7.js";import{s as tt}from"./@vueform-21ff8afc.js";import{_ as et}from"./Pagination-e120bd15.js";import ot from"./CrearMasivoModal-d81651ec.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./InputError-933cc936.js";import"./InputLabel-bc304214.js";const st={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},rt={class:"px-3 pb-2 col-span-full flex justify-end items-center"},at=t("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),lt={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},it=["href"],nt=t("i",{class:"fas fa-file-excel text-white"},null,-1),ct=[nt],dt={class:"align-middle py-4"},ut={class:"grid grid-cols-12 gap-4 m-3"},mt={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},pt={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},ht={style:{overflow:"auto","max-height":"700px"}},ft={class:"w-full text-md bg-white shadow-md rounded mb-4"},gt=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"Stock"),t("th",null,"Stock futuro"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Origen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Acciones")])],-1),xt=["onClick"],_t=["onClick"],bt=["onClick"],vt=["src"],wt=["onClick"],yt=["onClick"],Ct=["onClick"],kt=["onClick"],St=t("i",{class:"fas fa-trash-alt"},null,-1),Vt=[St],y="Productos",c="productos",se={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(x){const C=x,E=X(),T=p(),_=p(!1),{permissions:$}=w().props.auth,D=H({id:""});let l=p([C.filtro.categoria]),d=p(C.filtro.buscar);V(d,o=>{g.get(route(c+".index"),{buscar:o,categoria:l.value},{preserveState:!0,replace:!0})}),V(l,o=>{g.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const O=(o,s,i)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(i))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(i)>parseFloat(o))return"bg-orange-500 text-black"},I=o=>{g.get(route(c+".show",o))},N=(o,s)=>{W.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(b=>{b.isConfirmed&&D.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{P("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(c+".index"))},1e3)}})})},k=p({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});M(()=>{T.value=w().props.productos.data,k.value.options=w().props.lista_categorias});const P=(o,s,i)=>{E.add({severity:o,summary:s,detail:i,life:3e3})},z=()=>{g.get(route(c+".create"))},u=o=>{I(o)};return(o,s)=>{const i=B("Toast"),b=B("InputText"),S=U("tooltip");return f(),h(F,null,[a(n(J),{title:y}),a(Z,{pagina:[{label:y,link:!1}]},{default:q(()=>[t("div",st,[a(i),t("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[t("h5",{class:"text-2xl font-medium pr-5"},m(y))]),t("div",rt,[v(t("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e)},null,512),[[A,_.value]]),at,a(ot),v((f(),h("div",lt,[t("a",{href:o.route(c+".exportar",{categoria:n(l),foto:_.value}),target:"_blank",class:"py-auto"},ct,8,it)])),[[S,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),a(n(Y),{size:"small",label:"Crear Producto",severity:"success",onClick:z})]),t("div",dt,[t("div",ut,[t("div",mt,[a(b,{class:"w-full",modelValue:n(d),"onUpdate:modelValue":s[1]||(s[1]=e=>j(d)?d.value=e:d=e),placeholder:"Buscar"},null,8,["modelValue"])]),t("div",pt,[a(n(tt),K({id:"categorias",modelValue:n(l),"onUpdate:modelValue":s[2]||(s[2]=e=>j(l)?l.value=e:l=e),class:"w-full"},k.value),null,16,["modelValue"])])]),t("div",ht,[t("table",ft,[gt,t("tbody",null,[(f(!0),h(F,null,G(x.productos.data,e=>(f(),h("tr",{class:L(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",O(e.stock,e.stock_minimo,e.stock_futuro)])},[t("td",{onClick:r=>u(e.id)},m(e.stock??""),9,xt),t("td",{onClick:r=>u(e.id)},m(e.stock_futuro),9,_t),t("td",{onClick:r=>u(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,vt)],8,bt),t("td",{onClick:r=>u(e.id)},m(e.origen),9,wt),t("td",{onClick:r=>u(e.id)},m(e.nombre),9,yt),t("td",{onClick:r=>u(e.id)},m(e.categorias.map(r=>r.name).join(",")),9,Ct),t("td",null,[n($).includes("eliminar-productos")?v((f(),h("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:Q(r=>N(e.id,e.nombre),["prevent"])},Vt,8,kt)),[[S,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):R("",!0)])],2))),256))])])]),a(et,{elements:x.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{se as default};
