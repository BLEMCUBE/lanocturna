import{l as C,k as V,T as F,h as M,K as O,F as g,m,p as A,f as R,a as e,u as j,w as a,q as L,o as v,Z as q,b as o,t as w,d as h,v as z,c as H,e as U,g as $,O as G,C as K,D as P}from"./app-68862d8a.js";import{_ as Z,S as J}from"./AppLayout-adbfb721.js";import Q from"./CambiarDepositoModal-97d4509b.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./InputError-fbe1562b.js";import"./InputLabel-b7fa9c87.js";const X=b=>(K("data-v-0b5f4a74"),b=b(),P(),b),Y={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},ee={class:"align-middle"},te={class:"flex justify-content-end text-base text-primary-900"},le={class:"px-1"},ae=["src"],oe={class:"inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},se=X(()=>o("i",{class:"fas fa-trash-alt"},null,-1)),f="Depósitos",y="depositos",ne={__name:"Index",setup(b){const u=C([]),k=V(),x=C(),S=F({id:""});M(()=>{x.value=O().props.depositos,u.value=null});const T=s=>{J.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminará definitivamente, tenga en cuenta que no podrá editar la importacion de bultos donde el producto este incluido.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(r=>{r.isConfirmed&&S.delete(route(y+".destroydeposito",s),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{G.get(route(y+".index"))},1e3)}})})},B=s=>{var l=s.productos.map(d=>d.sku.toLowerCase()),r=s.productos.map(d=>d.nombre.toLowerCase());if(n.value.global.value!=null&&n.value.global.value!=""){const d=l.filter(t=>t.includes(n.value.global.value.toLowerCase())),p=r.filter(t=>t.includes(n.value.global.value.toLowerCase()));return[{"bg-orange-400":d.length>0||p.length>0}]}else return["bg-secondary-900/70"]},I=()=>{u.value=null},D=()=>{u.value=x.value.filter(s=>s.id)},N=(s,l,r)=>{k.add({severity:s,summary:l,detail:r,life:3e3})},n=C({global:{value:null,matchMode:g.CONTAINS},productos:{value:null,matchMode:g.CONTAINS}});return(s,l)=>{const r=m("Toast"),d=m("InputText"),p=m("Button"),t=m("Column"),_=m("DataTable"),E=A("tooltip");return v(),R(L,null,[e(j(q),{title:f}),e(Z,{pagina:[{label:f,link:!1}]},{default:a(()=>[o("div",Y,[e(r),o("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},w(f))]),o("div",ee,[e(_,{expandedRows:u.value,"onUpdate:expandedRows":l[2]||(l[2]=c=>u.value=c),showGridlines:"",size:"small",rowClass:B,value:x.value,scrollable:"",scrollHeight:"800px",virtualScrollerOptions:{itemSize:46},tableStyle:"min-width: 50rem",pt:{}},{header:a(()=>[o("div",te,[e(d,{modelValue:n.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value.global.value=c),placeholder:"Buscar"},null,8,["modelValue"]),e(p,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:D}),e(p,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:I})])]),empty:a(()=>[h(" No existe Resultado ")]),loading:a(()=>[h(" Cargando... ")]),expansion:a(c=>[o("div",le,[e(_,{value:c.data.productos,scrollable:"",scrollHeight:"300px",virtualScrollerOptions:{itemSize:46},filters:n.value,"onUpdate:filters":l[1]||(l[1]=i=>n.value=i)},{default:a(()=>[e(t,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:a(i=>[o("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:i.data.imagen,alt:"image"},null,8,ae)]),_:2},1024),e(t,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96"}}}),e(t,{field:"bultos",header:"Bultos",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"pcs_bulto",header:"Pcs por Bulto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Acciones",pt:{bodyCell:{class:"text-center"},headerCell:{class:"bg-sky-300 p-0 m-0 w-10"}}},{body:a(i=>[o("div",null,[o("span",oe,[e(Q,{"detalle-id":i.data.id},null,8,["detalle-id"])]),i.data.deposito_lista_id=="2"?z((v(),H(p,{key:0,class:"w-8 h-8 rounded bg-red-700 border-0 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:U(re=>T(i.data.id),["prevent"])},{default:a(()=>[se]),_:2},1032,["onClick"])),[[E,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):$("",!0)])]),_:2},1024)]),_:2},1032,["value","filters"])])]),default:a(()=>[e(t,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),e(t,{sortable:"",field:"nombre",header:"Déposito",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),e(t,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-24  text-center"},headerContent:{class:" mx-2"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:a(c=>[h(w(c.data.productos.length),1)]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}},xe=W(ne,[["__scopeId","data-v-0b5f4a74"]]);export{xe as default};
