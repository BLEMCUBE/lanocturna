import{r as x,o as j,O as u,P as A,g as F,S as e,E as I,V as l,F as M,f as h,j as s,A as g,z as w,Q as L,R as P,t as v}from"./@vue-1043e4d5.js";import{_ as H}from"./AppLayout-c524edf2.js";import{K as y,T as U,Z as $,O as z}from"./@inertiajs-ab1bf9dd.js";import{S as q}from"./sweetalert2-c47eda61.js";import{aG as G,aH as _}from"./primevue-232ee6f7.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const K={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},Q={class:"align-middle"},Z={class:"flex justify-content-end text-base text-primary-900"},J={class:"flex items-center justify-center"},W={class:"mx-2"},X=s("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),Y={class:"px-1"},ee=["src"],te=s("i",{class:"fas fa-trash-alt"},null,-1),f="Stock Rma",k="rmas",Ne={__name:"StockRma",setup(oe){y().props.auth;const m=x([]),T=G(),b=x(),S=U({id:""});j(()=>{b.value=y().props.depositos,m.value=null});const B=o=>{if(o!=null)window.open(route("reportes.exportstockrma",{completo:o}),"_blank");else return},E=o=>{q.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminarÃ¡ definitivamente?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(c=>{c.isConfirmed&&S.delete(route(k+".destroy-stock",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{O("success","Eliminado","Se ha eliminado"),setTimeout(()=>{z.get(route(k+".rma-stock"))},1e3)}})})},D=o=>{var a=o.productos.map(d=>d.sku.toLowerCase()),c=o.productos.map(d=>d.nombre.toLowerCase());if(r.value.global.value!=null&&r.value.global.value!=""){const d=a.filter(t=>t.includes(r.value.global.value.toLowerCase())),i=c.filter(t=>t.includes(r.value.global.value.toLowerCase()));return[{"bg-orange-400":d.length>0||i.length>0}]}else return["bg-secondary-900/70"]},N=()=>{m.value=null},R=()=>{m.value=b.value.filter(o=>o.id)},O=(o,a,c)=>{T.add({severity:o,summary:a,detail:c,life:3e3})},r=x({global:{value:null,matchMode:_.CONTAINS},productos:{value:null,matchMode:_.CONTAINS}});return(o,a)=>{const c=u("Toast"),d=u("InputText"),i=u("Button"),t=u("Column"),C=u("DataTable"),V=A("tooltip");return h(),F(M,null,[e(I($),{title:f}),e(H,{pagina:[{label:f,link:!1}]},{default:l(()=>[s("div",K,[e(c),s("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[s("h5",{class:"text-2xl font-medium"},g(f))]),s("div",Q,[e(C,{expandedRows:m.value,"onUpdate:expandedRows":a[2]||(a[2]=n=>m.value=n),size:"small",rowClass:D,value:b.value,scrollable:"",scrollHeight:"800px",tableStyle:"min-width: 50rem",pt:{}},{header:l(()=>[s("div",Z,[e(d,{modelValue:r.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=n=>r.value.global.value=n),placeholder:"Buscar"},null,8,["modelValue"]),e(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:R}),e(i,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:N})])]),empty:l(()=>[w(" No existe Resultado ")]),loading:l(()=>[w(" Cargando... ")]),expansion:l(n=>[s("div",Y,[e(C,{value:n.data.productos,filters:r.value,"onUpdate:filters":a[1]||(a[1]=p=>r.value=p),paginator:!0,rows:20,rowsPerPageOptions:[20,40,100,200]},{default:l(()=>[e(t,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:l(p=>[s("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:p.data.imagen,alt:"image"},null,8,ee)]),_:2},1024),e(t,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96 font-sm"}}}),e(t,{field:"defecto",header:"Defecto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"observaciones",header:"Observaciones",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-96"},headerCell:{class:"bg-sky-300 p-0 m-0 w-96"},headerContent:{class:"text-center w-96"},bodyCellContent:{class:"text-center w-96 font-sm"}}}),e(t,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36 font-sm"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 font-sm"},headerContent:{class:"text-center w-36 font-sm"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Acciones",pt:{bodyCell:{class:"text-center"},headerCell:{class:"bg-sky-300 p-0 m-0 w-10"}}},{body:l(p=>[s("div",null,[L((h(),P(i,{class:"w-8 h-8 rounded bg-red-700 border-0 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:v(le=>E(p.data.stock_id),["prevent"])},{default:l(()=>[te]),_:2},1032,["onClick"])),[[V,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),_:2},1024)]),_:2},1032,["value","filters"])])]),default:l(()=>[e(t,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),e(t,{sortable:"",field:"nombre",header:"Items",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),e(t,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 text-sm font-bold w-56  text-center"},headerContent:{class:" mx-2 "},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:l(n=>[s("div",J,[s("div",W,g(n.data.productos.length),1),e(i,{pt:{root:{class:"px-2 py-2 text-xl bg-green-600 border-none hover:bg-green-500"}},onClick:v(p=>B(n.data.producto_completo),["prevent"])},{default:l(()=>[X]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}};export{Ne as default};
