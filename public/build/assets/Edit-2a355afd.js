import{r as y,o as M,O as k,g as v,S as s,E as o,V as P,F as j,f as h,j as r,A as z,t as D,q as O,Q as m,a2 as p,n as $,a1 as q,u as A,aZ as B,aX as N}from"./@vue-1043e4d5.js";import{_ as R}from"./AppLayout-842afc1b.js";import{K as x,T as G,Z as K,O as w}from"./@inertiajs-ab1bf9dd.js";import{aG as Z,h as V}from"./primevue-232ee6f7.js";import{_ as i}from"./InputError-933cc936.js";import{_ as n}from"./InputLabel-bc304214.js";import{s as L}from"./@vueform-21ff8afc.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./sweetalert2-c47eda61.js";import"./apexcharts-f697a6eb.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const W=u=>(B("data-v-172afdc4"),u=u(),N(),u),X={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},H={class:"align-middle"},J=["onSubmit"],Y={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},ee={class:"col-span-12 shadow-default xl:col-span-3"},oe={class:"col-span-12 shadow-default xl:col-span-5"},te={class:"col-span-12 shadow-default xl:col-span-4"},ae={class:"col-span-12 shadow-default xl:col-span-3"},se={class:"col-span-12 shadow-default xl:col-span-3"},re={class:"col-span-12 shadow-default xl:col-span-2"},le={class:"col-span-12 shadow-default xl:col-span-2"},ne={key:0,class:"col-span-12 shadow-default xl:col-span-2"},ie={class:"col-span-12 shadow-default xl:col-span-6"},de=W(()=>r("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),ce={class:"col-span-12 shadow-default xl:col-span-3"},ue={class:"flex justify-end pt-2"},_="Editar Producto",g="productos",me={__name:"Edit",setup(u){const f=y("/images/productos/sin_foto.png"),S=Z(),{permissions:I}=x().props.auth,e=G({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,stock_minimo:0,imagen:"",photo:"",costo_origen:null,costo_real:0,categorias:[]});M(()=>{b.value.options=x().props.lista_categorias;var a=x().props.producto;e.id=a.id,e.nombre=a.nombre,e.origen=a.origen,e.aduana=a.aduana,e.codigo_barra=a.codigo_barra,e.stock=a.stock,e.stock_minimo=a.stock_minimo,e.stock_futuro=a.stock_futuro,e.costo_real=a.costos_reales!==null?a.costos_reales[0].monto:0,e.costo_origen=a.costos_reales!==null?a.costos_reales[0].origen:null,a.categorias.length>0&&a.categorias.forEach(t=>{e.categorias.push(t.id)}),f.value=a.imagen,e.imagen=a.imagen});const C=()=>{e.clearErrors(),e.post(route(g+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{E("success","Mensaje","Producto Actualizado"),setTimeout(()=>{w.get(route(g+".index"))},1e3)},onFinish:()=>{},onError:()=>{}})},b=y({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),U=a=>{a.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(a.target.value))},E=(a,t,d)=>{S.add({severity:a,summary:t,detail:d,life:3e3})},F=()=>{w.get(route(g+".index"))},T=a=>{a.preventDefault(),e.photo=a.target.files[0];let t=a.target.files;if(t&&t[0]){let d=new FileReader;d.onload=c=>{f.value=c.target.result},d.readAsDataURL(t[0])}};return(a,t)=>{const d=k("Toast"),c=k("InputText");return h(),v(j,null,[s(o(K),{title:_}),s(R,{pagina:[{label:"Productos",link:!0,url:a.route(g+".index")},{label:_,link:!1}]},{default:P(()=>[r("div",X,[s(d),r("div",{class:"px-3 col-span-full flex justify-between items-center"},[r("h5",{class:"text-2xl font-medium"},z(_))]),r("div",H,[r("form",{onSubmit:D(C,["prevent"])},[r("div",Y,[r("div",ee,[s(n,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"origen",modelValue:o(e).origen,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).origen=l),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.origen},null,8,["message"])]),r("div",oe,[s(n,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"nombre",modelValue:o(e).nombre,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).nombre=l),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.nombre},null,8,["message"])]),r("div",te,[s(n,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),s(o(L),O({id:"categorias",modelValue:o(e).categorias,"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).categorias=l),class:"w-full"},b.value),null,16,["modelValue"])]),r("div",ae,[s(n,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"aduana",modelValue:o(e).aduana,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).aduana=l),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.aduana},null,8,["message"])]),r("div",se,[s(n,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"codigo_barra",modelValue:o(e).codigo_barra,"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).codigo_barra=l),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.codigo_barra},null,8,["message"])]),r("div",re,[s(n,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":t[5]||(t[5]=l=>o(e).stock=l),step:"1",min:"0",onKeyup:t[6]||(t[6]=l=>U(l)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[p,o(e).stock]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.stock},null,8,["message"])]),r("div",le,[s(n,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":t[7]||(t[7]=l=>o(e).stock_minimo=l),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[p,o(e).stock_minimo]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.stock_minimo},null,8,["message"])]),o(I).includes("costoreal-productos")?(h(),v("div",ne,[s(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":t[8]||(t[8]=l=>o(e).costo_real=l),step:"0.1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[p,o(e).costo_real]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.costo_real},null,8,["message"])])):$("",!0),m(r("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":t[9]||(t[9]=l=>o(e).stock_futuro=l)},null,512),[[p,o(e).stock_futuro]]),r("div",ie,[s(n,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),r("input",{onInput:T,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),de,s(i,{class:"mt-1 text-xs",message:o(e).errors.imagen},null,8,["message"])]),r("div",ce,[r("div",{class:"imagePreviewWrapper",style:q({"background-image":`url(${f.value})`})},null,4)])]),r("div",ue,[s(o(V),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:F,type:"button"}),s(o(V),{label:"Guardar",size:"small",type:"submit",class:A({"opacity-50":o(e).processing}),disabled:o(e).processing},null,8,["class","disabled"])])],40,J)])])]),_:1},8,["pagina"])],64)}}},Ne=Q(me,[["__scopeId","data-v-172afdc4"]]);export{Ne as default};
