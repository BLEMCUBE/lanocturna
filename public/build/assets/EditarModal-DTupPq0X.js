import{r as m,R as n,f as A,g as L,j as s,W as t,Y as _,E as a,z as P,y as j}from"./@vue-BLfC86mR.js";import{_ as u}from"./InputError-DdpGOVhM.js";import{_ as f}from"./InputLabel-CkCrW4zf.js";import{T as O,O as $}from"./@inertiajs-CMyvZJ1U.js";import{a as R}from"./axios-ngrFHoWO.js";import{aH as G}from"./primevue-DAb-R_om.js";import{i as Y}from"./vue-datepicker-next-MGkLgL3F.js";import{h as D}from"./moment-D15uM1gO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./date-format-parse-DuecP4dO.js";const H=s("i",{class:"fas fa-edit"},null,-1),W=[H],q=s("p",{class:"mb-2 font-bold"}," Los siguientes productos deben ser movido al DEPÓSITO TEMPORAL para poder cambiar de estado o ya se ha retirado definitivamente del depósito. ",-1),J=s("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[s("div",{class:"text-center"},[s("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),s("div",{class:"font-bold text-2xl m-3"},"No se ha podido cambiar de Estado")],-1),K={class:"flex justify-end py-3"},Q={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-2 mb-2"},X={class:"col-span-12 shadow-default lg:col-span-6"},Z={class:"col-span-12 shadow-default lg:col-span-6"},ee={class:"col-span-12 shadow-default"},te={class:"col-span-12 shadow-default my-auto"},oe={class:"col-span-12 shadow-default my-auto"},ae={class:"flex justify-end py-3"},se="Bultos",h="depositos",Ie={__name:"EditarModal",props:{clienteId:{type:Number,default:null}},setup(M){const E=M,k=G(),d=m(!1),b=m(!1),x=m([]),e=O({id:"",estado:"",nro_carpeta:"",nro_carpeta:"",nro_contenedor:"",estado:"",fecha_arribado:"",fecha_camino:""}),T=c=>{i.value.code!=e.estado&&(e.estado=i.value.code)},V=()=>{S(E.clienteId)},i=m(),g=m([{name:"Arribado",code:"Arribado"},{name:"En camino",code:"En camino"}]),S=c=>{R.get(route(h+".showmodal",c)).then(o=>{if(o.data.status==!0){var r=o.data.deposito;e.id=r.id,e.nro_carpeta=r.nro_carpeta,e.nro_contenedor=r.nro_contenedor,e.estado=r.estado,i.value=g.value.find(p=>p.code===r.estado),e.fecha_arribado=D(r.fecha_arribado).format("YYYY-MM-DD"),e.fecha_camino=D(r.fecha_camino).format("YYYY-MM-DD"),d.value=!0}else x.value=o.data.faltantes,b.value=!0})},B=()=>{e.reset(),e.clearErrors(),d.value=!1},N=()=>{b.value=!1},z=()=>{e.clearErrors(),e.post(route(h+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{d.value=!1,I("success","Mensaje","Se ha editado"),setTimeout(()=>{$.get(route(h+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},I=(c,o,r)=>{k.add({severity:c,summary:o,detail:r,life:3e3})};return(c,o)=>{const r=n("Toast"),p=n("Column"),U=n("DataTable"),v=n("Button"),y=n("Dialog"),w=n("InputText"),F=n("Dropdown");return L(),A("section",null,[s("button",{type:"button",onClick:V},W),t(r),t(y,{visible:b.value,"onUpdate:visible":o[1]||(o[1]=l=>b.value=l),modal:"",style:{width:"50vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:_(()=>[J]),default:_(()=>[q,t(U,{value:x.value,pt:{root:{class:"text-xs"}},size:"small"},{default:_(()=>[t(p,{field:"sku",header:"Sku",pt:{bodyCell:{class:"text-center p-0 m-0 w-24"},headerCell:{class:"bg-secondary-900 p-0 m-0 w-24"},headerContent:{class:"text-center w-24"},bodyCellContent:{class:"text-center w-24"}}}),t(p,{field:"producto",header:"Producto",pt:{bodyCell:{class:"text-center p-0 m-0 w-auto"},headerCell:{class:"bg-secondary-900 p-0 m-0 w-auto"},headerContent:{class:"text-center w-auto"},bodyCellContent:{class:"text-center w-auto"}}}),t(p,{field:"mover",header:"Cantidad a mover",pt:{bodyCell:{class:"text-center p-0 m-0 w-32"},headerCell:{class:"bg-secondary-900 p-0 m-0 w-32"},headerContent:{class:"text-center w-32"},bodyCellContent:{class:"text-center w-32"}}})]),_:1},8,["value"]),s("div",K,[t(v,{label:"Aceptar",size:"small",type:"button",onClick:o[0]||(o[0]=l=>N())})])]),_:1},8,["visible"]),t(y,{visible:d.value,"onUpdate:visible":o[7]||(o[7]=l=>d.value=l),modal:"",header:"Editar "+se,style:{width:"30vw"},position:"top",pt:{header:{class:"mt-6 p-2"},content:{class:"p-2"}}},{default:_(()=>[s("form",null,[s("div",Q,[s("div",X,[t(f,{for:"nro_carpeta",value:"No. de Carpeta",class:"block text-base font-medium leading-6 text-gray-900"}),t(w,{type:"text",id:"nro_carpeta",modelValue:a(e).nro_carpeta,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).nro_carpeta=l),placeholder:"Ingrese No. de Carpeta",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(u,{class:"mt-1 text-xs",message:a(e).errors.nro_carpeta},null,8,["message"])]),s("div",Z,[t(f,{for:"nro_contenedor",value:"BL o No. de Contenedor",class:"block text-base font-medium leading-6 text-gray-900"}),t(w,{type:"text",id:"nro_contenedor",modelValue:a(e).nro_contenedor,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).nro_contenedor=l),placeholder:"Ingrese BL o No. de Contenedor",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),t(u,{class:"mt-1 text-xs",message:a(e).errors.nro_contenedor},null,8,["message"])]),s("div",ee,[t(f,{for:"estado",value:"Estado",class:"block text-base font-medium leading-6 text-gray-900"}),t(F,{modelValue:i.value,"onUpdate:modelValue":o[4]||(o[4]=l=>i.value=l),onChange:T,options:g.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:l,state:le,context:C})=>({class:C.selected?"text-white bg-primary-900":C.focused?"bg-blue-100":void 0})},placeholder:"Seleccione estado"},null,8,["modelValue","options","pt"]),t(u,{class:"mt-1 text-xs",message:a(e).errors.estado},null,8,["message"])]),s("div",te,[t(f,{for:"fecha_camino",value:"Fecha En Camino",class:"block text-base font-medium leading-6 text-gray-900"}),t(a(Y),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-6 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_camino,"onUpdate:value":o[5]||(o[5]=l=>a(e).fecha_camino=l),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),t(u,{class:"mt-1 text-xs",message:a(e).errors.fecha_camino},null,8,["message"])]),s("div",oe,[t(f,{for:"estado",value:"Fecha Arribado",class:"block text-base font-medium leading-6 text-gray-900"}),t(a(Y),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-6 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_arribado,"onUpdate:value":o[6]||(o[6]=l=>a(e).fecha_arribado=l),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),t(u,{class:"mt-1 text-xs",message:a(e).errors.fecha_arribado},null,8,["message"])])]),s("div",ae,[t(v,{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:B,type:"button"}),t(v,{label:"Guardar",size:"small",type:"button",onClick:j(z,["prevent"]),class:P({"opacity-50":a(e).processing}),disabled:a(e).processing},null,8,["onClick","class","disabled"])])])]),_:1},8,["visible","header"])])}}};export{Ie as default};
