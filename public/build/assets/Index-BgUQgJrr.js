import{r as p,w as B,o as P,R as F,S as U,f as h,g as f,W as a,E as n,Y as A,j as t,D as m,T as v,ah as R,O as V,x as q,F as j,A as G,z as K,u as L,y as W}from"./@vue-BLfC86mR.js";import{_ as Y}from"./AppLayout-kOTJJicy.js";import{K as w,T as Z,O as g,Z as H}from"./@inertiajs-B6DOW0KO.js";import{S as J}from"./sweetalert2-DQJME8_f.js";import{aG as Q,h as X}from"./primevue-B_pu_EB_.js";import{s as tt}from"./@vueform-CFisUGo2.js";import{_ as et}from"./Pagination-lC7wi3W5.js";import ot from"./CrearMasivoModal-VV1PFgPC.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-Dq7h7Pqt.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-Dzj_DFKn.js";import"./side-channel-DZFSYYHh.js";import"./get-intrinsic-gH0OeWJ1.js";import"./has-symbols-CABd5qHC.js";import"./has-proto-CpIZBmUT.js";import"./function-bind-C4RYm_-a.js";import"./has-D2ofp1JE.js";import"./call-bind-7ir4MDz-.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";const st={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},rt={class:"px-3 pb-2 col-span-full flex justify-end items-center"},at=t("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),lt={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},it=["href"],nt=t("i",{class:"fas fa-file-excel text-white"},null,-1),ct=[nt],dt={class:"align-middle py-4"},ut={class:"grid grid-cols-12 gap-4 m-3"},mt={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},pt={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},ht={style:{overflow:"auto","max-height":"700px"}},ft={class:"w-full text-md bg-white shadow-md rounded mb-4"},gt=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"Stock"),t("th",null,"Stock futuro"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Origen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Acciones")])],-1),xt=["onClick"],_t=["onClick"],bt=["onClick"],vt=["src"],wt=["onClick"],yt=["onClick"],Ct=["onClick"],kt=["onClick"],St=t("i",{class:"fas fa-trash-alt"},null,-1),Bt=[St],y="Productos",c="productos",se={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(x){const C=x,T=Q(),E=p(),_=p(!1),{permissions:$}=w().props.auth,D=Z({id:""});let l=p([C.filtro.categoria]),d=p(C.filtro.buscar);B(d,o=>{g.get(route(c+".index"),{buscar:o,categoria:l.value},{preserveState:!0,replace:!0})}),B(l,o=>{g.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const O=(o,s,i)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(i))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(i)>parseFloat(o))return"bg-orange-500 text-black"},z=o=>{g.get(route(c+".show",o))},I=(o,s)=>{J.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(b=>{b.isConfirmed&&D.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(c+".index"))},1e3)}})})},k=p({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});P(()=>{E.value=w().props.productos.data,k.value.options=w().props.lista_categorias});const N=(o,s,i)=>{T.add({severity:o,summary:s,detail:i,life:3e3})},M=()=>{g.get(route(c+".create"))},u=o=>{z(o)};return(o,s)=>{const i=F("Toast"),b=F("InputText"),S=U("tooltip");return f(),h(j,null,[a(n(H),{title:y}),a(Y,{pagina:[{label:y,link:!1}]},{default:A(()=>[t("div",st,[a(i),t("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[t("h5",{class:"text-2xl font-medium pr-5"},m(y))]),t("div",rt,[v(t("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e)},null,512),[[R,_.value]]),at,a(ot),v((f(),h("div",lt,[t("a",{href:o.route(c+".exportar",{categoria:n(l),foto:_.value}),target:"_blank",class:"py-auto"},ct,8,it)])),[[S,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),a(n(X),{size:"small",label:"Crear Producto",severity:"success",onClick:M})]),t("div",dt,[t("div",ut,[t("div",mt,[a(b,{class:"w-full",modelValue:n(d),"onUpdate:modelValue":s[1]||(s[1]=e=>V(d)?d.value=e:d=e),placeholder:"Buscar"},null,8,["modelValue"])]),t("div",pt,[a(n(tt),q({id:"categorias",modelValue:n(l),"onUpdate:modelValue":s[2]||(s[2]=e=>V(l)?l.value=e:l=e),class:"w-full"},k.value),null,16,["modelValue"])])]),t("div",ht,[t("table",ft,[gt,t("tbody",null,[(f(!0),h(j,null,G(x.productos.data,e=>(f(),h("tr",{class:K(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",O(e.stock,e.stock_minimo,e.stock_futuro)])},[t("td",{onClick:r=>u(e.id)},m(e.stock??""),9,xt),t("td",{onClick:r=>u(e.id)},m(e.stock_futuro),9,_t),t("td",{onClick:r=>u(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,vt)],8,bt),t("td",{onClick:r=>u(e.id)},m(e.origen),9,wt),t("td",{onClick:r=>u(e.id)},m(e.nombre),9,yt),t("td",{onClick:r=>u(e.id)},m(e.categorias.map(r=>r.name).join(",")),9,Ct),t("td",null,[n($).includes("productos-eliminar")?v((f(),h("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:W(r=>I(e.id,e.nombre),["prevent"])},Bt,8,kt)),[[S,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):L("",!0)])],2))),256))])])]),a(et,{elements:x.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{se as default};
