import{o as T,c as I,f as n,g as l,W as m,E as r,Y as C,j as e,D as t,F as p,A as u,z as h,u as w,C as B,y as S,T as D,a5 as E}from"./@vue-BLfC86mR.js";import{_ as F}from"./AppLayout-CMdAZySw.js";import{K as f,T as V,Z as A,O as N}from"./@inertiajs-CMyvZJ1U.js";import R from"./ModalRepuestaRapidas-BJztC2cv.js";import"./sweetalert2-DhUVDY3P.js";import{u as $}from"./customToast-BYTpZDIn.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./primevue-DAb-R_om.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";const H={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},O={class:"w-2/3 flex justify-between"},K={class:"px-5 pb-2"},U=e("h5",{class:"text-2xl font-medium"},"Orden",-1),W={class:"text-lg font-medium"},P={class:"h-8 p-2 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},Y=["href"],Z={class:"grid grid-cols-12 gap-6"},q={class:"col-span-8"},G={class:"bg-white rounded-xl shadow p-6"},J={class:"w-full h-screen flex flex-col"},Q={class:"flex-1 overflow-y-auto p-4 space-y-2"},X={class:"text-center text-gray-500 text-xs"},ee={class:"space-y-2"},te=["innerHTML"],se={key:0,class:"w-auto text-xs"},oe=["href"],re=e("i",{class:"fa fa-paperclip"},null,-1),ae={class:"ml-1",style:{"font-size":"12px"}},ie={class:"flex items-center justify-end gap-1 mt-1"},ne={class:"text-[12px] text-gray-500"},le={key:0,xmlns:"http://www.w3.org/2000/svg",width:"15",height:"8",viewBox:"0 0 15 8"},de=e("path",{fill:"#3483FA","fill-rule":"nonzero",d:"M8.635.646a.5.5 0 1 1 .707.708L3.753 6.942a.5.5 0 0 1-.707 0l-2.4-2.4a.5.5 0 0 1 .708-.707L3.4 5.881 8.635.646zm5 0a.5.5 0 1 1 .707.708L8.753 6.942a.5.5 0 0 1-.707 0l-1.4-1.4a.5.5 0 0 1 .708-.707L8.4 5.881 13.635.646z"},null,-1),ce=[de],pe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"15",height:"8",viewBox:"0 0 15 8"},_e=e("path",{fill:"#9b9b9b","fill-rule":"nonzero",d:"M8.635.646a.5.5 0 1 1 .707.708L3.753 6.942a.5.5 0 0 1-.707 0l-2.4-2.4a.5.5 0 0 1 .708-.707L3.4 5.881 8.635.646zm5 0a.5.5 0 1 1 .707.708L8.753 6.942a.5.5 0 0 1-.707 0l-1.4-1.4a.5.5 0 0 1 .708-.707L8.4 5.881 13.635.646z"},null,-1),me=[_e],ue={class:"flex justify-end"},he=["disabled"],fe={class:"col-span-4"},ge={class:"bg-white rounded-xl shadow p-5 mb-5"},xe=e("div",{class:"text-lg font-semibold"}," Comprador ",-1),be={class:"bg-white rounded-xl shadow p-5 mb-5"},we=e("div",{class:"text-lg font-semibold pb-2"}," Compra ",-1),ve={class:"flex gap-3 items-center"},ye=["src"],ke={class:"text-sm text-gray-700"},je=["href"],Me={class:"font-medium"},Le={key:0,class:"text-gray-600"},ze={class:"text-gray-500 text-xs"},Te={class:"font-semibold mt-1"},Ie={class:"bg-white rounded-xl shadow p-5 overflow-y-auto"},Ce=e("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),Be={class:"hidden sm:block flex-wrap gap-2 mb-4"},g="mercadolibre.mensajes",ft={__name:"MensajesDetalle",setup(Se){const{setShow:x}=$(),{datos:a}=f().props,{tienda:v}=f().props,y="Venta Mensajes "+v,{client_id:_}=f().props,s=V({packId:null,sellerId:null,clientId:null,buyerId:null,text:""}),k=()=>{if(s.text.length===0){x("error","Error","Por favor ingresá un Mensaje.");return}s.clearErrors(),s.post(route(g+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x("success","Mensaje","Mensaje enviado"),setTimeout(()=>{N.get(route(g+".showMensajes",{client_id:_,id:s.packId}))},500)},onFinish:()=>{},onError:()=>{}})};T(()=>{s.packId=a.id,s.sellerId=a.comprador.seller,s.buyerId=a.comprador.id,s.clientId=_});const j=d=>{s.text=d.respuesta},M=d=>(d/1024/1024).toFixed(2),L=d=>new Date(d.replace(" ","T")).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase().replace(/\./g,"").replace(/\s+/g,""),z=I(()=>a.mensajes);return(d,c)=>(l(),n(p,null,[m(r(A),{title:"Mercado Libre-Mensajes"}),m(F,{pagina:[{label:y,link:!1}]},{default:C(()=>[e("div",H,[e("div",O,[e("div",K,[U,e("p",W,"#"+t(r(a).id),1),e("p",null,t(r(a).date_created),1)]),e("span",P,[e("a",{href:"https://www.mercadolibre.com.uy/ventas/"+r(a).orden_id+"/detalle",target:"_blank",class:"py-auto"},"Ver ficha de venta",8,Y)])]),e("div",Z,[e("div",q,[e("div",G,[e("div",J,[e("div",Q,[(l(!0),n(p,null,u(z.value,(o,b)=>(l(),n(p,{key:b},[e("div",X,t(b),1),e("div",ee,[(l(!0),n(p,null,u(o,i=>(l(),n("div",{key:i.raw.id,class:h(["flex",i.is_from_seller?"justify-end":"justify-start"])},[e("div",{class:h(["p-2 rounded-xl max-w-lg shadow-md",i.is_from_seller?" bg-blue-100 text-gray-800":"bg-white  text-gray-800"])},[e("p",{class:"text-xs",innerHTML:i.raw.text},null,8,te),i.attachment_path!==null?(l(),n("div",se,[e("a",{class:"text-blue-700",href:d.route(g+".descargarAdjunto",{filename:i.raw.message_attachments[0].filename,original_filename:i.raw.message_attachments[0].original_filename,client_id:r(_)}),target:"_blank"},[re,B(" "+t(i.raw.message_attachments[0].original_filename),1)],8,oe),e("span",ae,"("+t(M(i.raw.message_attachments[0].size))+"MB)",1)])):w("",!0),e("div",ie,[e("span",ne,t(L(i.fecha)),1),i.raw.message_date.read?(l(),n("svg",le,ce)):(l(),n("svg",pe,me))])],2)],2))),128))])],64))),128))]),e("form",{class:"border-t p-4 bg-white flex items-center gap-3",onSubmit:c[1]||(c[1]=S(o=>k(),["prevent"]))},[D(e("textarea",{rows:"1",maxlength:"340","onUpdate:modelValue":c[0]||(c[0]=o=>r(s).text=o),placeholder:"Ingresá tu mensaje...",class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,512),[[E,r(s).text]]),e("div",ue,[e("button",{type:"submit",class:h(["bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700",{"opacity-50":r(s).processing}]),disabled:r(s).processing}," Enviar ",10,he)])],32)])])]),e("div",fe,[e("div",ge,[xe,e("div",null,[e("p",null,t(r(a).comprador.first_name)+" "+t(r(a).comprador.last_name),1),e("p",null,t(r(a).comprador.nickname),1)])]),e("div",be,[we,(l(!0),n(p,null,u(r(a).compra,o=>(l(),n("div",ve,[e("img",{src:o.producto.thumbnail,class:"w-10 h-10 object-cover rounded"},null,8,ye),e("div",ke,[e("a",{target:"_blank",href:o.producto.permalink},[e("p",Me,t(o.producto.title),1)],8,je),o.color?(l(),n("p",Le,"Color "+t(o.color),1)):w("",!0),e("p",ze,"SKU: "+t(o.seller_sku),1),e("p",Te,t(o.cantidad)+" × $"+t(o.precio),1)])]))),256))]),e("div",Ie,[Ce,e("div",Be,[m(R,{onAddTexto:j,tipo:"mensaje"})])])])])])]),_:1},8,["pagina"])],64))}};export{ft as default};
