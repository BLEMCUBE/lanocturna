import{r,o as N,M as z,e as m,f,Q as l,ab as i,S as n,i as e,y as v,p as D,q as $,j as E,F as y,u as B}from"./@vue-BG0wrCoO.js";import{_ as I}from"./AppLayout-DGXGhT07.js";import{T as L,Z as T,O as V}from"./@inertiajs-BPLxF6VH.js";import{aH as O,h as x}from"./primevue-DlS7f910.js";import{_ as P}from"./InputError-cOM6HFrc.js";import{_ as U}from"./InputLabel-BIVuqiPx.js";import"./logo-C8Jea0Rc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-DTMt_fBO.js";import"./pinia-f5v7c1ZR.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-CipxKyPu.js";import"./axios-ngrFHoWO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";const q={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-8"},H={class:"grid grid-cols-12 gap-4 py-3"},Q={class:"col-span-7 sm:col-span-12 md:col-span-6 shadow-default lg:col-span-5 2xl:col-span-6 mx-2"},Z=["disabled"],G={class:"col-span-3 font-medium sm:col-span-6 shadow-default xl:col-span-3 2xl:col-span-3 flex h-auto items-end justify-center"},J={class:"h-8"},K={class:"col-span-3 shadow-default xl:col-span-3 flex h-auto items-end 2xl:col-span-2 justify-center"},R={class:"h-8"},W={key:0},X=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos no estan registrado , por favor registre y vuelva a intentar. ",-1),Y={class:"w-full border"},ee=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),te={class:"w-full text-center border"},se={class:"text-center border"},oe={class:"text-center border"},le=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ae={class:"flex justify-end py-3"},ie={class:"mb-2 mt-0 font-semibold text-center text-md"},re=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ne={class:"flex justify-end py-3"},b="Ajuste Stock",k="productos",qe={__name:"AjustarStock",setup(ce){const w=O(),_=r(!1),c=r(null),o=L({archivo:""}),d=r(!1),p=r(!1),h=r(),g=r();N(()=>{});const S=(t,s,u)=>{w.add({severity:t,summary:s,detail:u,life:3e3})},j=t=>{t.preventDefault(),o.archivo=t.target.files[0]},C=()=>{c.value.value=null,o.reset("archivo"),d.value=!1},F=()=>{c.value.value=null,o.reset("archivo"),p.value=!1},M=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},A=()=>{_.value=!0,o.clearErrors(),o.post(route(k+".importarstock"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{_.value=!1,S("success","Mensaje","Stock Ajustado"),setTimeout(()=>{V.get(route(k+".ajuste-stock"))},1e3)},onFinish:()=>{},onError:t=>{_.value=!1,c.value.value=null,o.reset("archivo"),t.filas!=null?t.filas.length>0&&(h.value=t.filas,d.value=!0):t.error_sku!=null&&t.error_sku.length>0&&(g.value=t.error_sku,p.value=!0)}})};return(t,s)=>{const u=z("Dialog");return f(),m(y,null,[l(i(T),{title:b}),l(I,{pagina:[{label:b,link:!1}]},{default:n(()=>[e("div",q,[e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},v(b))]),e("div",H,[e("div",Q,[l(U,{for:"file_input1",value:"Importar excel",class:"block text-base font-semibold leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:c,onInput:j,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:i(o).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,Z),l(P,{class:"mt-1 text-xs",message:i(o).errors.archivo},null,8,["message"])]),e("div",G,[e("div",J,[l(i(x),{label:"Importar",type:"button",class:$(["text-normal font-medium",{"opacity-50":i(o).processing}]),disabled:i(o).processing,onClick:D(A,["prevent"])},null,8,["class","disabled","onClick"])])]),e("div",K,[e("div",R,[l(i(x),{label:"Descargar formato",size:"md",severity:"success",type:"button",class:"p-1 text-xs font-medium ring-0",onClick:s[0]||(s[0]=a=>M("importar_stock_productos.xlsx"))})])])])]),l(u,{visible:d.value,"onUpdate:visible":s[2]||(s[2]=a=>d.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[le]),default:n(()=>[h.value.length>0?(f(),m("div",W,[X,e("table",Y,[ee,e("tbody",null,[(f(!0),m(y,null,B(h.value,a=>(f(),m("tr",te,[e("td",se,v(a.fila),1),e("td",oe,v(a.sku),1)]))),256))])])])):E("",!0),e("div",ae,[l(i(x),{label:"Aceptar",size:"small",type:"button",onClick:s[1]||(s[1]=a=>C())})])]),_:1},8,["visible"]),l(u,{visible:p.value,"onUpdate:visible":s[4]||(s[4]=a=>p.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[re]),default:n(()=>[e("div",null,[e("p",ie,v(g.value),1)]),e("div",ne,[l(i(x),{label:"Aceptar",size:"small",type:"button",onClick:s[3]||(s[3]=a=>F())})])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}};export{qe as default};
