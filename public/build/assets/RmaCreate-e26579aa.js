import{l as c,k as L,K as T,T as $,h as q,m as y,f as u,a as o,u as s,w as D,q as H,o as p,Z,b as l,t as f,ab as J,g as b,v as Q,x as W,z as U,n as X,e as ee,O as C}from"./app-8c3dec3d.js";import{_ as oe}from"./AppLayout-595acd45.js";import{_ as d}from"./InputError-3e95eb56.js";import{_ as n}from"./InputLabel-64f8a46c.js";import{i as Y}from"./es.es-c88e3db5.js";import{h as te}from"./moment-fbc5633a.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const se={class:"grid grid-cols-12 p-0 m-0 gap-4 mb-4 bg-white col-span-12 py-2 rounded-lg shadow-lg lg:col-span-12 2xl:col-span-10 dark:border-gray-700 dark:bg-gray-800"},ae={class:"m-4 col-span-12 lg:col-span-12"},le={class:"grid grid-cols-12 gap-2 py-0"},ne={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},re={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},de={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ie={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ce={key:0,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},ue={key:1,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},pe={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},me={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},fe={key:2,class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-4"},ge=l("div",{class:"px-0 py-1 m-2 mt-3 bg-primary-900 text-white col-span-full flex justify-center items-center"},[l("h5",{class:"text-2xl font-medium"},"Detalle")],-1),xe={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-8"},ve={key:0,class:"flex align-items-center"},_e=["alt","src"],ye={key:1},be={class:"flex align-items-center"},he=["alt","src"],we={key:3,class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},Ve={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},De={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ee={class:"flex justify-end py-3"},E="Ingresar RMA",R="rmas",ke={__name:"RmaCreate",setup(Re){const x=c(null),S=c(null),k=L(),{nro_servicio:h}=T().props,A=c(),m=c(),N=r=>{v.value.code!=e.estado&&(e.estado=v.value.code)},I=r=>{e.clearErrors(),_.value.code!=e.tipo&&(e.tipo=_.value.code)},P=r=>{e.clearErrors("producto_id"),e.producto_id!=m.value.id&&(e.producto_id=m.value.id,e.prod_origen=m.value.origen,e.prod_nombre=m.value.nombre)},G=r=>{console.log("vali ",r),e.fecha_compra=r},e=$({vendedor_id:"",fecha_ingreso:"",fecha_compra:"",nro_factura:"",costo_presupuestado:"",estado:"INGRESADO",tipo:"RMA",producto_id:"",prod_origen:"",prod_cantidad:1,prod_nombre:"",prod_serie:"",observaciones:"",defecto:"",cliente:{nombre:"",telefono:""}});q(()=>{x.value=te(new Date).format("YYYY-MM-DD"),e.fecha_ingreso=x.value,A.value=Array.from(T().props.productos.data,r=>r)});const v=c({name:"INGRESADO",code:"INGRESADO"}),F=c([{name:"INGRESADO",code:"INGRESADO"},{name:"PRESUPUESTADO",code:"PRESUPUESTADO"},{name:"REPARADO",code:"REPARADO"},{name:"CAMBIO PRODUCTO",code:"CAMBIO PRODUCTO"},{name:"ESPERANDO STOCK",code:"ESPERANDO STOCK"},{name:"ENTREGADO",code:"ENTREGADO"}]),_=c({name:"RMA",code:"RMA"}),z=c([{name:"RMA",code:"RMA"},{name:"PRESUPUESTO",code:"PRESUPUESTO"}]),B=()=>{e.clearErrors(),e.post(route(R+".rma-store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{j("success","Mensaje","RMA creado"),setTimeout(()=>{C.get(route(R+".rma-create"))},1e3)},onFinish:()=>{},onError:()=>{}})},j=(r,a,w)=>{k.add({severity:r,summary:a,detail:w,life:3e3})},K=()=>{C.get(route("inicio"))};return(r,a)=>{const w=y("Toast"),g=y("InputText"),V=y("Dropdown"),O=y("Textarea");return p(),u(H,null,[o(s(Z),{title:E}),o(oe,{pagina:[{label:"RMA",link:!1,url:r.route(R+".index")},{label:E,link:!1}]},{default:D(()=>[l("div",se,[o(w),l("div",ae,[l("div",{class:"px-0 py-1 m-2 mt-0 bg-primary-900 text-white col-span-full flex justify-center items-center"},[l("h5",{class:"text-2xl font-medium"},f(E))]),l("form",null,[l("div",le,[l("div",ne,[o(n,{for:"fecha_ingreso",value:"Fecha Ingreso",class:"text-base font-medium leading-1 text-gray-900"}),o(s(Y),{id:"fecha_ingreso",type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 text-2xl text-gray-700 bg-white transition-colors duration-200 border-0",value:x.value,"onUpdate:value":a[0]||(a[0]=t=>x.value=t),lang:"es",placeholder:"Seleccione",disabled:"",clearable:!1},null,8,["value"])]),l("div",re,[o(n,{for:"nro_servicio",value:"Número servicio",class:"text-base font-medium leading-1 text-gray-900"}),o(g,{type:"text",id:"nro_servicio",modelValue:s(h),"onUpdate:modelValue":a[1]||(a[1]=t=>J(h)?h.value=t:null),readonly:"",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.nro_servicio},null,8,["message"])]),l("div",de,[o(n,{for:"tipo",value:"Tipo",class:"text-base font-medium leading-1 text-gray-900"}),o(V,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=t=>_.value=t),id:"tipo",onChange:I,options:z.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:t,state:M,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.tipo},null,8,["message"])]),l("div",ie,[o(n,{for:"estado",value:"Estado",class:"text-base font-medium leading-1 text-gray-900"}),o(V,{modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=t=>v.value=t),disabled:"",id:"estado",onChange:N,filter:"",options:F.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:t,state:M,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.estado},null,8,["message"])]),s(e).tipo=="RMA"?(p(),u("div",ce,[o(n,{for:"fecha_compra",value:"Fecha de compra",class:"text-base font-medium leading-1 text-gray-900"}),o(s(Y),{id:"fecha_compra",type:"date","value-type":"YYYY-MM-DD",onChange:G,format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 text-base text-gray-700 bg-white transition-colors duration-200 border-0",value:S.value,"onUpdate:value":a[4]||(a[4]=t=>S.value=t),lang:"es",placeholder:"Seleccione Fecha",clearable:!1},null,8,["value"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.fecha_compra},null,8,["message"])])):b("",!0),s(e).tipo=="RMA"?(p(),u("div",ue,[o(n,{for:"nro_factura",value:"Número de factura",class:"text-base font-medium leading-1 text-gray-900"}),o(g,{type:"text",id:"nro_factura",modelValue:s(e).nro_factura,"onUpdate:modelValue":a[5]||(a[5]=t=>s(e).nro_factura=t),pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.nro_factura},null,8,["message"])])):b("",!0),l("div",pe,[o(n,{for:"cliente",value:"Cliente",class:"text-base font-medium leading-6 text-gray-900"}),o(g,{type:"text",id:"cliente",modelValue:s(e).cliente.nombre,"onUpdate:modelValue":a[6]||(a[6]=t=>s(e).cliente.nombre=t),placeholder:"ingrese nombre cliente",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors["cliente.nombre"]},null,8,["message"])]),l("div",me,[o(n,{for:"telefono",value:"Telefono",class:"text-base font-medium leading-6 text-gray-900"}),o(g,{type:"text",id:"telefono",modelValue:s(e).cliente.telefono,"onUpdate:modelValue":a[7]||(a[7]=t=>s(e).cliente.telefono=t),placeholder:"ingrese telefono",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors["cliente.telefono"]},null,8,["message"])]),s(e).tipo=="PRESUPUESTO"?(p(),u("div",fe,[o(n,{for:"costo_presupuestado",value:"Costo presupuestado",class:"text-base font-medium leading-6 text-gray-900"}),Q(l("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=t=>s(e).costo_presupuestado=t),step:"1",min:"0",class:"p-inputtext text-end h-9 w-full text-gray-700 bg-white border border-gray-300 transition-colors duration-200 appearance-none px-1 py-1"},null,512),[[W,s(e).costo_presupuestado]]),o(d,{class:"mt-1 text-xs",message:s(e).errors.costo_presupuestado},null,8,["message"])])):b("",!0),ge,l("div",xe,[o(n,{for:"prod_origen",value:"Producto",class:"text-base font-medium leading-1 text-gray-900"}),o(V,{modelValue:m.value,"onUpdate:modelValue":a[9]||(a[9]=t=>m.value=t),id:"productos",onChange:P,filter:"",options:A.value,optionLabel:"nombre",virtualScrollerOptions:{itemSize:46},class:"w-full md:w-14rem",pt:{root:{class:"w-1/2"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:t,state:M,context:i})=>({class:i.selected?"text-white bg-primary-900 p-2":i.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione Producto"},{value:D(t=>[t.value?(p(),u("div",ve,[l("img",{alt:t.value.nombre,src:t.value.imagen,style:{width:"20px","margin-right":"5px"}},null,8,_e),l("div",null,f(t.value.origen)+" - "+f(t.value.nombre),1)])):(p(),u("span",ye,f(t.placeholder),1))]),option:D(t=>[l("div",be,[l("img",{alt:t.option.nombre,src:t.option.imagen,style:{width:"20px","margin-right":"5px"}},null,8,he),l("div",null,f(t.option.origen)+" - "+f(t.option.nombre),1)])]),_:1},8,["modelValue","options","pt"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.producto_id},null,8,["message"])]),s(e).tipo=="RMA"?(p(),u("div",we,[o(n,{for:"prod_serie",value:"Número de Serie",class:"text-base font-medium leading-1 text-gray-900"}),o(g,{type:"text",id:"prod_serie",modelValue:s(e).prod_serie,"onUpdate:modelValue":a[10]||(a[10]=t=>s(e).prod_serie=t),pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.origen},null,8,["message"])])):b("",!0),l("div",Ve,[o(n,{for:"defecto",value:"Defecto",class:"text-base font-medium leading-6 text-gray-900"}),o(O,{modelValue:s(e).defecto,"onUpdate:modelValue":a[11]||(a[11]=t=>s(e).defecto=t),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"]),o(d,{class:"mt-1 text-xs",message:s(e).errors.defecto},null,8,["message"])]),l("div",De,[o(n,{for:"observaciones",value:"Observaciones",class:"text-base font-medium leading-6 text-gray-900"}),o(O,{modelValue:s(e).observaciones,"onUpdate:modelValue":a[12]||(a[12]=t=>s(e).observaciones=t),pt:{root:{rows:"2",class:"w-full"}}},null,8,["modelValue"])])]),l("div",Ee,[o(s(U),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:K,type:"button"}),o(s(U),{label:"Guardar",size:"small",type:"button",class:X({"opacity-50":s(e).processing}),disabled:s(e).processing,onClick:ee(B,["prevent"])},null,8,["class","disabled","onClick"])])])])])]),_:1},8,["pagina"])],64)}}};export{ke as default};
