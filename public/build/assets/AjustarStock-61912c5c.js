import{r,o as D,O as k,g as u,S as o,E as i,V as n,F as w,f as m,j as e,A as f,u as E,t as $,v as T,n as V}from"./@vue-1043e4d5.js";import{_ as B}from"./AppLayout-86ce6f8f.js";import{T as I,Z as L,O}from"./@inertiajs-ab1bf9dd.js";import{aG as P,h as v}from"./primevue-232ee6f7.js";import{_ as U}from"./InputError-933cc936.js";import{_ as G}from"./InputLabel-bc304214.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./sweetalert2-c47eda61.js";import"./apexcharts-f697a6eb.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const Z={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-8"},q={class:"grid grid-cols-12 gap-4 py-3"},H={class:"col-span-7 sm:col-span-12 md:col-span-6 shadow-default lg:col-span-5 2xl:col-span-6 mx-2"},J=["disabled"],K={class:"col-span-3 font-medium sm:col-span-6 shadow-default xl:col-span-3 2xl:col-span-3 flex h-auto items-end justify-center"},Q={class:"h-8"},R={class:"col-span-3 shadow-default xl:col-span-3 flex h-auto items-end 2xl:col-span-2 justify-center"},W={class:"h-8"},X={key:0},Y=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos no estan registrado , por favor registre y vuelva a intentar. ",-1),ee={class:"w-full border"},te=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku ")])],-1),se={class:"w-full text-center border"},oe={class:"text-center border"},le={class:"text-center border"},ae=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ie={class:"flex justify-end py-3"},re={class:"mb-2 mt-0 font-semibold text-center text-md"},ne=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),ce={class:"flex justify-end py-3"},b="Ajuste Stock",S="productos",Ie={__name:"AjustarStock",setup(de){const j=P(),x=r(!1),c=r(null),l=I({archivo:""}),d=r(!1),p=r(!1),_=r(),g=r();D(()=>{});const C=(t,s,h)=>{j.add({severity:t,summary:s,detail:h,life:3e3})},A=t=>{t.preventDefault(),l.archivo=t.target.files[0]},F=()=>{c.value.value=null,l.reset("archivo"),d.value=!1},M=()=>{c.value.value=null,l.reset("archivo"),p.value=!1},N=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},z=()=>{x.value=!0,l.clearErrors(),l.post(route(S+".importarstock"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{x.value=!1,C("success","Mensaje","Stock Ajustado"),setTimeout(()=>{O.get(route(S+".ajuste-stock"))},1e3)},onFinish:()=>{},onError:t=>{x.value=!1,c.value.value=null,l.reset("archivo"),t.filas!=null?t.filas.length>0&&(_.value=t.filas,d.value=!0):t.error_sku!=null&&t.error_sku.length>0&&(g.value=t.error_sku,p.value=!0)}})};return(t,s)=>{const h=k("Toast"),y=k("Dialog");return m(),u(w,null,[o(i(L),{title:b}),o(B,{pagina:[{label:b,link:!1}]},{default:n(()=>[e("div",Z,[o(h),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},f(b))]),e("div",q,[e("div",H,[o(G,{for:"file_input1",value:"Importar excel",class:"block text-base font-semibold leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:c,onInput:A,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:i(l).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,J),o(U,{class:"mt-1 text-xs",message:i(l).errors.archivo},null,8,["message"])]),e("div",K,[e("div",Q,[o(i(v),{label:"Importar",type:"button",class:E(["text-normal font-medium",{"opacity-50":i(l).processing}]),disabled:i(l).processing,onClick:$(z,["prevent"])},null,8,["class","disabled","onClick"])])]),e("div",R,[e("div",W,[o(i(v),{label:"Descargar formato",size:"md",severity:"success",type:"button",class:"p-1 text-xs font-medium ring-0",onClick:s[0]||(s[0]=a=>N("importar_stock_productos.xlsx"))})])])])]),o(y,{visible:d.value,"onUpdate:visible":s[2]||(s[2]=a=>d.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ae]),default:n(()=>[_.value.length>0?(m(),u("div",X,[Y,e("table",ee,[te,e("tbody",null,[(m(!0),u(w,null,T(_.value,a=>(m(),u("tr",se,[e("td",oe,f(a.fila),1),e("td",le,f(a.sku),1)]))),256))])])])):V("",!0),e("div",ie,[o(i(v),{label:"Aceptar",size:"small",type:"button",onClick:s[1]||(s[1]=a=>F())})])]),_:1},8,["visible"]),o(y,{visible:p.value,"onUpdate:visible":s[4]||(s[4]=a=>p.value=a),modal:"",style:{width:"30vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:n(()=>[ne]),default:n(()=>[e("div",null,[e("p",re,f(g.value),1)]),e("div",ce,[o(i(v),{label:"Aceptar",size:"small",type:"button",onClick:s[3]||(s[3]=a=>M())})])]),_:1},8,["visible"])]),_:1},8,["pagina"])],64)}}};export{Ie as default};
