import{_ as O,S as F}from"./AppLayout-31bdb395.js";import{k as B,l as f,K as i,T as M,h as R,F as S,m as c,p as U,f as z,a as e,u as t,w as l,q as $,o as h,Z as j,b as r,t as m,x as _,d as v,A as a,n as H,y as L,c as P,g as q,O as p}from"./app-0ff8ae1a.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const G={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},K={class:"px-3 pb-2 col-span-full flex justify-between items-center"},Z={class:"align-middle"},J={class:"flex justify-content-end text-md"},Q=r("i",{class:"fas fa-edit"},null,-1),u="Historial de Ventas",b="ventas",se={__name:"Index",setup(W){B();const x=f(),{permissions:y}=i().props.auth,{tipo_cambio:C}=i().props;M({id:""});const g=s=>{switch(s){case"PENDIENTE DE FACTURACIÓN":return"text-orange-600";case"FACTURADO":return"text-blue-600";case"COMPLETADO":return"text-green-600";case"ANULADO":return"text-red-600";default:return"text-black"}},T=s=>{p.get(route(b+".show",s))},w=s=>{p.get(route(b+".edit",s))},N=s=>{T(s.data.id)};R(()=>{x.value=i().props.ventas.data});const k=()=>{C==!0?p.get(route(b+".create")):D("error","No se ha especificado el tipo de cambio para el día")},D=(s,d)=>{F.fire({width:350,title:d,icon:s})},n=f({global:{value:null,matchMode:S.CONTAINS}});return(s,d)=>{const E=c("Toast"),A=c("InputText"),V=c("DataTable"),I=U("tooltip");return h(),z($,null,[e(t(j),{title:u}),e(O,{pagina:[{label:u,link:!1}]},{default:l(()=>[r("div",G,[e(E),r("div",K,[r("h5",{class:"text-2xl font-medium"},m(u)),e(t(_),{size:"small",label:"Crear Venta",severity:"success",onClick:k})]),r("div",Z,[e(V,{showGridlines:"",filters:n.value,value:x.value,pt:{bodyRow:{class:"hover:cursor-pointer"}},scrollable:"",scrollHeight:"400px",virtualScrollerOptions:{itemSize:46},onRowClick:N,size:"small"},{header:l(()=>[r("div",J,[e(A,{modelValue:n.value.global.value,"onUpdate:modelValue":d[0]||(d[0]=o=>n.value.global.value=o),placeholder:"Buscar"},null,8,["modelValue"])])]),empty:l(()=>[v(" No existe Resultado ")]),loading:l(()=>[v(" Cargando... ")]),default:l(()=>[e(t(a),{field:"fecha",header:"Facha y hora",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"codigo",header:"No. Pedido",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"vendedor",header:"Vendedor",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"cliente",header:"Cliente",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"destino",header:"Destino",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"estado",header:"Estado",sortable:"",pt:{bodyCell:{class:"text-center"}}},{body:l(o=>[r("span",{class:H(["font-semibold text-md",g(o.data.estado)])},m(o.data.estado),3)]),_:1}),e(t(a),{field:"moneda",header:"Moneda",sortable:"",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"total_sin_iva",sortable:"",header:"Total sin IVA",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"total",sortable:"",header:"Total",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"facturador",sortable:"",header:"Facturado por:",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"validador",sortable:"",header:"Validado por:",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{field:"observaciones",sortable:"",header:"Observaciones",pt:{bodyCell:{class:"text-center"}}}),e(t(a),{header:"Acciones",style:{width:"100px"}},{body:l(o=>[t(y).includes("editar-ventas")&&o.data.estado=="PENDIENTE DE FACTURACIÓN"?L((h(),P(t(_),{key:0,onClick:X=>w(o.data.id),class:"w-8 h-8 rounded bg-primary-900 px-2 py-1 text-base font-normal text-white m-2 hover:bg-primary-100"},{default:l(()=>[Q]),_:2},1032,["onClick"])),[[I,{value:"Editar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):q("",!0)]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{se as default};
