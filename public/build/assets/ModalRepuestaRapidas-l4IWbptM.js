import{r as m,o as X,M as B,e as n,f as r,i as t,Q as f,F as x,u as v,$ as M,p as C,y as Z,x as R,S as ee,O as b,a0 as h,q as $,j,ab as a,P as V}from"./@vue-BG0wrCoO.js";import{T as te,O as se}from"./@inertiajs-BPLxF6VH.js";import{_}from"./InputError-cOM6HFrc.js";import{a as D}from"./axios-ngrFHoWO.js";import{aH as oe}from"./primevue-DlS7f910.js";import{u as le}from"./loader-DTMt_fBO.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./pinia-f5v7c1ZR.js";const re=["onClick"],ae=["onClick"],ne=t("i",{class:"fas fa-pen"},null,-1),ie={class:"grid grid-cols-12 gap-4 p-2"},ue={class:"w-full flex flex-col items-center col-span-12 sm:col-span-3 md:col-span-3 lg:col-span-3 text-white rounded-lg text-center"},ce={class:"flex flex-wrap justify-center mt-2"},de=["onMouseover","onClick"],pe={class:"col-span-12 sm:col-span-7 md:col-span-7 lg:col-span-7 rounded-lg text-center"},me={class:"col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 text-white rounded-lg text-center"},ge=["onClick"],fe=["onSubmit"],xe=t("p",null," Repuestas agregadas ",-1),ve={key:0,class:"col-span-12 p-2 xl:col-span-12"},be={class:"grid grid-cols-12 gap-4 p-2 mt-3"},he={class:"w-full flex flex-col items-center col-span-12 sm:col-span-3 md:col-span-3 lg:col-span-3 text-white rounded-lg text-center"},_e=["onUpdate:modelValue"],ye={class:"col-span-12 sm:col-span-7 md:col-span-7 lg:col-span-7 rounded-lg text-center"},we=["onUpdate:modelValue"],ke={class:"col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 text-white rounded-lg text-center"},Ce=["onClick"],Ee=t("i",{class:"fas fa-trash-alt"},null,-1),qe={key:1,class:"grid grid-cols-12 gap-4 p-2 mt-3"},Se={class:"w-full flex flex-col items-start col-span-12 sm:col-span-6 md:col-span-6 lg:col-span-6 rounded-lg text-center"},Me=t("label",{class:"px-2 text-gray-900 font-medium"},"Saludo inicial:",-1),Te=t("p",{class:"px-2 text-gray-400 font-medium text-xs"},"Lo pondremos al inicio de tus respuestas.",-1),Ue={class:"w-full flex flex-col items-start col-span-12 sm:col-span-6 md:col-span-6 lg:col-span-6"},Ve=t("label",{class:"px-2 text-gray-900 font-medium"},"Firma:",-1),Ie=t("p",{class:"px-2 text-gray-400 font-medium text-xs"},"Lo pondremos al final de tus respuestas.",-1),ze={class:"flex justify-end py-3"},Be="Respuestas Rapidas",I="respuestasrapidas",Re="mercadolibre",ut={__name:"ModalRepuestaRapidas",props:{tipo:{type:String},appId:{type:String}},emits:["addTexto"],setup(F,{emit:L}){const g=F,N=le(),A=oe(),y=m(!1),o=te({etiquetas:[],saludo:[],firma:[]}),T=[{bg:"#ff9191"},{bg:"#ffb15e"},{bg:"#7ad690"},{bg:"#91cdff"},{bg:"#c591ff"},{bg:"#ff91d5"}],U=m(null),E=m([]),d=m(""),q=m(null),w=m(""),S=m(null),O=()=>{y.value=!0},P=l=>{let s=E.value[l].descripcion;Q(s,l)};function Q(l,s){L("addTexto",{respuesta:l,index:s})}const G=l=>{S.value=l.bg,q.value=l.bg},H=()=>{o.clearErrors(),d.value.trim().length===0?k("error","Error","Por favor ingresá un nombre a la etiqueta."):w.value.trim().length===0?k("error","Error","Por favor ingresá la respuesta rápida."):o.etiquetas.some(s=>s.titulo===d.value)?k("error","Error","Ya existe el nombre de la etiqueta."):(o.etiquetas.push({id:null,titulo:d.value,tipo:g.tipo,descripcion:w.value,color:q.value}),k("success","Mensaje","Respuesta agregada, no te olvides de guardar los cambios."),d.value=null,w.value=null,q.value=null)},Y=async l=>{const s=o.etiquetas[l];if(o.etiquetas.splice(l,1),s.id!==null)try{await D.delete(route(I+".destroy",s.id))}catch(i){console.error("Error al eliminar usuario:",i)}else return};X(()=>{z(),S.value=T[0].bg,q.value=T[0].bg});const z=()=>{D.get(route(I+".index",{tipo:g.tipo,app_id:g.appId})).then(l=>{E.value=l.data.respuestas;var s=l.data.firma,i=l.data.saludo;o.etiquetas=E.value.map(p=>({id:p.id,titulo:p.titulo,tipo:p.tipo,descripcion:p.descripcion,color:p.color})),o.firma.push(s),o.saludo.push(i)}).finally(()=>{N.hide()})},J=()=>{o.reset(),o.clearErrors(),y.value=!1},K=()=>{o.clearErrors(),o.post(route(I+".update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{y.value=!1,k("success","Mensaje","Se ha editado"),g.tipo=="pregunta"&&setTimeout(()=>{se.get(route(Re+".preguntas.lista",g.appId))},500),z()},onFinish:()=>{},onError:()=>{}})},W=l=>{d.value=l.target.value.toUpperCase()},k=(l,s,i)=>{A.add({severity:l,summary:s,detail:i,life:4e3})};return(l,s)=>{const i=B("Button"),p=B("Dialog");return r(),n("section",null,[(r(!0),n(x,null,v(E.value,(e,u)=>(r(),n("button",{onClick:C(c=>P(u),["prevent"]),class:"px-3 py-1 m-1 text-sm text-white rounded text-medium",style:M({backgroundColor:e.color})},Z(e.titulo),13,re))),256)),t("button",{onClick:C(O,["prevent"]),class:"w-full bg-gray-200 hover:bg-gray-300 text-xs p-2 rounded mt-3 flex items-center justify-center gap-2"},[ne,R(" Modificar respuestas rápidas ")],8,ae),f(p,{visible:y.value,"onUpdate:visible":s[6]||(s[6]=e=>y.value=e),modal:"",header:Be,style:{width:"70rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 "},content:{class:"p-4 lg:p-4"}}},{default:ee(()=>[t("div",ie,[t("div",ue,[b(t("input",{type:"text",placeholder:"ETIQUETA",onInput:s[0]||(s[0]=e=>W(e)),"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),class:"placeholder:text-white text-center text-[16px] border font-normal h-10 rounded-md w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500",style:M({backgroundColor:S.value||"#484545"})},null,36),[[h,d.value]]),t("div",ce,[(r(),n(x,null,v(T,(e,u)=>t("button",{key:u,class:$(["m-1 p-2 rounded-full w-4 h-4 border border-gray-300",{"scale-110 border-gray-800":S.value===e.bg}]),style:M({backgroundColor:e.bg,filter:U.value===u?"brightness(0.9)":"brightness(1)"}),onMouseover:c=>U.value=u,onMouseleave:s[2]||(s[2]=c=>U.value=null),onClick:c=>G(e)},null,46,de)),64))])]),t("div",pe,[b(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=e=>w.value=e),rows:"3",placeholder:"Ingresá la respuesta rápida",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,w.value]])]),t("div",me,[t("button",{type:"button",onClick:C(H,["prevent"]),class:"w-full h-[60px] bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md"}," Agregar ",8,ge)])]),t("form",{onSubmit:C(K,["prevent"])},[xe,a(o).errors.length>0?(r(),n("div",ve,[f(_,{class:"mt-1 text-lg w-full",message:a(o).errors.etiquetas},null,8,["message"]),(r(!0),n(x,null,v(a(o).errors.campos_etiquetas,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256)),(r(!0),n(x,null,v(a(o).errors.campos_saludo,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256)),(r(!0),n(x,null,v(a(o).errors.campos_firma,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256))])):j("",!0),(r(!0),n(x,null,v(a(o).etiquetas,(e,u)=>(r(),n("div",be,[t("div",he,[b((r(),n("input",{key:u,type:"text",placeholder:"ETIQUETA","onUpdate:modelValue":c=>e.titulo=c,class:"placeholder:text-gray-500 text-center text-[16px] uppercase border font-normal h-8 rounded-md w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500",style:M({backgroundColor:e.color||"#ffffff"})},null,12,_e)),[[h,e.titulo]])]),t("div",ye,[b(t("textarea",{"onUpdate:modelValue":c=>e.descripcion=c,rows:"3",placeholder:"Ingresá la respuesta rápida",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,8,we),[[h,e.descripcion]])]),t("div",ke,[t("button",{type:"button",onClick:C(c=>Y(u),["prevent"]),class:"w-full h-[34px] bg-red-500 hover:bg-red-600 text-white font-medium rounded-md"},[Ee,R(" Borrar ")],8,Ce)])]))),256)),g.tipo=="pregunta"?(r(),n("div",qe,[t("div",Se,[Me,b(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>a(o).saludo[0].value=e),rows:"3",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,a(o).saludo[0].value]]),Te,f(_,{class:"mt-1 text-xs",message:a(o).errors.saludo},null,8,["message"])]),t("div",Ue,[Ve,b(t("textarea",{"onUpdate:modelValue":s[5]||(s[5]=e=>a(o).firma[0].value=e),rows:"3",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,a(o).firma[0].value]]),Ie,f(_,{class:"mt-1 text-xs",message:a(o).errors.firma},null,8,["message"])])])):j("",!0),t("div",ze,[f(i,{label:"Cancelar",pt:{root:"mr-3 py-1"},severity:"danger",size:"small",onClick:J,type:"button"}),f(i,{label:"Guardar",size:"small",severity:"success",type:"submit",class:$({"opacity-50":a(o).processing}),disabled:a(o).processing},null,8,["class","disabled"])])],40,fe)]),_:1},8,["visible"])])}}};export{ut as default};
