import{r as f,w as y,o as z,O as S,P as A,g as p,S as i,E as n,V as q,F as B,f as h,j as t,A as m,Q as F,K as V,q as K,v as M,u as U,t as G,n as L}from"./@vue-1043e4d5.js";import{_ as Q}from"./AppLayout-08ffa2ac.js";import{K as b,T as R,Z,O as g}from"./@inertiajs-ab1bf9dd.js";import{S as H}from"./sweetalert2-c47eda61.js";import{aG as J,h as W}from"./primevue-232ee6f7.js";import{s as X}from"./@vueform-21ff8afc.js";import{_ as Y}from"./Pagination-e120bd15.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const tt={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},et={class:"px-3 pb-2 col-span-full flex justify-end items-center"},ot={class:"w-8 h-8 rounded bg-green-600 flex justify-center mr-5 items-center text-base font-semibold text-white hover:bg-green-600"},st=["href"],at=t("i",{class:"fas fa-file-excel text-white"},null,-1),rt=[at],lt={class:"align-middle py-4"},it={class:"grid grid-cols-12 gap-4 m-3"},nt={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ct={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},dt={style:{overflow:"auto","max-height":"700px"}},ut={class:"w-full text-md bg-white shadow-md rounded mb-4"},mt=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"Stock"),t("th",null,"Stock futuro"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Origen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Acciones")])],-1),pt=["onClick"],ht=["onClick"],gt=["onClick"],ft=["src"],_t=["onClick"],xt=["onClick"],bt=["onClick"],vt=["onClick"],wt=t("i",{class:"fas fa-trash-alt"},null,-1),Ct=[wt],v="Productos",c="productos",Wt={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(_){const w=_,j=J(),T=f(),{permissions:E}=b().props.auth,$=R({id:""});let r=f([w.filtro.categoria]),d=f(w.filtro.buscar);y(d,o=>{g.get(route(c+".index"),{buscar:o,categoria:r.value},{preserveState:!0,replace:!0})}),y(r,o=>{g.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const D=(o,s,l)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(l))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(l)>parseFloat(o))return"bg-orange-500 text-black"},O=o=>{g.get(route(c+".show",o))},I=(o,s)=>{H.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(x=>{x.isConfirmed&&$.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(c+".index"))},1e3)}})})},C=f({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});z(()=>{T.value=b().props.productos.data,C.value.options=b().props.lista_categorias});const N=(o,s,l)=>{j.add({severity:o,summary:s,detail:l,life:3e3})},P=()=>{g.get(route(c+".create"))},u=o=>{O(o)};return(o,s)=>{const l=S("Toast"),x=S("InputText"),k=A("tooltip");return h(),p(B,null,[i(n(Z),{title:v}),i(Q,{pagina:[{label:v,link:!1}]},{default:q(()=>[t("div",tt,[i(l),t("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[t("h5",{class:"text-2xl font-medium pr-5"},m(v))]),t("div",et,[F((h(),p("span",ot,[t("a",{href:o.route(c+".exportar",{categoria:n(r)}),target:"_blank",class:"py-auto"},rt,8,st)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),i(n(W),{size:"small",label:"Agregar Producto",severity:"success",onClick:P})]),t("div",lt,[t("div",it,[t("div",nt,[i(x,{class:"w-full",modelValue:n(d),"onUpdate:modelValue":s[0]||(s[0]=e=>V(d)?d.value=e:d=e),placeholder:"Buscar"},null,8,["modelValue"])]),t("div",ct,[i(n(X),K({id:"categorias",modelValue:n(r),"onUpdate:modelValue":s[1]||(s[1]=e=>V(r)?r.value=e:r=e),class:"w-full"},C.value),null,16,["modelValue"])])]),t("div",dt,[t("table",ut,[mt,t("tbody",null,[(h(!0),p(B,null,M(_.productos.data,e=>(h(),p("tr",{class:U(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",D(e.stock,e.stock_minimo,e.stock_futuro)])},[t("td",{onClick:a=>u(e.id)},m(e.stock??""),9,pt),t("td",{onClick:a=>u(e.id)},m(e.stock_futuro),9,ht),t("td",{onClick:a=>u(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,ft)],8,gt),t("td",{onClick:a=>u(e.id)},m(e.origen),9,_t),t("td",{onClick:a=>u(e.id)},m(e.nombre),9,xt),t("td",{onClick:a=>u(e.id)},m(e.categorias.map(a=>a.name).join(", ")),9,bt),t("td",null,[n(E).includes("eliminar-productos")?F((h(),p("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:G(a=>I(e.id,e.nombre),["prevent"])},Ct,8,vt)),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):L("",!0)])],2))),256))])])]),i(Y,{elements:_.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{Wt as default};
