import{k as A,K as f,T as q,l as g,h as G,m as y,f as _,a as s,u as o,w as K,q as O,o as c,Z as P,b as t,t as u,c as D,g as v,s as Z,ab as H,y as J,z as M,n as Q,e as W,B as X,O as T}from"./app-ec80f342.js";import{_ as Y}from"./AppLayout-1d91220d.js";import{_ as i}from"./InputError-8fb990c2.js";import{_ as d}from"./InputLabel-4335c075.js";import{s as ee}from"./multiselect-217db4cc.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const oe={class:"grid grid-cols-12 p-2 m-0 gap-2 mb-4 bg-white col-span-10 py-2 rounded-lg shadow-lg lg:col-span-10 2xl:col-span-8"},te={class:"mt-2 mb-4 col-span-12 lg:col-span-12"},se={class:"grid grid-cols-12 gap-1 py-0"},ae={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},le={class:"col-span-12 mx-2 py-1 shadow-default xl:col-span-4"},re={class:"table-auto mx-2 border border-gray-300 col-span-12"},ne={class:"p-2 bg-secondary-900 border"},de=t("th",{class:"border border-gray-300 w-24"},"Cantidad",-1),ie=t("th",{class:"border border-gray-300 w-24"},"Origen",-1),ce=t("th",{class:"border border-gray-300"},"Nombre",-1),me={key:0,class:"border border-gray-300"},pe={class:"font-sans text-center font-normal text-gray-800 border border-gray-300"},ue={class:"border border-gray-300 p-1"},fe={class:"border border-gray-300 p-1"},ge={class:"border border-gray-300 p-1"},_e={key:0,class:"border border-gray-300 p-1"},be={class:"col-span-12 mx-2 py-1 shadow-default 2xl:col-span-12"},xe=t("div",{class:"px-0 py-1 m-2 bg-primary-900 text-white col-span-full flex justify-center items-center"},[t("h5",{class:"text-lg font-medium uppercase"},"Datos")],-1),ye={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},ve={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},he={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},we={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Ve={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},ke={class:"col-span-12 mx-2 py-0 shadow-default xl:col-span-6"},Se={class:"flex justify-end py-3"},h="Subir Envio RMA",w="rmas",Be={__name:"RmaSubir",setup(Ce){const U=A(),{lista_destinos:V}=f().props,{lista_rmas:b}=f().props,{vendedor:x}=f().props,{vendedor_id:R}=f().props,B=n=>{V.find(a=>a.value===n),e.destino=n},e=q({vendedor_id:"",destino:"",total:0,total_sin_iva:0,tipo:"ENVIO",nro_compra:"",estado:"RMA",observaciones:"",parametro:{rma:{},opt:{mueve_stock:"NO"}},productos:[],cliente:{nombre:"",telefono:"",localidad:"",direccion:""}}),E=n=>{n.value.code!=e.parametro.rma.id&&(e.parametro.opt.mueve_stock=n.value.code)},k=g({name:"NO",code:"NO"}),I=g([{name:"SI",code:"SI"},{name:"NO",code:"NO"}]),S=g({value:"",closeOnSelect:!0,placeholder:"Seleccione",searchable:!1,options:[]});G(()=>{S.value.options=V,b.value=b,e.vendedor_id=R});const C=g({name:"",code:""}),j=n=>{n.value.code!=e.parametro.rma.id&&X.get(route(w+".showsubir",n.value.code)).then(a=>{var r=a.data.venta;e.parametro.rma=r,e.productos=[{producto_id:r.producto_id,nombre:r.prod_nombre,origen:r.prod_origen,cantidad:r.prod_cantidad,precio:null}],e.cliente={nombre:r.cliente,telefono:r.telefono,localidad:r.localidad,direccion:r.direccion}})},z=()=>{e.clearErrors(),e.post(route(w+".subir-store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{L("success","Mensaje","Creado"),setTimeout(()=>{T.get(route(w+".subir-store"))},1e3)},onFinish:()=>{},onError:()=>{}})},L=(n,a,r)=>{U.add({severity:n,summary:a,detail:r,life:3e3})},$=()=>{T.get(route("inicio"))};return(n,a)=>{const r=y("Toast"),N=y("Dropdown"),m=y("InputText");return c(),_(O,null,[s(o(P),{title:h}),s(Y,{pagina:[{label:h,link:!1}]},{default:K(()=>[t("div",oe,[s(r),t("div",te,[t("div",{class:"px-0 py-1 m-2 mt-0 bg-primary-900 text-white col-span-full flex justify-center items-center"},[t("h5",{class:"text-2xl font-medium"},u(h))]),t("form",null,[t("div",se,[t("div",ae,[s(d,{for:"estado",value:"Rma",class:"text-base font-medium leading-1 text-gray-900"}),s(N,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=l=>C.value=l),id:"estado",onChange:j,filter:"",options:o(b),optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:l,state:F,context:p})=>({class:p.selected?"text-white bg-primary-900 p-2":p.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","options","pt"])]),t("div",le,[s(d,{for:"stock",value:"Mueve Stock?",class:"text-base font-medium leading-1 text-gray-900"}),s(N,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=l=>k.value=l),id:"stock",disabled:o(e).parametro.rma.stock==0,onChange:E,filter:"",options:I.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-400 my-auto"},item:({props:l,state:F,context:p})=>({class:p.selected?"text-white bg-primary-900 p-2":p.focused?"bg-blue-100 p-2":void 0})},placeholder:"Seleccione"},null,8,["modelValue","disabled","options","pt"]),o(e).parametro.rma.stock==0?(c(),D(i,{key:0,class:"mt-1 text-xs",message:"No existe stock"})):v("",!0)]),t("table",re,[t("thead",null,[t("tr",ne,[de,ie,ce,o(e).parametro.rma.prod_serie?(c(),_("th",me,"Serie")):v("",!0)])]),t("tbody",null,[t("tr",pe,[t("td",ue,u(o(e).parametro.rma.prod_cantidad),1),t("td",fe,u(o(e).parametro.rma.prod_origen),1),t("td",ge,u(o(e).parametro.rma.prod_nombre),1),o(e).parametro.rma.prod_serie?(c(),_("td",_e,u(o(e).parametro.rma.prod_serie),1)):v("",!0)])])]),t("div",be,[s(i,{class:"mt-1 text-lg w-full",message:o(e).errors.productos},null,8,["message"]),(c(!0),_(O,null,Z(o(e).errors.campos_productos,l=>(c(),D(i,{class:"mt-1 mb-0 text-lg",message:l},null,8,["message"]))),256))]),xe,t("div",ye,[s(d,{for:"vendedor",value:"Vendedor",class:"text-base font-medium leading-1 text-gray-900"}),s(m,{type:"text",id:"vendedor",modelValue:o(x),"onUpdate:modelValue":a[2]||(a[2]=l=>H(x)?x.value=l:null),readonly:"",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.vendedor_id},null,8,["message"])]),t("div",ve,[s(d,{for:"destino",value:"Destino",class:"text-base font-medium leading-1 text-gray-900"}),s(o(ee),J({id:"rol",modelValue:o(e).destino,"onUpdate:modelValue":a[3]||(a[3]=l=>o(e).destino=l)},S.value,{onSelect:B}),null,16,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.destino},null,8,["message"])]),t("div",he,[s(d,{for:"cliente",value:"Cliente",class:"text-base font-medium leading-6 text-gray-900"}),s(m,{type:"text",id:"cliente",readonly:"",modelValue:o(e).cliente.nombre,"onUpdate:modelValue":a[4]||(a[4]=l=>o(e).cliente.nombre=l),placeholder:"ingrese nombre cliente",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors["cliente.nombre"]},null,8,["message"])]),t("div",we,[s(d,{for:"telefono",value:"Telefono",class:"text-base font-medium leading-6 text-gray-900"}),s(m,{type:"text",id:"telefono",readonly:"",modelValue:o(e).cliente.telefono,"onUpdate:modelValue":a[5]||(a[5]=l=>o(e).cliente.telefono=l),placeholder:"ingrese telefono",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"])]),t("div",Ve,[s(d,{for:"localidad",value:"Localidad",class:"text-base font-medium leading-6 text-gray-900"}),s(m,{type:"text",id:"localidad",modelValue:o(e).cliente.localidad,"onUpdate:modelValue":a[6]||(a[6]=l=>o(e).cliente.localidad=l),placeholder:"ingrese localidad",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"])]),t("div",ke,[s(d,{for:"direccion",value:"DirecciÃ³n",class:"text-base font-medium leading-6 text-gray-900"}),s(m,{type:"text",id:"direccion",modelValue:o(e).cliente.direccion,"onUpdate:modelValue":a[7]||(a[7]=l=>o(e).cliente.direccion=l),placeholder:"ingrese direccion",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors["cliente.direccion"]},null,8,["message"])])]),t("div",Se,[s(o(M),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:$,type:"button"}),s(o(M),{label:"Guardar",size:"small",type:"button",class:Q({"opacity-50":o(e).processing}),disabled:o(e).processing,onClick:W(z,["prevent"])},null,8,["class","disabled","onClick"])])])])])]),_:1},8,["pagina"])],64)}}};export{Be as default};
