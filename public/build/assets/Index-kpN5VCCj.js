import{r as d,w as A,o as H,R as M,S as q,f as b,g as f,W as t,E as o,Y as i,j as a,D as g,T as z,U as K,y as T,u as Y,C as S,x as P,O as B,F as W}from"./@vue-BLfC86mR.js";import{_ as Z}from"./AppLayout-uReGjGr-.js";import{K as p,T as G,O as _,Z as J}from"./@inertiajs-CMyvZJ1U.js";import{aH as L,aI as Q,h as X,q as c}from"./primevue-DAb-R_om.js";import{i as ee}from"./vue-datepicker-next-MGkLgL3F.js";import{h as O}from"./moment-D15uM1gO.js";import te from"./CrearModal-iumFRKns.js";import oe from"./EditarModal-oqeKNotZ.js";import{s as ae}from"./@vueform-CFisUGo2.js";import{S as se}from"./sweetalert2-DhUVDY3P.js";import{s as y,a as le,e as re,b as ne,c as ie}from"./date-fns-Bj3OEEs3.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./date-format-parse-DuecP4dO.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";import"./@babel-QjJsDpFa.js";const ce={class:"card p-3 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},de={class:"px-2.5 pb-2 grid grid-cols-12 gap-4"},pe={class:"ml-5 flex justify-end col-span-12 sm:col-span-4"},ue=a("i",{class:"fas fa-file-excel text-white text-lg"},null,-1),me={class:"align-middle py-1 px-3"},fe={class:"grid grid-cols-12 gap-2 m-1"},xe={class:"flex justify-content-end text-md col-span-12 lg:col-span-3 2xl:col-span-3"},ve={class:"flex justify-content-end text-md col-span-12 lg:col-span-5 2xl:col-span-7"},he={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-2"},be={class:"flex justify-end justify-items-center"},ge={key:0,class:"h-8 inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},_e={key:1,class:"h-8 inline-block rounded bg-red-700 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-red-600"},ye=["onClick"],we=a("i",{class:"fas fa-trash-alt"},null,-1),Ce=[we],w="Pagos",u="pago-servicio",vt={__name:"Index",props:{filtro:{type:Object,default:()=>({})}},setup(De){const{permissions:C}=p().props.auth,x=d([]),V=L(),j=G({id:""});let e=d(),E=d(),F=d(),n=d([]);e.value=[O(y(new Date,30)).format("YYYY-MM-DD"),O(new Date).format("YYYY-MM-DD")],A(n,l=>{_.get(route(u+".index"),{concepto:n.value,inicio:e.value[0],fin:e.value[1]},{preserveState:!0,onSuccess:()=>{x.value=p().props.items.data}})});const N=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[y(new Date,1),y(new Date,1)]}},{text:"Este mes",onClick(){return[le(new Date),re(new Date)]}},{text:"Este año",onClick(){return[ne(new Date),ie(new Date)]}}],v=d({global:{value:null,matchMode:Q.CONTAINS}}),I=(l,r,m)=>{V.add({severity:l,summary:r,detail:m,life:3e3})},R=(l,r)=>{se.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+r,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(h=>{h.isConfirmed&&j.delete(route(u+".destroy",l),{preserveScroll:!0,onSuccess:()=>{I("success","Eliminado","Se ha eliminado"),setTimeout(()=>{_.get(route(u+".index"))},1e3)}})})},D=d({value:"",closeOnSelect:!0,placeholder:"Conceptos",mode:"tags",searchable:!0,options:[]}),$=()=>{if(e.value[0]!=null&&e.value[1]!=null)window.open(route(u+".exportar",[{concepto:n.value,inicio:e.value[0],fin:e.value[1]}]),"_blank");else return},k=l=>{l[0]!=null&&l[1]!=null&&(E.value=e.value[0],F.value=e.value[1]),_.get(route(u+".index"),{concepto:n.value,inicio:e.value[0],fin:e.value[1]},{preserveState:!0,onSuccess:()=>{n.value=p().props.filtro.concepto,x.value=p().props.items.data}})};return H(()=>{D.value.options=p().props.conceptos,k(e.value)}),(l,r)=>{const m=M("InputText"),h=M("DataTable"),U=q("tooltip");return f(),b(W,null,[t(o(J),{title:w}),t(Z,{pagina:[{label:w,link:!1}]},{default:i(()=>[a("div",ce,[a("div",de,[a("div",{class:"py-1 px-3 col-span-12 sm:col-span-8 flex justify-between items-center"},[a("h5",{class:"text-2xl font-medium"},g(w))]),a("div",pe,[t(te),z((f(),K(o(X),{onClick:T($,["prevent"]),pt:{root:{class:"py-auto px-2.5 ml-5 py-2 text-lg bg-green-600 border-none hover:bg-green-500"}}},{default:i(()=>[ue]),_:1},8,["onClick"])),[[U,{value:"Exportar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]])])]),a("div",me,[t(h,{filters:v.value,value:x.value,globalFilterFields:["tconcepto","observacion"],scrollable:"",scrollHeight:"700px",paginator:"",rows:50,columnResizeMode:"expand",pt:{bodyRow:{class:"hover:bg-gray-100 hover:text-black"},root:{class:"text-base"}},size:"small"},{header:i(()=>[a("div",fe,[a("div",xe,[t(m,{class:"h-9 w-full",modelValue:v.value.global.value,"onUpdate:modelValue":r[0]||(r[0]=s=>v.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"])]),a("div",ve,[t(o(ae),P({id:"conceptos",modelValue:o(n),"onUpdate:modelValue":r[1]||(r[1]=s=>B(n)?n.value=s:n=s),class:"w-full"},D.value),null,16,["modelValue"])]),a("div",he,[t(o(ee),{onChange:k,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:o(e),"onUpdate:value":r[2]||(r[2]=s=>B(e)?e.value=s:e=s),shortcuts:N,clearable:!1,lang:"es",editable:!1,placeholder:"Seleccione Fecha"},null,8,["value"])])])]),empty:i(()=>[S(" No existe Resultado ")]),loading:i(()=>[S(" Cargando... ")]),default:i(()=>[t(o(c),{field:"fecha",sortable:"",header:"Fecha",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(c),{field:"nro_factura",header:"No. de Factura",sortable:"",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(c),{field:"moneda",header:"Moneda",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(c),{sortable:"",header:"Monto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:i(s=>[a("span",null,g(l.$numberFormat(s.data.monto)),1)]),_:1}),t(o(c),{field:"tconcepto",sortable:"",header:"Concepto",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(c),{sortable:"",header:"Método Pago",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}},{body:i(s=>[a("span",null,g(s.data.tmetodo),1)]),_:1}),t(o(c),{field:"observacion",header:"Observación",pt:{bodyCell:{class:"text-center"},headerTitle:{class:"text-center"}}}),t(o(c),{header:"Acciones",style:{width:"100px"},pt:{bodyCell:{class:"text-center"}}},{body:i(s=>[a("div",be,[o(C).includes("pagoservicio-editar")?(f(),b("div",ge,[t(oe,{"item-id":s.data.id},null,8,["item-id"])])):Y("",!0),o(C).includes("pagoservicio-eliminar")?(f(),b("div",_e,[a("button",{onClick:T(ke=>R(s.data.id,s.data.nro_factura),["prevent"])},Ce,8,ye)])):Y("",!0)])]),_:1})]),_:1},8,["filters","value"])])])]),_:1},8,["pagina"])],64)}}};export{vt as default};
