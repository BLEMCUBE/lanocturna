import{_ as pt}from"./AppLayout-BWpqwQoE.js";import{K as i,T as xt,Z as ft,O as S}from"./@inertiajs-CMyvZJ1U.js";import{aH as _t,aI as H}from"./primevue-DAb-R_om.js";import{i as z}from"./vue-datepicker-next-MGkLgL3F.js";import{h as b}from"./moment-D15uM1gO.js";import{a as $}from"./axios-ngrFHoWO.js";import{s as y,a as X,e as G,b as K,c as L}from"./date-fns-Bj3OEEs3.js";import{r as u,o as ht,R as g,S as bt,f as x,g as m,W as r,E as l,Y as n,j as t,D as d,T as E,u as _,U as W,F as I,A as Z,C as v}from"./@vue-BLfC86mR.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-5zhdP7Ax.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./date-format-parse-DuecP4dO.js";import"./@babel-QjJsDpFa.js";const gt={class:"card px-3 mb-4 bg-white col-span-12 justify-center md:col-span-12 py-3 rounded-lg shadow-lg 2xl:col-span-10 dark:border-gray-700 dark:bg-gray-800"},vt={class:"grid grid-cols-12 justify-center"},wt={class:"mx-3 py-0 mt-0 text-white col-span-2 flex justify-end items-center"},yt=t("i",{class:"fa-regular fa-copy"},null,-1),Dt=t("i",{class:"fas fa-edit"},null,-1),Ct={class:"relative flex flex-col md:flex-row md:space-x-5 space-y-0 rounded-t-xl max-w-xs md:max-w-5xl mx-auto bg-white"},kt={class:"w-2/3"},Yt={class:"font-bold text-gray-800 md:text-2xl text-xl"},Mt={class:"relative flex flex-col md:flex-row md:space-x-5 space-y-0 rounded-b-xl p-3 max-w-xs md:max-w-5xl mx-auto border border-white bg-white"},At={class:"w-full md:w-1/3 bg-white grid place-items-center"},Tt=["alt","src"],St={class:"w-full md:w-2/3 bg-white p-3 space-x-1 space-y-0"},Et={class:"w-full flex flex-col md:flex-row pb-2"},It=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 md:text-2xl text-xl"},"Stock:")],-1),Ot={class:"w-full md:w-2/3"},Rt={class:"font-normal text-gray-800 md:text-2xl text-xl"},Bt={class:"w-full flex flex-col md:flex-row pb-2"},Nt=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"},"SKU:")],-1),Vt={class:"w-full md:w-2/3"},jt={class:"font-normal text-gray-800 text-base"},Pt={class:"w-full flex flex-col md:flex-row pb-3"},Ft=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"},"CÓDIGO DE BARRA:")],-1),Ut={class:"w-full md:w-2/3"},Ht={class:"font-normal text-gray-800 text-base"},zt=t("div",{class:"w-full flex flex-col md:flex-row pt-2"},[t("div",{class:"bg-gray-200 w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"PRÓXIMO INGRESO")])],-1),$t=t("div",{class:"w-full flex"},[t("div",{class:"w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"IMPORTACIÓN")]),t("div",{class:"w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"CANTIDAD")]),t("div",{class:"w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"FECHA APROX.")])],-1),Xt={key:0,class:"w-full"},Gt={class:"w-full flex py-1"},Kt={class:"w-full text-center"},Lt={class:"font-normal text-gray-800 text-lg"},Wt={class:"w-full text-center"},Zt={class:"font-normal text-gray-800 text-lg"},qt={class:"w-full text-center"},Jt={class:"font-normal text-gray-800 text-lg"},Qt=t("div",{class:"w-full flex flex-col md:flex-row pt-2"},[t("div",{class:"bg-gray-200 w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"COSTO REAL")])],-1),te={class:"w-full flex flex-col md:flex-row py-1"},ee=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"}," USD (IVA INC.):")],-1),oe={class:"w-full md:w-2/3"},se={class:"font-normal text-gray-800 text-base"},le={class:"w-full flex flex-col md:flex-row py-1"},ae=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"}," Precio Aprox:")],-1),re={class:"w-full md:w-2/3"},de={class:"font-normal text-gray-800 text-base"},ne={class:"w-full flex flex-col md:flex-row py-1"},ce=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"}," Cotización Yuanes:")],-1),ie={class:"w-full md:w-2/3"},ue={class:"font-normal text-gray-800 text-base"},me={class:"w-full flex flex-col md:flex-row py-1"},pe=t("div",{class:"w-full md:w-1/3 xl:w-1/3 mr-2"},[t("h3",{class:"font-semibold text-gray-800 text-base"}," Observaciones:")],-1),xe={class:"w-full md:w-2/3"},fe={class:"font-normal text-gray-800 text-base"},_e={key:1,class:"w-full flex flex-col md:flex-row pt-2"},he=t("div",{class:"bg-gray-200 w-full text-center"},[t("h3",{class:"font-semibold text-gray-800 text-lg"},"ATRIBUTOS")],-1),be=[he],ge={class:"w-full flex flex-col md:flex-row py-1"},ve={class:"w-full md:w-1/3 xl:w-1/3 mr-2"},we={class:"font-semibold text-gray-800 text-base"},ye={class:"w-full md:w-2/3"},De={class:"font-normal text-gray-800 text-base"},Ce={class:"bg-white mr-0 ml-0 mt-6 shadow rounded-lg border border-gray-300"},ke={class:"bg-gray-100 rounded-t-lg py-2 px-3"},Ye={class:"text-2xl font-medium pb-0 pl-2"},Me=t("div",{class:"bg-gradient-to-r from-primary-900 to-primary-100 h-1 mb-4"},null,-1),Ae={class:"align-middle p-2"},Te={class:"flex justify-content-end text-md"},Se={class:"ml-5 col-span-1 md:col-span-3 lg:col-span-3"},Ee={key:0,class:"w-10 h-8 ml-5 rounded flex justify-center items-center text-base font-semibold text-white mr-1"},Ie=t("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),Oe={class:"bg-white mr-0 ml-0 mt-6 shadow rounded-lg border border-gray-300"},Re={class:"bg-gray-100 rounded-t-lg py-2 px-3"},Be={class:"text-2xl font-medium pb-0 pl-2"},Ne=t("div",{class:"bg-gradient-to-r from-secondary-900 to-secondary-100 h-1 mb-4"},null,-1),Ve={class:"align-middle p-2"},je={class:"flex justify-content-end text-md"},Pe={class:"ml-5 col-span-1 md:col-span-3 lg:col-span-3"},Fe={class:"text-md"},Ue={class:"text-md"},He={class:"text-md"},O="Detalle Producto",w="productos",So={__name:"Show",setup(ze){const{permissions:R}=i().props.auth,q=u("/images/productos/sin_foto.png"),{roles:B}=i().props.auth,{costo_real:J}=i().props,{costo_aprox:Q}=i().props,{productoEnCamino:N}=i().props,{atributos:tt}=i().props,{ultimo_yang:V}=i().props,D=u(),et=_t(),C=u(),k=u(),Y=u(),o=xt({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",observaciones:"",stock:0,stock_minimo:0,imagen:"",photo:"",categorias:[],atributos:[]}),j=u([new Date,new Date]),P=u([new Date,new Date]),h=u([]),ot=e=>{e[0]!=null&&e[1]!=null?(h.value=[e[0],e[1]],$.get(route(w+".productoventa",[i().props.producto.id,b(e[0]).format("YYYY-MM-DD"),b(e[1]).format("YYYY-MM-DD")])).then(a=>{var p=a.data;D.value=p.cantidad,k.value=Array.from(p.productoventa,f=>f)})):location.reload()},st=(e,a,p)=>{et.add({severity:e,summary:a,detail:p,life:3e3})},lt=e=>{o.clearErrors(),o.post(route(w+".duplicar",e),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{st("success","Mensaje","Producto Duplicado"),setTimeout(()=>{location.reload()},500)},onFinish:()=>{},onError:()=>{}})},at=e=>{h.value[0]!=null&&h.value[1]!=null?window.open(route("productos.exportproductoventas",[o.id,{inicio:h.value[0],fin:h.value[1]}]),"_blank"):window.open(route("productos.exportproductoventas",[o.id]),"_blank")},rt=e=>{e[0]!=null&&e[1]!=null?$.get(route(w+".productoimportacion",[i().props.producto.id,b(e[0]).format("YYYY-MM-DD"),b(e[1]).format("YYYY-MM-DD")])).then(a=>{var p=a.data;C.value=p.cantidad_importacion,Y.value=Array.from(p.producto,f=>f)}):location.reload()},dt=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[y(new Date,1),y(new Date,1)]}},{text:"Este mes",onClick(){return[X(new Date),G(new Date)]}},{text:"Este año",onClick(){return[K(new Date),L(new Date)]}}],nt=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[y(new Date,1),y(new Date,1)]}},{text:"Este mes",onClick(){return[X(new Date),G(new Date)]}},{text:"Este año",onClick(){return[K(new Date),L(new Date)]}}],ct=e=>b(e).format("DD/MM/YYYY");ht(()=>{k.value=Array.from(i().props.productoventa,a=>a),C.value=i().props.cantidad_importacion,D.value=i().props.cantidad,Y.value=Array.from(i().props.productoImportacion,a=>a);var e=i().props.producto;o.id=e.id,o.nombre=e.nombre,o.origen=e.origen,o.aduana=e.aduana,o.codigo_barra=e.codigo_barra,o.stock=e.stock,o.stock_minimo=e.stock_minimo,o.stock_futuro=e.stock_futuro,o.observaciones=e.observaciones,q.value=e.imagen,o.imagen=e.imagen,o.categorias=e.categorias,o.atributos=tt});const M=u({global:{value:null,matchMode:H.CONTAINS}}),A=u({global:{value:null,matchMode:H.CONTAINS}}),it=e=>{S.get(route(w+".edit",e))},ut=e=>{S.get(route("ventas.show",e.data.venta_id))},mt=e=>{S.get(route("importaciones.show",e.data.importacion_id))};return(e,a)=>{const p=g("Toast"),f=g("Button"),F=g("InputText"),c=g("Column"),U=g("DataTable"),T=bt("tooltip");return m(),x(I,null,[r(l(ft),{title:O}),r(pt,{pagina:[{label:"Productos",link:!0,url:e.route(w+".index")},{label:O,link:!1}]},{default:n(()=>[t("div",gt,[r(p),t("div",vt,[t("div",{class:"px-3 col-span-10 flex justify-between items-center"},[t("h5",{class:"text-xl font-medium"},d(O))]),t("div",wt,[l(R).includes("productos-editar")?E((m(),W(f,{key:0,label:"Duplicar",onClick:a[0]||(a[0]=s=>lt(l(o).id)),pt:{root:{class:"flex items-center bg-green-700 hover:bg-green-600 justify-center font-medium w-10 mx-3"},label:{class:"hidden"}}},{default:n(()=>[yt]),_:1})),[[T,{value:"Duplicar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):_("",!0),l(R).includes("productos-editar")?E((m(),W(f,{key:1,label:"Editar",onClick:a[1]||(a[1]=s=>it(l(o).id)),pt:{root:{class:"flex items-center bg-primary-900 justify-center font-medium w-10"},label:{class:"hidden"}}},{default:n(()=>[Dt]),_:1})),[[T,{value:"Editar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):_("",!0)])]),t("div",Ct,[t("div",kt,[t("h3",Yt,d(l(o).nombre),1)])]),t("div",Mt,[t("div",At,[t("img",{alt:l(o).nombre,src:l(o).imagen,class:"rounded-xl shadow-lg"},null,8,Tt)]),t("div",St,[t("div",Et,[It,t("div",Ot,[t("h3",Rt,d(l(o).stock),1)])]),t("div",Bt,[Nt,t("div",Vt,[t("h3",jt,d(l(o).origen),1)])]),t("div",Pt,[Ft,t("div",Ut,[t("h3",Ht,d(l(o).codigo_barra),1)])]),zt,$t,l(N).length>0?(m(),x("div",Xt,[(m(!0),x(I,null,Z(l(N),s=>(m(),x("div",Gt,[t("div",Kt,[t("h3",Lt,d(s.nro_carpeta),1)]),t("div",Wt,[t("h3",Zt,d(s.cantidad_total),1)]),t("div",qt,[t("h3",Jt,d(s.fecha_arribado),1)])]))),256))])):_("",!0),Qt,t("div",te,[ee,t("div",oe,[t("h3",se,d(l(J)),1)])]),t("div",le,[ae,t("div",re,[t("h3",de,d(l(Q)??"-"),1)])]),t("div",ne,[ce,t("div",ie,[t("h3",ue,d(l(V)>0?l(V):"-"),1)])]),t("div",me,[pe,t("div",xe,[t("h3",fe,d(l(o).observaciones),1)])]),l(o).atributos.length>0?(m(),x("div",_e,be)):_("",!0),l(o).atributos.length>0?(m(!0),x(I,{key:2},Z(l(o).atributos,(s,$e)=>(m(),x("div",ge,[t("div",ve,[t("h3",we,d(s.nombre)+": ",1)]),t("div",ye,[t("h3",De,d(s.valor),1)])]))),256)):_("",!0)])]),t("div",Ce,[t("div",ke,[t("h2",Ye,"Pedidos: "+d(D.value),1)]),Me,t("div",Ae,[r(U,{filters:M.value,onRowClick:ut,value:k.value,pt:{bodyRow:{class:"hover:cursor-pointer hover:bg-gray-100 hover:text-black"},root:{class:"w-auto"}},scrollable:"",scrollHeight:"350px",virtualScrollerOptions:{numToleratedItems:30,itemSize:46},tableStyle:"min-width: 50rem",size:"small"},{header:n(()=>[t("div",Te,[r(F,{modelValue:M.value.global.value,"onUpdate:modelValue":a[2]||(a[2]=s=>M.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"]),t("div",Se,[r(l(z),{onChange:ot,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",value:j.value,"onUpdate:value":a[3]||(a[3]=s=>j.value=s),shortcuts:dt,lang:"es",clearable:!1,placeholder:"seleccione Fecha"},null,8,["value"])]),l(B).includes("Super Administrador")||l(B).includes("Administrador")?E((m(),x("div",Ee,[r(f,{onClick:a[4]||(a[4]=s=>at(l(o).id)),pt:{root:{class:"py-auto px-3 py-2.5 text-xl bg-green-600 border-none hover:bg-green-500"}}},{default:n(()=>[Ie]),_:1})])),[[T,{value:"Descargar Excel",pt:{text:"bg-gray-500 text-xs text-white rounded"}},void 0,{top:!0}]]):_("",!0)])]),empty:n(()=>[v(" No existe Resultado ")]),loading:n(()=>[v(" Cargando... ")]),default:n(()=>[r(c,{field:"created_at",sortable:"",header:"Fecha",pt:{bodyCell:{class:"text-center"}}},{body:n(({data:s})=>[v(d(ct(s.created_at)),1)]),_:1}),r(c,{field:"cantidad",sortable:"",header:"Cantidad",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"precio",sortable:"",header:"Precio",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"destino",sortable:"",header:"Destino",pt:{bodyCell:{class:"text-center"}}})]),_:1},8,["filters","value"])])]),t("div",Oe,[t("div",Re,[t("h2",Be,"Importaciones: "+d(C.value),1)]),Ne,t("div",Ve,[r(U,{filters:A.value,onRowClick:mt,value:Y.value,pt:{bodyRow:{class:"hover:cursor-pointer hover:bg-gray-100 hover:text-black"},root:{class:"w-auto"}},scrollable:"",scrollHeight:"350px",virtualScrollerOptions:{itemSize:46},tableStyle:"min-width: 50rem",size:"small"},{header:n(()=>[t("div",je,[r(F,{modelValue:A.value.global.value,"onUpdate:modelValue":a[5]||(a[5]=s=>A.value.global.value=s),placeholder:"Buscar"},null,8,["modelValue"]),t("div",Pe,[r(l(z),{onChange:rt,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",value:P.value,"onUpdate:value":a[6]||(a[6]=s=>P.value=s),shortcuts:nt,lang:"es",placeholder:"seleccione Fecha",clearable:!1},null,8,["value"])])])]),empty:n(()=>[v(" No existe Resultado ")]),loading:n(()=>[v(" Cargando... ")]),default:n(()=>[r(c,{field:"importacion.nro_carpeta",header:"No. de Carpeta",sortable:"",pt:{bodyCell:{class:"text-center"}}},{loading:n(()=>[]),body:n(s=>[t("span",Fe,d(s.data.importacion.nro_carpeta),1)]),_:1}),r(c,{field:"importacion.fecha",header:"Fecha Arribo",sortable:"",pt:{bodyCell:{class:"text-center"}}},{body:n(s=>[t("span",Ue,d(s.data.importacion.fecha),1)]),_:1}),r(c,{header:"Costo Real",sortable:"",pt:{bodyCell:{class:"text-center"}}},{body:n(s=>[t("span",He,d(s.data.real_costo.length>0?s.data.real_costo[0].monto:"0.00"),1)]),_:1}),r(c,{field:"precio",sortable:"",header:"EXW Precio",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"pcs_bulto",sortable:"",header:"PCS/Bulto",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"bultos",sortable:"",header:"Bulto",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"cantidad_total",sortable:"",header:"Cantidad Total",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"valor_total",sortable:"",header:"Valor Total",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"cbm_bulto",sortable:"",header:"CBM/Bulto",pt:{bodyCell:{class:"text-center"}}}),r(c,{field:"cbm_total",sortable:"",header:"Total CBM",pt:{bodyCell:{class:"text-center"}}})]),_:1},8,["filters","value"])])])])]),_:1},8,["pagina"])],64)}}};export{So as default};
