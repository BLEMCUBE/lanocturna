import{k as P,l as _,K as b,T as q,N as y,h as A,m as S,p as M,f as p,a as n,u as i,w as U,q as B,o as h,Z as K,b as e,t as m,v as F,z as L,a7 as V,y as R,s as Z,n as G,e as H,g as J,O as g}from"./app-37cfa002.js";import{_ as Q,S as W}from"./AppLayout-874ac3c1.js";import{s as X}from"./multiselect-d77722b6.js";import{_ as Y}from"./Pagination-d4d1a54a.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const ee={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},te={class:"px-3 pb-2 col-span-full flex justify-end items-center"},oe={class:"w-8 h-8 rounded bg-green-600 flex justify-center mr-5 items-center text-base font-semibold text-white hover:bg-green-600"},se=["href"],ae=e("i",{class:"fas fa-file-excel text-white"},null,-1),le=[ae],re={class:"align-middle py-4"},ne={class:"grid grid-cols-12 gap-4 m-3"},ie={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ce={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},de={style:{overflow:"auto","max-height":"700px"}},ue={class:"w-full text-md bg-white shadow-md rounded mb-4"},me=e("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[e("tr",{class:"bg-secondary-100"},[e("th",{class:"p-1.5"},"Stock"),e("th",null,"Stock futuro"),e("th",{class:"p-2"},"Imagen"),e("th",null,"Origen"),e("th",null,"Nombre"),e("th",null,"Categoría"),e("th",null,"Acciones")])],-1),pe=["onClick"],he=["onClick"],ge=["onClick"],_e=["src"],fe=["onClick"],xe=["onClick"],be=["onClick"],ve=["onClick"],we=e("i",{class:"fas fa-trash-alt"},null,-1),Ce=[we],v="Productos",c="productos",je={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(f){const w=f,j=P(),T=_(),{permissions:$}=b().props.auth,D=q({id:""});let l=_([w.filtro.categoria]),d=_(w.filtro.buscar);y(d,o=>{g.get(route(c+".index"),{buscar:o,categoria:l.value},{preserveState:!0,replace:!0})}),y(l,o=>{g.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const E=(o,s,r)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(r))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(r)>parseFloat(o))return"bg-orange-500 text-black"},O=o=>{g.get(route(c+".show",o))},N=(o,s)=>{W.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(x=>{x.isConfirmed&&D.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{z("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(c+".index"))},1e3)}})})},C=_({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});A(()=>{T.value=b().props.productos.data,C.value.options=b().props.lista_categorias});const z=(o,s,r)=>{j.add({severity:o,summary:s,detail:r,life:3e3})},I=()=>{g.get(route(c+".create"))},u=o=>{O(o)};return(o,s)=>{const r=S("Toast"),x=S("InputText"),k=M("tooltip");return h(),p(B,null,[n(i(K),{title:v}),n(Q,{pagina:[{label:v,link:!1}]},{default:U(()=>[e("div",ee,[n(r),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},m(v))]),e("div",te,[F((h(),p("span",oe,[e("a",{href:o.route(c+".exportar",{categoria:i(l)}),target:"_blank",class:"py-auto"},le,8,se)])),[[k,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),n(i(L),{size:"small",label:"Agregar Producto",severity:"success",onClick:I})]),e("div",re,[e("div",ne,[e("div",ie,[n(x,{class:"w-full",modelValue:i(d),"onUpdate:modelValue":s[0]||(s[0]=t=>V(d)?d.value=t:d=t),placeholder:"Buscar"},null,8,["modelValue"])]),e("div",ce,[n(i(X),R({id:"categorias",modelValue:i(l),"onUpdate:modelValue":s[1]||(s[1]=t=>V(l)?l.value=t:l=t),class:"w-full"},C.value),null,16,["modelValue"])])]),e("div",de,[e("table",ue,[me,e("tbody",null,[(h(!0),p(B,null,Z(f.productos.data,t=>(h(),p("tr",{class:G(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",E(t.stock,t.stock_minimo,t.stock_futuro)])},[e("td",{onClick:a=>u(t.id)},m(t.stock??""),9,pe),e("td",{onClick:a=>u(t.id)},m(t.stock_futuro),9,he),e("td",{onClick:a=>u(t.id)},[e("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:t.imagen,alt:"image"},null,8,_e)],8,ge),e("td",{onClick:a=>u(t.id)},m(t.origen),9,fe),e("td",{onClick:a=>u(t.id)},m(t.nombre),9,xe),e("td",{onClick:a=>u(t.id)},m(t.categorias.map(a=>a.name).join(",")??""),9,be),e("td",null,[i($).includes("eliminar-productos")?F((h(),p("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:H(a=>N(t.id,t.nombre),["prevent"])},Ce,8,ve)),[[k,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):J("",!0)])],2))),256))])])]),n(Y,{elements:f.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{je as default};
