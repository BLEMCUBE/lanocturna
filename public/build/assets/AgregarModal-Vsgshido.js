import{r as i,o as O,M as v,e as S,f as E,Q as o,S as R,i as l,ab as a,O as Y,a0 as N,q as F,p as L}from"./@vue-BG0wrCoO.js";import{_ as m}from"./InputError-cOM6HFrc.js";import{_ as u}from"./InputLabel-BIVuqiPx.js";import{T as P,O as z}from"./@inertiajs-BPLxF6VH.js";import{a as G}from"./axios-ngrFHoWO.js";import{i as $}from"./vue-datepicker-next-BBtlwD79.js";import"./deepmerge-CejY7WQD.js";import"./qs-DSMFT7gQ.js";import"./side-channel-C2E4DO94.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-sCGRVelf.js";import"./nprogress-D6y_-DtI.js";import"./lodash.clonedeep-DcClQ2Wp.js";import"./lodash.isequal-qgBWtdDc.js";import"./date-format-parse-DuecP4dO.js";const j={class:"px-2 pt-0 pb-0 grid grid-cols-12 gap-2 mb-2"},q={class:"col-span-12 shadow-default my-auto"},H={class:"col-span-12"},Q={class:"col-span-12 shadow-default"},J={class:"col-span-12 shadow-default lg:col-span-12"},K={class:"col-span-12 shadow-default my-auto"},W={class:"flex justify-end py-3"},_="pagos-compras",De={__name:"AgregarModal",props:{importacionId:{type:Number,default:null},showAgregar:{type:Boolean,default:!1}},emits:["pass-info"],setup(M,{emit:C}){const h=M,c=i({name:"Pesos",code:"Pesos"}),y=i([{name:"Pesos",code:"Pesos"},{name:"D贸lares",code:"D贸lares"}]),D=r=>{c.value.code!=e.moneda&&(e.moneda=c.value.code)},x=i("CANCELAR"),f=i(!1),e=P({id:"",nro_factura:"",banco:"",moneda:"",fecha_pago:"",nro_transaccion:"",monto:"",saldo:0,tpagado:""});function w(){C("pass-info",{store:x.value,importacionId:h.importacionId})}const V=r=>{g.value.code!=e.banco&&(e.banco=g.value.code)};O(()=>{B(h.importacionId)});const g=i(),A=i([{name:"BROU",code:"BROU"},{name:"ITAU",code:"ITAU"},{name:"OTROS",code:"OTROS"}]),B=r=>{G.get(route(_+".showdetalle",r)).then(t=>{var n=t.data.importacion;e.id=n.id,e.moneda=n.moneda,e.tpagado=n.compra_pagos.reduce((d,b)=>d+parseFloat(b.monto),0).toFixed(2),e.saldo=n.total-e.tpagado,c.value=y.value.find(d=>d.code===n.moneda),e.nro_factura=n.nro_factura,f.value=!0})},T=()=>{e.reset(),e.clearErrors(),x.value="CANCELAR",w()},I=()=>{e.clearErrors(),e.post(route(_+".store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,x.value="AGREGAR",setTimeout(()=>{z.get(route(_+".index"))},1e3)},onFinish:()=>{},onError:r=>{console.log(r)}})};return(r,t)=>{const n=v("Dropdown"),d=v("InputText"),b=v("Button"),U=v("Dialog");return E(),S("section",null,[o(U,{visible:f.value,"onUpdate:visible":t[5]||(t[5]=s=>f.value=s),onHide:w,modal:"",header:`Agregar pago a compra: ${a(e).nro_factura}`,style:{width:"20vw"},position:"top",pt:{header:{class:"mt-4 p-2"},content:{class:"p-2"}}},{default:R(()=>[l("form",null,[l("div",j,[l("div",q,[o(u,{for:"fecha_pago",value:"Fecha",class:"block text-base font-medium leading-6 text-gray-900"}),o(a($),{clearable:!1,editable:!0,type:"date","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"p-component col-span-6 text-gray-700 bg-white transition-colors duration-200 border-0 px-0 py-0",value:a(e).fecha_pago,"onUpdate:value":t[0]||(t[0]=s=>a(e).fecha_pago=s),lang:"es",placeholder:"Seleccione Fecha"},null,8,["value"]),o(m,{class:"mt-1 text-xs",message:a(e).errors.fecha_pago},null,8,["message"])]),l("div",H,[o(u,{for:"moneda",value:"Moneda",class:"text-base font-medium leading-1 text-gray-900"}),o(n,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),onChange:D,disabled:"",options:y.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:k,context:p})=>({class:p.selected?"text-white bg-primary-900":p.focused?"bg-blue-100":void 0})},placeholder:"Seleccione Moneda"},null,8,["modelValue","options","pt"]),o(m,{class:"mt-1 text-xs",message:a(e).errors.moneda},null,8,["message"])]),l("div",Q,[o(u,{for:"banco",value:"Banco",class:"block text-base font-medium leading-6 text-gray-900"}),o(n,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),onChange:V,options:A.value,optionLabel:"name",pt:{root:{class:"w-full"},trigger:{class:"fas fa-caret-down text-gray-200 my-auto"},item:({props:s,state:k,context:p})=>({class:p.selected?"text-white bg-primary-900":p.focused?"bg-blue-100":void 0})},placeholder:"Seleccione banco"},null,8,["modelValue","options","pt"]),o(m,{class:"mt-1 text-xs",message:a(e).errors.banco},null,8,["message"])]),l("div",J,[o(u,{for:"nro_transaccion",value:"Nro. de Transacci贸n",class:"block text-base font-medium leading-6 text-gray-900"}),o(d,{type:"text",id:"nro_transaccion",modelValue:a(e).nro_transaccion,"onUpdate:modelValue":t[3]||(t[3]=s=>a(e).nro_transaccion=s),placeholder:"Ingrese Nro. de Transacci贸n",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),o(m,{class:"mt-1 text-xs",message:a(e).errors.nro_transaccion},null,8,["message"])]),l("div",K,[o(u,{for:"monto",value:"Monto",class:"block text-base font-medium leading-6 text-gray-900"}),Y(l("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>a(e).monto=s),class:"p-inputtext p-component text-gray-700 bg-white border appearance-none rounded text-basw h-9 m-0 w-full text-end"},null,512),[[N,a(e).monto]]),o(m,{class:"mt-1 text-xs",message:a(e).errors.monto},null,8,["message"])])]),l("div",W,[o(b,{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:T,type:"button"}),o(b,{label:"Guardar",size:"small",type:"button",onClick:L(I,["prevent"]),class:F({"opacity-50":a(e).processing}),disabled:a(e).processing},null,8,["onClick","class","disabled"])])])]),_:1},8,["visible","header"])])}}};export{De as default};
