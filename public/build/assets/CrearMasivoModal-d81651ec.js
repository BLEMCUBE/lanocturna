import{r as i,O as S,g as u,S as a,E as r,V as b,f as m,j as e,u as D,t as P,F as j,v as z,A as h,n as A}from"./@vue-1043e4d5.js";import{_ as N}from"./InputError-933cc936.js";import{_ as V}from"./InputLabel-bc304214.js";import{T as $,O as B}from"./@inertiajs-ab1bf9dd.js";import{aG as L,h as n}from"./primevue-232ee6f7.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./apexcharts-f697a6eb.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";const O={class:"space-y-4"},T={class:"h-8"},I={class:"px-2 grid grid-cols-6 gap-2 md:gap-3 mb-2"},U={class:"col-span-12 md:col-span-6 shadow-default lg:col-span-6 mx-2 py-2"},G=["disabled"],q={class:"flex justify-end py-2"},H={class:"h-8"},J={key:0},K=e("p",{class:"mb-2 font-semibold text-md"}," Los siguientes productos ya existen registrado. ",-1),Q={class:"w-full border"},R=e("thead",null,[e("tr",{class:"w-full border"},[e("th",{class:"w-26 text-center border"}," Fila "),e("th",{class:"text-center border"}," Sku "),e("th",{class:"text-center border"}," CÃ³digo de barra ")])],-1),W={class:"w-full text-center border"},X={class:"text-center border"},Y={class:"text-center border"},Z={class:"text-center border"},ee=e("div",{class:"flex flex-column align-items-center",style:{flex:"1"}},[e("div",{class:"text-center"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-500",style:{"font-size":"3rem"}})]),e("div",{class:"font-semibold text-xl m-3"},"No se ha podido importar")],-1),te={class:"flex justify-end py-3"},se="Producto Masivo",y="productos",ke={__name:"CrearMasivoModal",setup(oe){const g=L(),c=i(!1),f=i(!1),v=i(null),_=i(),d=i(!1),s=$({archivo:""}),w=t=>{s.clearErrors(),t.preventDefault(),s.archivo=t.target.files[0]},C=()=>{s.reset("archivo"),d.value=!1},k=()=>{c.value=!0},x=()=>{v.value.value=null,s.reset("archivo"),c.value=!1},M=t=>{if(t.length>0)window.open(route("plantillas.importar",t),"_blank");else return},E=()=>{f.value=!0,s.clearErrors(),s.post(route(y+".storemasivo"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,F("success","Mensaje","Productos creados"),setTimeout(()=>{B.get(route(y+".index"))},1e3)},onFinish:()=>{},onError:t=>{f.value=!1,v.value.value=null,s.reset("archivo"),t.filas!=null&&t.filas.length>0&&(_.value=t.filas,x(),d.value=!0)}})},F=(t,o,p)=>{g.add({severity:t,summary:o,detail:p,life:3e3})};return(t,o)=>{const p=S("Dialog");return m(),u("section",O,[a(r(n),{size:"small",onClick:k,type:"button",label:"Crear Producto Masivo",severity:"success"}),a(p,{visible:c.value,"onUpdate:visible":o[1]||(o[1]=l=>c.value=l),modal:"",header:"Crear "+se,style:{width:"40vw"},position:"top",pt:{header:{class:"mt-6 px-4 py-2"},content:{class:"px-4 py-2"}}},{default:b(()=>[e("div",T,[a(r(n),{label:"Descargar formato",severity:"success",type:"button",class:"p-1 text-xs ring-0 font-medium",onClick:o[0]||(o[0]=l=>M("formato_crear_masivo_productos.xlsx"))})]),e("div",I,[e("div",U,[a(V,{for:"file_input1",value:"Importar Excel",class:"block text-base font-medium leading-6 text-gray-900"}),e("input",{ref_key:"inputArchivo",ref:v,onInput:w,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-primary-900 file:text-white hover:file:bg-primary-900/80 hover:file:cursor-pointer file:disabled::opacity-75 file:disabled:cursor-no-drop disabled:opacity-75 disabled:cursor-no-drop",disabled:r(s).processing,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,40,G),a(N,{class:"mt-1 text-xs",message:r(s).errors.archivo},null,8,["message"])])]),e("div",q,[a(r(n),{label:"Cancelar",pt:{root:"mr-5 py-0"},severity:"danger",onClick:x,type:"button"}),e("div",H,[a(r(n),{label:"Crear Productos",type:"button",class:D(["text-normal",{"opacity-50":r(s).processing}]),disabled:r(s).processing,onClick:P(E,["prevent"])},null,8,["class","disabled","onClick"])])])]),_:1},8,["visible","header"]),a(p,{visible:d.value,"onUpdate:visible":o[3]||(o[3]=l=>d.value=l),modal:"",style:{width:"40vw"},pt:{header:{class:"mt-5 pb-2 px-5"},content:{class:"p-4"}}},{header:b(()=>[ee]),default:b(()=>[_.value.length>0?(m(),u("div",J,[K,e("table",Q,[R,e("tbody",null,[(m(!0),u(j,null,z(_.value,l=>(m(),u("tr",W,[e("td",X,h(l.fila),1),e("td",Y,h(l.sku),1),e("td",Z,h(l.codigo_barra),1)]))),256))])])])):A("",!0),e("div",te,[a(r(n),{label:"Aceptar",size:"small",type:"button",onClick:o[2]||(o[2]=l=>C())})])]),_:1},8,["visible"])])}}};export{ke as default};
