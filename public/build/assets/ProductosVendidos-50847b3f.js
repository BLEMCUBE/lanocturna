import{_ as T}from"./AppLayout-08ffa2ac.js";import{K as i,Z as B,O as f}from"./@inertiajs-ab1bf9dd.js";import{i as I}from"./vue-datepicker-next-31061510.js";import{h as v}from"./moment-fbc5633a.js";import{aH as F}from"./primevue-232ee6f7.js";import{s as U}from"./@vueform-21ff8afc.js";import{_ as K}from"./Pagination-e120bd15.js";import{s as g,a as L,e as R,b as H,c as q}from"./date-fns-7c3f4903.js";import{r as c,w as M,o as z,O as S,P as Q,g as h,S as m,E as d,V,F as j,f as x,j as t,A as u,Q as Z,n as G,K as k,q as J,v as W}from"./@vue-1043e4d5.js";import"./logo-e22dfca4.js";import"./pinia-ff353768.js";import"./@vueuse-54bafaaf.js";import"./sweetalert2-c47eda61.js";import"./apexcharts-f697a6eb.js";import"./@headlessui-edafee9e.js";import"./@heroicons-7e6153ac.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./axios-4a70c6fc.js";import"./deepmerge-34bd70bf.js";import"./qs-ba0d1d34.js";import"./side-channel-009c6bc3.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-0f5d75dd.js";import"./nprogress-a144f12f.js";import"./lodash.clonedeep-6a476b09.js";import"./lodash.isequal-cbdfea98.js";import"./date-format-parse-388037e5.js";import"./@babel-7fd5df1e.js";const X={class:"card px-2 mb-4 col-span-12 rounded-lg"},tt=t("div",{class:"col-span-full flex justify-between items-center"},[t("h5",{class:"text-2xl font-medium"},"Listado Productos más vendidos")],-1),et={class:"grid grid-cols-12 gap-4 mt-4 mb-2"},ot={class:"card px-4 mb-4 bg-white col-span-12 justify-center md:col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},at={class:"w-full flex items-center mt-4"},st={class:"font-bold"},lt={key:0,class:"w-10 h-10 ml-20 rounded flex justify-center items-center text-base font-semibold text-white mr-1"},nt=t("i",{class:"fas fa-file-excel text-white text-lg"},null,-1),rt={class:"align-middle py-4"},it={class:"grid grid-cols-12 gap-4 m-3"},ct={class:"flex justify-content-end text-md col-span-12 lg:col-span-3 2xl:col-span-3"},dt={class:"flex justify-content-end text-md col-span-12 lg:col-span-5 2xl:col-span-7"},ut={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-2"},pt={style:{overflow:"auto","max-height":"700px"}},mt={class:"w-full text-md bg-white shadow-md rounded mb-4"},vt=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"SKU"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Stock"),t("th",null,"Costo Aprox."),t("th",null,"Ventas Totales"),t("th",null,"Porcentaje")])],-1),_t={class:"border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black"},ft=["onClick"],gt=["onClick"],ht=["src"],xt=["onClick"],bt=["onClick"],wt=["onClick"],kt=["onClick"],Dt=["onClick"],Yt=["onClick"],Ct="Productos Vendidos",D="reportes",yt="productos",ne={__name:"ProductosVendidos",props:{total_productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(Y){const{roles:C}=i().props.auth,_=c();let s=c([]),l=c(),o=c([]),b=c(),w=c();o.value=[v(g(new Date,30)).format("YYYY-MM-DD"),v(new Date).format("YYYY-MM-DD")],M(l,a=>{f.get(route(D+".productosvendidos"),{buscar:l.value,categoria:s.value,inicio:o.value[0],fin:o.value[1]},{preserveState:!0,replace:!0,onSuccess:()=>{_.value=i().props.total_cantidad,s.value=i().props.filtro.categoria}})}),M(s,a=>{f.get(route(D+".productosvendidos"),{buscar:l.value,categoria:s.value,inicio:o.value[0],fin:o.value[1]},{preserveState:!0,replace:!0,onSuccess:()=>{_.value=i().props.total_cantidad}})});const O=a=>{a[0]!=null&&a[1]!=null?(o.value=[v(a[0]).format("YYYY-MM-DD"),v(a[1]).format("YYYY-MM-DD")],b.value=o.value[0],w.value=o.value[1]):(o.value=[],b.value=null,w.value=null),f.get(route(D+".productosvendidos"),{buscar:l.value,categoria:s.value,inicio:b.value,fin:w.value},{preserveState:!0,replace:!0,onSuccess:()=>{_.value=i().props.total_cantidad,s.value=i().props.filtro.categoria}})},y=c({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),A=()=>{if(o.value[0]!=null&&o.value[1]!=null)window.open(route("reportes.exportproductoventas",[{categoria:s.value,inicio:o.value[0],fin:o.value[1]}]),"_blank");else return};z(()=>{_.value=i().props.total_cantidad,y.value.options=i().props.lista_categorias,o.value=[v(g(new Date,30)).format("YYYY-MM-DD"),v(new Date).format("YYYY-MM-DD")]}),c({global:{value:null,matchMode:F.CONTAINS}});const $=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[g(new Date,1),g(new Date,1)]}},{text:"Este mes",onClick(){return[L(new Date),R(new Date)]}},{text:"Este año",onClick(){return[H(new Date),q(new Date)]}}],n=a=>{f.get(route(yt+".show",a))};return(a,r)=>{const E=S("Button"),N=S("InputText"),P=Q("tooltip");return x(),h(j,null,[m(d(B),{title:"Reporte Ventas"}),m(T,{pagina:[{label:"Reportes",link:!1},{label:Ct,link:!1}]},{default:V(()=>[t("div",X,[tt,t("div",et,[t("div",ot,[t("div",at,[t("div",st," TOTAL CANTIDADES: "+u(_.value),1),d(C).includes("Super Administrador")||d(C).includes("Administrador")?Z((x(),h("div",lt,[m(E,{onClick:r[0]||(r[0]=e=>A()),pt:{root:{class:"py-auto px-2.5 py-2 text-lg bg-green-600 border-none hover:bg-green-500"}}},{default:V(()=>[nt]),_:1})])),[[P,{value:"Descargar Excel",pt:{text:"bg-gray-500 text-xs text-white rounded"}},void 0,{top:!0}]]):G("",!0)]),t("div",rt,[t("div",it,[t("div",ct,[m(N,{class:"h-9 w-full",modelValue:d(l),"onUpdate:modelValue":r[1]||(r[1]=e=>k(l)?l.value=e:l=e),placeholder:"Buscar"},null,8,["modelValue"])]),t("div",dt,[m(d(U),J({id:"categorias",modelValue:d(s),"onUpdate:modelValue":r[2]||(r[2]=e=>k(s)?s.value=e:s=e),class:"w-full"},y.value),null,16,["modelValue"])]),t("div",ut,[m(d(I),{onChange:O,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",class:"col-span-6 lg:col-span-2 font-sans font-normal text-gray-700 bg-white transition-colors duration-200 border-0 text-sm",value:d(o),"onUpdate:value":r[3]||(r[3]=e=>k(o)?o.value=e:o=e),shortcuts:$,lang:"es",editable:"false",placeholder:"Seleccione Fecha"},null,8,["value"])])]),t("div",pt,[t("table",mt,[vt,t("tbody",null,[(x(!0),h(j,null,W(Y.total_productos.data,e=>(x(),h("tr",_t,[t("td",{onClick:p=>n(e.id)},u(e.sku),9,ft),t("td",{onClick:p=>n(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,ht)],8,gt),t("td",{onClick:p=>n(e.id)},u(e.nombre),9,xt),t("td",{onClick:p=>n(e.id)},u(e.categorias),9,bt),t("td",{onClick:p=>n(e.id)},u(e.stock??0),9,wt),t("td",{onClick:p=>n(e.id)},u(e.costo_aprox),9,kt),t("td",{onClick:p=>n(e.id)},u(e.ventas_totales),9,Dt),t("td",{onClick:p=>n(e.id)},u(e.porcentaje)+" %",9,Yt)]))),256))])])]),m(K,{elements:Y.total_productos},null,8,["elements"])])])])])]),_:1},8,["pagina"])],64)}}};export{ne as default};
