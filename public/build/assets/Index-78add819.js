import{K as k,l as f,k as L,T as q,h as z,F as S,m,p as H,f as T,a as e,u as g,w as l,q as U,o as C,Z as $,b as o,t as B,d as _,v as I,c as G,e as K,g as D,O as P,C as Z,D as J}from"./app-9bde0852.js";import{_ as Q,S as W}from"./AppLayout-a8912e12.js";import X from"./CambiarDepositoModal-aa202baa.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./logo-e22dfca4.js";import"./InputError-66b0364d.js";import"./InputLabel-bd63adf3.js";const E=b=>(Z("data-v-735bf36e"),b=b(),J(),b),ee={class:"card px-4 py-3 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},te={class:"align-middle"},le={class:"flex justify-content-end text-base text-primary-900"},oe={key:0,class:"w-8 h-8 rounded bg-green-600 flex justify-center items-center text-base font-semibold text-white mr-1 hover:bg-green-600"},ae=["href"],se=E(()=>o("i",{class:"fas fa-file-excel text-white"},null,-1)),ne=[se],re={class:"px-1"},de=["src"],ce={class:"inline-block rounded bg-primary-900 px-2 py-1 text-base font-medium text-white mr-1 mb-1 hover:bg-primary-100"},ie=E(()=>o("i",{class:"fas fa-trash-alt"},null,-1)),y="Dep칩sitos",N="depositos",ue={__name:"Index",setup(b){const{roles:x}=k().props.auth,u=f([]);console.log(x);const A=L(),h=f(),V=q({id:""});z(()=>{h.value=k().props.depositos,u.value=null});const F=s=>{W.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar ",text:"Se eliminar치 definitivamente, tenga en cuenta que no podr치 editar la importacion de bultos donde el producto este incluido.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(d=>{d.isConfirmed&&V.delete(route(N+".destroydeposito",s),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{R("success","Eliminado","Se ha eliminado"),setTimeout(()=>{P.get(route(N+".index"))},1e3)}})})},M=s=>{var a=s.productos.map(c=>c.sku.toLowerCase()),d=s.productos.map(c=>c.nombre.toLowerCase());if(r.value.global.value!=null&&r.value.global.value!=""){const c=a.filter(t=>t.includes(r.value.global.value.toLowerCase())),p=d.filter(t=>t.includes(r.value.global.value.toLowerCase()));return[{"bg-orange-400":c.length>0||p.length>0}]}else return["bg-secondary-900/70"]},O=()=>{u.value=null},j=()=>{u.value=h.value.filter(s=>s.id)},R=(s,a,d)=>{A.add({severity:s,summary:a,detail:d,life:3e3})},r=f({global:{value:null,matchMode:S.CONTAINS},productos:{value:null,matchMode:S.CONTAINS}});return(s,a)=>{const d=m("Toast"),c=m("InputText"),p=m("Button"),t=m("Column"),w=m("DataTable"),v=H("tooltip");return C(),T(U,null,[e(g($),{title:y}),e(Q,{pagina:[{label:y,link:!1}]},{default:l(()=>[o("div",ee,[e(d),o("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[o("h5",{class:"text-2xl font-medium"},B(y))]),o("div",te,[e(w,{expandedRows:u.value,"onUpdate:expandedRows":a[2]||(a[2]=n=>u.value=n),showGridlines:"",size:"small",rowClass:M,value:h.value,scrollable:"",scrollHeight:"800px",virtualScrollerOptions:{itemSize:46},tableStyle:"min-width: 50rem",pt:{}},{header:l(()=>[o("div",le,[e(c,{modelValue:r.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=n=>r.value.global.value=n),placeholder:"Buscar"},null,8,["modelValue"]),e(p,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-plus",label:"Expandir todo",onClick:j}),e(p,{class:"ml-5 rounded-sm",text:"",icon:"pi pi-minus",label:"Contraer todo",onClick:O})])]),empty:l(()=>[_(" No existe Resultado ")]),loading:l(()=>[_(" Cargando... ")]),expansion:l(n=>[o("div",re,[e(w,{value:n.data.productos,scrollable:"",scrollHeight:"300px",virtualScrollerOptions:{itemSize:46},filters:r.value,"onUpdate:filters":a[1]||(a[1]=i=>r.value=i)},{default:l(()=>[e(t,{field:"sku",filterField:"sku",header:"Sku",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36 "},headerContent:{class:"text-center w-36 stickyToTopTableHeaders"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Imagen",pt:{bodyCell:{class:"flex justify-center text-center w-12"},headerCell:{class:"bg-sky-300 w-12"},headerContent:{class:"text-center w-12"},bodyCellContent:{class:"text-center w-12"}}},{body:l(i=>[o("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:i.data.imagen,alt:"image"},null,8,de)]),_:2},1024),e(t,{field:"nombre",filterField:"nombre",header:"Producto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0  w-96"},headerCell:{class:"text-center bg-sky-300 p-0 m-0  w-96"},headerContent:{class:"text-center  w-96"},bodyCellContent:{class:"text-center  w-96"}}}),e(t,{field:"bultos",header:"Bultos",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"pcs_bulto",header:"Pcs por Bulto",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{field:"cantidad_total",header:"Cantidad Total",sortable:"",pt:{bodyCell:{class:"text-center p-0 m-0 w-36"},headerCell:{class:"bg-sky-300 p-0 m-0 w-36"},headerContent:{class:"text-center w-36"},bodyCellContent:{class:"text-center w-36"}}}),e(t,{header:"Acciones",pt:{bodyCell:{class:"text-center"},headerCell:{class:"bg-sky-300 p-0 m-0 w-10"}}},{body:l(i=>[o("div",null,[o("span",ce,[e(X,{"detalle-id":i.data.id},null,8,["detalle-id"])]),i.data.deposito_lista_id=="2"?I((C(),G(p,{key:0,class:"w-8 h-8 rounded bg-red-700 border-0 px-2 text-base font-normal text-white m-1 hover:bg-red-600",onClick:K(pe=>F(i.data.id),["prevent"])},{default:l(()=>[ie]),_:2},1032,["onClick"])),[[v,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):D("",!0)])]),_:2},1024)]),_:2},1032,["value","filters"])])]),default:l(()=>[e(t,{expander:"",style:{width:"4rem"},pt:{bodyCell:{class:"bg-secondary-900/30 font-bold m-2 text-2xl text-center"},headerCell:{class:"uppercase bg-secondary-900 text-md "}}}),e(t,{sortable:"",field:"nombre",header:"Dep칩sito",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold text-center"},headerCell:{class:"uppercase bg-secondary-100 text-md"}}}),e(t,{header:"Cantidad Productos",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-24  text-center"},headerContent:{class:" mx-2"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:l(n=>[_(B(n.data.productos.length),1)]),_:1}),e(t,{header:"",pt:{bodyCell:{class:"bg-secondary-900/30 font-bold w-14  text-center"},headerContent:{class:"mx-2 text-cente"},headerCell:{class:"uppercase bg-secondary-900 text-md"}}},{body:l(n=>[g(x).includes("Super Administrador")||g(x).includes("Administrador")?I((C(),T("div",oe,[o("a",{href:s.route("depositos.exportar",n.data.id),target:"_blank",class:"py-auto p-2 text-xl"},ne,8,ae)])),[[v,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):D("",!0)]),_:1})]),_:1},8,["expandedRows","value"])])])]),_:1},8,["pagina"])],64)}}},_e=Y(ue,[["__scopeId","data-v-735bf36e"]]);export{_e as default};
