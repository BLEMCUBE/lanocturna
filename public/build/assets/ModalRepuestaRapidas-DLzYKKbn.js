import{r as m,o as X,R,f as n,g as r,j as t,W as f,F as x,A as v,a4 as T,y as C,D as Z,C as B,Y as ee,T as b,a5 as h,z as D,u as j,E as a,U as V}from"./@vue-BLfC86mR.js";import{T as te,O as se}from"./@inertiajs-CMyvZJ1U.js";import{_}from"./InputError-DdpGOVhM.js";import{a as $}from"./axios-ngrFHoWO.js";import{aH as oe}from"./primevue-DAb-R_om.js";import{u as le}from"./loader-D-Kjbgh8.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./pinia-IH2nVPr3.js";const re=["onClick"],ae=["onClick"],ne=t("i",{class:"fas fa-pen"},null,-1),ie={class:"grid grid-cols-12 gap-4 p-2"},ue={class:"w-full flex flex-col items-center col-span-12 sm:col-span-3 md:col-span-3 lg:col-span-3 text-white rounded-lg text-center"},ce={class:"flex flex-wrap justify-center mt-2"},de=["onMouseover","onClick"],pe={class:"col-span-12 sm:col-span-7 md:col-span-7 lg:col-span-7 rounded-lg text-center"},me={class:"col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 text-white rounded-lg text-center"},ge=["onClick"],fe=["onSubmit"],xe=t("p",null," Repuestas agregadas ",-1),ve={key:0,class:"col-span-12 p-2 xl:col-span-12"},be={class:"grid grid-cols-12 gap-4 p-2 mt-3"},he={class:"w-full flex flex-col items-center col-span-12 sm:col-span-3 md:col-span-3 lg:col-span-3 text-white rounded-lg text-center"},_e=["onUpdate:modelValue"],ye={class:"col-span-12 sm:col-span-7 md:col-span-7 lg:col-span-7 rounded-lg text-center"},we=["onUpdate:modelValue"],ke={class:"col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 text-white rounded-lg text-center"},Ce=["onClick"],Ee=t("i",{class:"fas fa-trash-alt"},null,-1),qe={key:1,class:"grid grid-cols-12 gap-4 p-2 mt-3"},Se={class:"w-full flex flex-col items-start col-span-12 sm:col-span-6 md:col-span-6 lg:col-span-6 rounded-lg text-center"},Te=t("label",{class:"px-2 text-gray-900 font-medium"},"Saludo inicial:",-1),Ue=t("p",{class:"px-2 text-gray-400 font-medium text-xs"},"Lo pondremos al inicio de tus respuestas.",-1),Me={class:"w-full flex flex-col items-start col-span-12 sm:col-span-6 md:col-span-6 lg:col-span-6"},Ve=t("label",{class:"px-2 text-gray-900 font-medium"},"Firma:",-1),ze=t("p",{class:"px-2 text-gray-400 font-medium text-xs"},"Lo pondremos al final de tus respuestas.",-1),Ie={class:"flex justify-end py-3"},Re="Respuestas Rapidas",z="respuestasrapidas",Be="mercadolibre",ut={__name:"ModalRepuestaRapidas",props:{tipo:{type:String},appId:{type:String}},emits:["addTexto"],setup(F,{emit:A}){const g=F,L=le(),N=oe(),y=m(!1),o=te({etiquetas:[],saludo:[],firma:[]}),U=[{bg:"#ff9191"},{bg:"#ffb15e"},{bg:"#7ad690"},{bg:"#91cdff"},{bg:"#c591ff"},{bg:"#ff91d5"}],M=m(null),E=m([]),d=m(""),q=m(null),w=m(""),S=m(null),O=()=>{y.value=!0},P=l=>{let s=E.value[l].descripcion;Q(s,l)};function Q(l,s){A("addTexto",{respuesta:l,index:s})}const Y=l=>{S.value=l.bg,q.value=l.bg},G=()=>{o.clearErrors(),d.value.trim().length===0?k("error","Error","Por favor ingresá un nombre a la etiqueta."):w.value.trim().length===0?k("error","Error","Por favor ingresá la respuesta rápida."):o.etiquetas.some(s=>s.titulo===d.value)?k("error","Error","Ya existe el nombre de la etiqueta."):(o.etiquetas.push({id:null,titulo:d.value,tipo:g.tipo,descripcion:w.value,color:q.value}),k("success","Mensaje","Respuesta agregada, no te olvides de guardar los cambios."),d.value=null,w.value=null,q.value=null)},H=async l=>{const s=o.etiquetas[l];if(o.etiquetas.splice(l,1),s.id!==null)try{await $.delete(route(z+".destroy",s.id))}catch(i){console.error("Error al eliminar usuario:",i)}else return};X(()=>{I(),S.value=U[0].bg,q.value=U[0].bg});const I=()=>{$.get(route(z+".index",{tipo:g.tipo,app_id:g.appId})).then(l=>{E.value=l.data.respuestas;var s=l.data.firma,i=l.data.saludo;o.etiquetas=E.value.map(p=>({id:p.id,titulo:p.titulo,tipo:p.tipo,descripcion:p.descripcion,color:p.color})),o.firma.push(s),o.saludo.push(i)}).finally(()=>{L.hide()})},W=()=>{o.reset(),o.clearErrors(),y.value=!1},J=()=>{o.clearErrors(),o.post(route(z+".update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{y.value=!1,k("success","Mensaje","Se ha editado"),g.tipo=="pregunta"&&setTimeout(()=>{se.get(route(Be+".preguntas.lista",g.appId))},500),I()},onFinish:()=>{},onError:()=>{}})},K=l=>{d.value=l.target.value.toUpperCase()},k=(l,s,i)=>{N.add({severity:l,summary:s,detail:i,life:4e3})};return(l,s)=>{const i=R("Button"),p=R("Dialog");return r(),n("section",null,[(r(!0),n(x,null,v(E.value,(e,u)=>(r(),n("button",{onClick:C(c=>P(u),["prevent"]),class:"px-3 py-1 m-1 text-sm text-white rounded text-medium",style:T({backgroundColor:e.color})},Z(e.titulo),13,re))),256)),t("button",{onClick:C(O,["prevent"]),class:"w-full bg-gray-200 hover:bg-gray-300 text-xs p-2 rounded mt-3 flex items-center justify-center gap-2"},[ne,B(" Modificar respuestas rápidas ")],8,ae),f(p,{visible:y.value,"onUpdate:visible":s[6]||(s[6]=e=>y.value=e),modal:"",header:Re,style:{width:"70rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},position:"top",pt:{header:{class:"mt-6 p-2 lg:p-4 "},content:{class:"p-4 lg:p-4"}}},{default:ee(()=>[t("div",ie,[t("div",ue,[b(t("input",{type:"text",placeholder:"ETIQUETA",onInput:s[0]||(s[0]=e=>K(e)),"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),class:"placeholder:text-white text-center text-[16px] border font-normal h-10 rounded-md w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500",style:T({backgroundColor:S.value||"#484545"})},null,36),[[h,d.value]]),t("div",ce,[(r(),n(x,null,v(U,(e,u)=>t("button",{key:u,class:D(["m-1 p-2 rounded-full w-4 h-4 border border-gray-300",{"scale-110 border-gray-800":S.value===e.bg}]),style:T({backgroundColor:e.bg,filter:M.value===u?"brightness(0.9)":"brightness(1)"}),onMouseover:c=>M.value=u,onMouseleave:s[2]||(s[2]=c=>M.value=null),onClick:c=>Y(e)},null,46,de)),64))])]),t("div",pe,[b(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=e=>w.value=e),rows:"3",placeholder:"Ingresá la respuesta rápida",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,w.value]])]),t("div",me,[t("button",{type:"button",onClick:C(G,["prevent"]),class:"w-full h-[60px] bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md"}," Agregar ",8,ge)])]),t("form",{onSubmit:C(J,["prevent"])},[xe,a(o).errors.length>0?(r(),n("div",ve,[f(_,{class:"mt-1 text-lg w-full",message:a(o).errors.etiquetas},null,8,["message"]),(r(!0),n(x,null,v(a(o).errors.campos_etiquetas,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256)),(r(!0),n(x,null,v(a(o).errors.campos_saludo,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256)),(r(!0),n(x,null,v(a(o).errors.campos_firma,e=>(r(),V(_,{class:"mt-1 mb-0 text-lg",message:e},null,8,["message"]))),256))])):j("",!0),(r(!0),n(x,null,v(a(o).etiquetas,(e,u)=>(r(),n("div",be,[t("div",he,[b((r(),n("input",{key:u,type:"text",placeholder:"ETIQUETA","onUpdate:modelValue":c=>e.titulo=c,class:"placeholder:text-gray-500 text-center text-[16px] uppercase border font-normal h-8 rounded-md w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500",style:T({backgroundColor:e.color||"#ffffff"})},null,12,_e)),[[h,e.titulo]])]),t("div",ye,[b(t("textarea",{"onUpdate:modelValue":c=>e.descripcion=c,rows:"3",placeholder:"Ingresá la respuesta rápida",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,8,we),[[h,e.descripcion]])]),t("div",ke,[t("button",{type:"button",onClick:C(c=>H(u),["prevent"]),class:"w-full h-[34px] bg-red-500 hover:bg-red-600 text-white font-medium rounded-md"},[Ee,B(" Borrar ")],8,Ce)])]))),256)),g.tipo=="pregunta"?(r(),n("div",qe,[t("div",Se,[Te,b(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>a(o).saludo[0].value=e),rows:"3",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,a(o).saludo[0].value]]),Ue,f(_,{class:"mt-1 text-xs",message:a(o).errors.saludo},null,8,["message"])]),t("div",Me,[Ve,b(t("textarea",{"onUpdate:modelValue":s[5]||(s[5]=e=>a(o).firma[0].value=e),rows:"3",class:"w-full h-[60px] border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[h,a(o).firma[0].value]]),ze,f(_,{class:"mt-1 text-xs",message:a(o).errors.firma},null,8,["message"])])])):j("",!0),t("div",Ie,[f(i,{label:"Cancelar",pt:{root:"mr-3 py-1"},severity:"danger",size:"small",onClick:W,type:"button"}),f(i,{label:"Guardar",size:"small",severity:"success",type:"submit",class:D({"opacity-50":a(o).processing}),disabled:a(o).processing},null,8,["class","disabled"])])],40,fe)]),_:1},8,["visible"])])}}};export{ut as default};
