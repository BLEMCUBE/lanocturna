import{r as p,w as A,o as R,R as B,S as F,f as h,g as f,W as a,E as n,Y as q,j as t,D as m,T as x,ah as G,O as V,x as K,F as j,A as L,z as W,u as Y,y as Z}from"./@vue-BLfC86mR.js";import{_ as H}from"./AppLayout-CiOD__YY.js";import{K as w,T as J,O as g,Z as Q}from"./@inertiajs-CMyvZJ1U.js";import{S as X}from"./sweetalert2-5zhdP7Ax.js";import{aG as tt,h as et}from"./primevue-B_pu_EB_.js";import{s as ot}from"./@vueform-CFisUGo2.js";import{_ as st}from"./Pagination-CNhFcssC.js";import rt from"./CrearMasivoModal-CDBQO33p.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";const at={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},it={class:"px-3 pb-2 col-span-full flex justify-end items-center"},lt=t("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),nt={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},ct=["href"],dt=t("i",{class:"fas fa-file-excel text-white"},null,-1),ut=[dt],mt={class:"align-middle py-4"},pt={class:"grid grid-cols-12 gap-4 m-3"},ht={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ft={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},gt={style:{overflow:"auto","max-height":"700px"}},xt={class:"w-full text-md bg-white shadow-md rounded mb-4"},_t=t("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[t("tr",{class:"bg-secondary-100"},[t("th",{class:"p-1.5"},"Stock"),t("th",null,"Stock futuro"),t("th",{class:"p-2"},"Imagen"),t("th",null,"Origen"),t("th",null,"Nombre"),t("th",null,"Categoria"),t("th",null,"Acciones")])],-1),bt=["onClick"],vt=["onClick"],wt=["onClick"],yt=["src"],kt=["onClick"],Ct=["onClick"],St=["onClick"],Bt=["onClick"],Ft=t("i",{class:"fas fa-trash-alt"},null,-1),Vt=[Ft],y="Productos",c="productos",me={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(_){const k=_,T=tt(),E=p(),b=p(!1),{permissions:$}=w().props.auth,D=J({id:""});let i=p([k.filtro.categoria]),d=p(k.filtro.buscar);const O=()=>{g.get(route(c+".index"),{buscar:d.value,categoria:i.value},{preserveState:!0,replace:!0})};A(i,o=>{g.get(route(c+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const z=(o,s,l)=>{if(parseFloat(o)<=parseFloat(s)&&parseFloat(o)==parseFloat(l))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(s)&&parseFloat(l)>parseFloat(o))return"bg-orange-500 text-black"},I=o=>{g.get(route(c+".show",o))},N=(o,s)=>{X.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+s,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(v=>{v.isConfirmed&&D.delete(route(c+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{M("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(c+".index"))},1e3)}})})},C=p({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});R(()=>{E.value=w().props.productos.data,C.value.options=w().props.lista_categorias});const M=(o,s,l)=>{T.add({severity:o,summary:s,detail:l,life:3e3})},P=()=>{g.get(route(c+".create"))},u=o=>{I(o)};return(o,s)=>{const l=B("Toast"),v=B("InputText"),S=F("tooltip"),U=F("debounce");return f(),h(j,null,[a(n(Q),{title:y}),a(H,{pagina:[{label:y,link:!1}]},{default:q(()=>[t("div",at,[a(l),t("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[t("h5",{class:"text-2xl font-medium pr-5"},m(y))]),t("div",it,[x(t("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":s[0]||(s[0]=e=>b.value=e)},null,512),[[G,b.value]]),lt,a(rt),x((f(),h("div",nt,[t("a",{href:o.route(c+".exportar",{categoria:n(i),foto:b.value}),target:"_blank",class:"py-auto"},ut,8,ct)])),[[S,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),a(n(et),{size:"small",label:"Crear Producto",severity:"success",onClick:P})]),t("div",mt,[t("div",pt,[t("div",ht,[x(a(v,{"debounce-events":["keyup"],class:"w-full",modelValue:n(d),"onUpdate:modelValue":s[1]||(s[1]=e=>V(d)?d.value=e:d=e),placeholder:"Buscar"},null,8,["modelValue"]),[[U,O,"500ms"]])]),t("div",ft,[a(n(ot),K({id:"categorias",modelValue:n(i),"onUpdate:modelValue":s[2]||(s[2]=e=>V(i)?i.value=e:i=e),class:"w-full"},C.value),null,16,["modelValue"])])]),t("div",gt,[t("table",xt,[_t,t("tbody",null,[(f(!0),h(j,null,L(_.productos.data,e=>(f(),h("tr",{class:W(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",z(e.stock,e.stock_minimo,e.stock_futuro)])},[t("td",{onClick:r=>u(e.id)},m(e.stock??""),9,bt),t("td",{onClick:r=>u(e.id)},m(e.stock_futuro),9,vt),t("td",{onClick:r=>u(e.id)},[t("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:e.imagen,alt:"image"},null,8,yt)],8,wt),t("td",{onClick:r=>u(e.id)},m(e.origen),9,kt),t("td",{onClick:r=>u(e.id)},m(e.nombre),9,Ct),t("td",{onClick:r=>u(e.id)},m(e.categorias.map(r=>r.name).join(",")),9,St),t("td",null,[n($).includes("productos-eliminar")?x((f(),h("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:Z(r=>N(e.id,e.nombre),["prevent"])},Vt,8,Bt)),[[S,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):Y("",!0)])],2))),256))])])]),a(st,{elements:_.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{me as default};
