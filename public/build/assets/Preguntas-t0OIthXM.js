import{r as x,o as D,f as c,g as l,W as f,E as B,Y as C,j as s,D as o,F as k,A as N,u as v,C as m,y as A,U as y,T as L,a5 as K}from"./@vue-BLfC86mR.js";import{_ as O}from"./AppLayout-uReGjGr-.js";import{K as _,T as b,Z as z,O as W}from"./@inertiajs-CMyvZJ1U.js";import{_ as w}from"./CheckboxName-CMAnPr3H.js";import Y from"./ModalRepuestaRapidas-BJztC2cv.js";import"./sweetalert2-DhUVDY3P.js";import{u as Z}from"./customToast-BYTpZDIn.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./primevue-DAb-R_om.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";const q={class:"mb-4 col-span-12 dark:border-gray-700 dark:bg-gray-800"},G={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},H={class:"md:col-span-8 xl:col-span-9"},J={class:"bg-white rounded-xl shadow p-6 my-5"},Q={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 border-b pb-4"},X={class:"flex items-start gap-2 w-full"},I=["src"],ee={class:"w-full"},te=["href"],se={class:"mx-3 text-xs text-gray-500"},ae={class:"inline-block bg-blue-700 text-white text-xs font-normal px-2 py-0.5 rounded"},oe={key:0,class:"text-xs text-gray-700 mt-1"},re={class:"font-medium"},ie={class:"text-base font-semibold text-blue-600 mt-1"},le={class:"text-base text-gray-600 mt-1"},ue=["href"],ne={key:0,class:"px-1"},ce=s("i",{class:"fa fa-map-marker-alt text-gray-500"},null,-1),de={key:0},pe={class:"mt-3 flex"},me={class:"font-medium text-gray-800 mb-1"},_e={class:"ml-3 text-gray-500 text-xs flex items-center gap-1"},he=s("i",{class:"far fa-clock"},null,-1),fe=["onSubmit"],ve=["onUpdate:modelValue","onFocus"],be=s("div",{class:"flex justify-end"},[s("button",{type:"submit",class:"bg-blue-600 text-white font-medium px-4 py-2 rounded hover:bg-blue-700"}," Enviar respuesta ")],-1),ge={class:"md:col-span-4 xl:col-span-3"},xe={class:"bg-white rounded-xl shadow p-5 fixed overflow-y-auto"},ke=s("h5",{class:"text-lg font-semibold mb-4"},"Respuestas rápidas",-1),ye={class:"hidden sm:block flex-wrap gap-2 mb-4"},S="ML Preguntas",F="mercadolibre.preguntas",ut={__name:"Preguntas",setup(we){const{setShow:g}=Z(),{items:T}=_().props,{saludo:U}=_().props,{firma:E}=_().props,{client_id:h}=_().props,i=x([]),d=x(null);b({id:""}),b({id:""});const r=b({pregunta_id:null,client_id:null,from_user_id:null,text:null,payload:null});D(()=>{T.data.forEach(e=>{i.value.push({id:e.id,pregunta_id:e.pregunta_id,client_id:h,pregunta:e.pregunta,publicado:e.publicado,from_user_id:e.from_user_id,haveSaludo:!0,haveFirma:!0,saludo:U.value,firma:E.value,respuesta:"",producto:{thumbnail:e.producto.thumbnail,title:e.producto.title,id:e.producto.id,sku:e.producto.sku,permalink:e.producto.permalink,base_price:e.producto.base_price,listing_type_id:e.producto.listing_type_id},usuario:{nickname:e.usuario.nickname,permalink:e.usuario.permalink,city:e.usuario.city,state:e.usuario.state}})})});const j=e=>{d.value=e},M=e=>{if(i.value[e].respuesta.trim().length===0){g("error","Error","Por favor ingresá una respuesta.");return}R(e),r.clearErrors(),r.post(route(F+".responder"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{g("success","Mensaje","Respuesta enviada"),setTimeout(()=>{W.get(route(F+".lista",h))},500)},onFinish:()=>{},onError:()=>{}})},P=e=>{d.value!==null&&(i.value[d.value].respuesta=e.respuesta,n(d.value),d.value=null)},R=e=>{if(e!==null){let a=i.value[e];r.pregunta_id=a.pregunta_id,r.client_id=h,r.from_user_id=a.from_user_id,r.payload=a,n(e)}},V=(e,a)=>{if(e!==null){let t=i.value[e];a?(t.haveSaludo=!0,n(e)):(t.haveSaludo=!1,n(e))}},$=(e,a)=>{if(e!==null){let t=i.value[e];a?(t.haveFirma=!0,n(e)):(t.haveFirma=!1,n(e))}},n=e=>{if(e!==null){let a=i.value[e];switch(!0){case(a.haveSaludo==!0&&a.haveFirma==!1):r.text=a.saludo+`
`+a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!1):r.text=a.respuesta;break;case(a.haveSaludo==!1&&a.haveFirma==!0):r.text=a.respuesta+`
`+a.firma;break;default:r.text=a.saludo+`
`+a.respuesta+`
`+a.firma;break}}};return(e,a)=>(l(),c(k,null,[f(B(z),{title:"Mercado Libre-Preguntas"}),f(O,{pagina:[{label:S,link:!1}]},{default:C(()=>[s("div",q,[s("div",{class:"px-5 pb-2 col-span-full flex justify-between items-center"},[s("h5",{class:"text-2xl font-medium"},o(S))]),s("div",G,[s("div",H,[(l(!0),c(k,null,N(i.value,(t,p)=>(l(),c("div",J,[s("div",Q,[s("div",X,[s("img",{src:t.producto.thumbnail,alt:"Producto",class:"w-16 h-16 rounded object-cover"},null,8,I),s("div",ee,[s("span",null,[s("a",{href:t.producto.permalink,class:"text-gray-800 font-medium text-sm hover:text-blue-600",target:"_blank"},o(t.producto.title),9,te)]),s("span",se,o(t.producto.id),1),s("span",ae,o(t.producto.listing_type_id),1),t.producto.sku?(l(),c("div",oe,[m(" SKU: "),s("span",re,o(t.producto.sku),1)])):v("",!0),s("div",ie,"$"+o(t.producto.base_price)+" ",1),s("div",le,[s("a",{href:t.usuario.permalink,target:"_blank",class:"text-blue-500 hover:underline"},o(t.usuario.nickname),9,ue),t.usuario.city?(l(),c("span",ne,[m(" | "),ce,m(" "+o(t.usuario.city)+" ",1),t.usuario.state?(l(),c("span",de," , "+o(t.usuario.state),1)):v("",!0)])):v("",!0)])])])]),s("div",pe,[s("span",me,o(t.pregunta),1),s("span",_e,[he,m(" "+o(t.publicado),1)])]),s("form",{class:"mt-6 space-y-4",onSubmit:A(u=>M(p),["prevent"])},[(l(),y(w,{"onUpdate:checked":u=>V(p,u),label:t.saludo,key:t.id,checked:t.haveSaludo},null,8,["onUpdate:checked","label","checked"])),L(s("textarea",{rows:"2","onUpdate:modelValue":u=>t.respuesta=u,placeholder:"Ingresá tu respuesta",onFocus:u=>j(p),class:"w-full border border-gray-300 rounded-md p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"},null,40,ve),[[K,t.respuesta]]),(l(),y(w,{"onUpdate:checked":u=>$(p,u),label:t.firma,key:t.id,checked:t.haveFirma},null,8,["onUpdate:checked","label","checked"])),be],40,fe)]))),256))]),s("div",ge,[s("div",xe,[ke,s("div",ye,[f(Y,{onAddTexto:P,tipo:"pregunta"})])])])])])]),_:1},8,["pagina"])],64))}};export{ut as default};
