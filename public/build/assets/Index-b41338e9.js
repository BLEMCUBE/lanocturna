import{_ as E}from"./AppLayout-6e7eecc6.js";import{K as d,l as n,T as A,h as S,F as N,m as u,p as V,f as g,a as e,u as m,w as r,q as F,O as I,o as _,Z as B,b as l,t as v,v as R,g as j,d as y}from"./app-0229c4fa.js";import{i as H}from"./es.es-8a16ed73.js";import{h as c}from"./moment-fbc5633a.js";import{s as x}from"./index-1049af69.js";import{s as K,e as L,a as U,b as P}from"./index-ec64e22a.js";import"./logo-e22dfca4.js";import"./_plugin-vue_export-helper-c27b6911.js";const $={class:"card px-4 mb-4 bg-white col-span-12 justify-center md:col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-10 dark:border-gray-700 dark:bg-gray-800"},q={class:"bg-white mr-0 ml-0 mt-6 shadow rounded-lg border border-gray-300"},z={class:"align-middle p-2"},G={class:"flex justify-content-end text-md"},Z={class:"ml-5 col-span-1 md:col-span-3 lg:col-span-3"},J={key:0,class:"w-10 h-8 ml-5 rounded flex justify-center items-center text-base font-semibold text-white mr-1"},Q=l("i",{class:"fas fa-file-excel text-white text-xl"},null,-1),f="Rotación de Stock",W="rotacion-stock",ce={__name:"Index",setup(X){d().props.auth,n("/images/productos/sin_foto.png");const{roles:w}=d().props.auth;d().props;const h=n(),b=n();A({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,stock_minimo:0,imagen:"",photo:""});const a=n();a.value=[c(x(new Date,30)).format("YYYY-MM-DD"),c(new Date).format("YYYY-MM-DD")],n([]);const C=t=>{t[0]!=null&&t[1]!=null&&(I.get(route(W+".index"),{inicio:c(t[0]).format("YYYY-MM-DD"),fin:c(t[1]).format("YYYY-MM-DD")},{preserveState:!0,onSuccess:()=>{b.value=Array.from(d().props.productos,o=>o),h.value=d().props.meses}}),a.value=[c(t[0]).format("YYYY-MM-DD"),c(t[1]).format("YYYY-MM-DD")])},D=()=>{if(a.value[0]!=null&&a.value[1]!=null)window.open(route("rotacion-stock.exportproductoventas",[{inicio:a.value[0],fin:a.value[1]}]),"_blank");else return},Y=[{text:"Hoy",onClick(){return[new Date,new Date]}},{text:"Ayer",onClick(){return[x(new Date,1),x(new Date,1)]}},{text:"Este mes",onClick(){return[K(new Date),L(new Date)]}},{text:"Este año",onClick(){return[U(new Date),P(new Date)]}}];S(()=>{C(a.value)});const p=n({global:{value:null,matchMode:N.CONTAINS}});return(t,o)=>{const M=u("InputText"),T=u("Button"),s=u("Column"),k=u("DataTable"),O=V("tooltip");return _(),g(F,null,[e(m(B),{title:f}),e(E,{pagina:[{label:f,link:!1}]},{default:r(()=>[l("div",$,[l("div",{class:"px-3 col-span-full flex justify-between items-center"},[l("h5",{class:"text-2xl font-medium"},v(f))]),l("div",q,[l("div",z,[l("b",null," MESES: "+v(h.value),1),e(k,{sortField:"rotacion_stock",sortOrder:1,filters:p.value,value:b.value,pt:{root:{class:"w-auto"}},scrollable:"",scrollHeight:"350px",paginator:"",rows:50,tableStyle:"min-width: 50rem",size:"small"},{header:r(()=>[l("div",G,[e(M,{modelValue:p.value.global.value,"onUpdate:modelValue":o[0]||(o[0]=i=>p.value.global.value=i),placeholder:"Buscar"},null,8,["modelValue"]),l("div",Z,[e(m(H),{onChange:C,type:"date",range:"","value-type":"YYYY-MM-DD",format:"DD/MM/YYYY",value:a.value,"onUpdate:value":o[1]||(o[1]=i=>a.value=i),shortcuts:Y,lang:"es",clearable:!1,placeholder:"seleccione Fecha"},null,8,["value"])]),m(w).includes("Super Administrador")||m(w).includes("Administrador")?R((_(),g("div",J,[e(T,{onClick:o[2]||(o[2]=i=>D()),pt:{root:{class:"py-auto px-3 py-2.5 text-xl bg-green-600 border-none hover:bg-green-500"}}},{default:r(()=>[Q]),_:1})])),[[O,{value:"Descargar Excel",pt:{text:"bg-gray-500 text-xs text-white rounded"}},void 0,{top:!0}]]):j("",!0)])]),empty:r(()=>[y(" No existe Resultado ")]),loading:r(()=>[y(" Cargando... ")]),default:r(()=>[e(s,{field:"origen",sortable:"",header:"ORIGEN",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"nombre",sortable:"",header:"NOMBRE",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"ultima_compra",sortable:"",header:"FECHA ÚLTIMA COMPRA",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"ultima_venta",sortable:"",header:"FECHA ÚLTIMA VENTA",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"ventas_totales",sortable:"",header:"VENTAS TOTALES",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"stock",sortable:"",header:"STOCK",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"stock_futuro",sortable:"",header:"STOCK FUTURO",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}}),e(s,{field:"rotacion_stock",sortable:"",header:"ROTACION DEL STOCK ",pt:{bodyCell:{class:"text-center p-0 m-0 w-56"},headerTitle:{class:"text-center  w-56"},headerContent:{class:"text-center w-56"},bodyCellContent:{class:"flex align-items-center text-center w-56"}}})]),_:1},8,["filters","value"])])])])]),_:1},8,["pagina"])],64)}}};export{ce as default};
