import{r as f,w as L,o as W,R as D,S as E,f as m,g as p,W as a,E as i,Y,j as e,D as h,T as x,ah as Z,O as V,x as G,F as T,A as J,z as Q,u as $,y as O}from"./@vue-BLfC86mR.js";import{_ as X}from"./AppLayout-BWpqwQoE.js";import{K as y,T as z,O as g,Z as ee}from"./@inertiajs-CMyvZJ1U.js";import{S as te}from"./sweetalert2-5zhdP7Ax.js";import{aH as oe,h as re}from"./primevue-DAb-R_om.js";import{s as se}from"./@vueform-CFisUGo2.js";import{_ as ae}from"./Pagination-CNhFcssC.js";import ie from"./CrearMasivoModal-CSGtmkS9.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";const le={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},ne={class:"px-3 pb-2 col-span-full flex justify-end items-center"},ce=e("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),de={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},ue=["href"],me=e("i",{class:"fas fa-file-excel text-white"},null,-1),pe=[me],he={class:"align-middle py-4"},fe={class:"grid grid-cols-12 gap-4 m-3"},xe={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},ge={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},_e={style:{overflow:"auto","max-height":"700px"}},be={class:"w-full text-md bg-white shadow-md rounded mb-4"},ve=e("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[e("tr",{class:"bg-secondary-100"},[e("th",{class:"p-1.5"},"Stock"),e("th",null,"Stock futuro"),e("th",{class:"p-2"},"Imagen"),e("th",null,"Origen"),e("th",null,"Nombre"),e("th",null,"Categoria"),e("th",null,"Acciones")])],-1),we=["onClick"],ye=["onClick"],ke=["onClick"],Ce=["src"],Se=["onClick"],Fe=["onClick"],je=["onClick"],Be={class:"flex justify-end"},De=["onClick"],Ee=e("i",{class:"fa-regular fa-copy"},null,-1),Ve=[Ee],Te=["onClick"],$e=e("i",{class:"fas fa-trash-alt"},null,-1),Oe=[$e],k="Productos",l="productos",bt={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(_){const C=_,I=oe(),M=f(),b=f(!1),{permissions:S}=y().props.auth,N=z({id:""});let n=f([C.filtro.categoria]),d=f(C.filtro.buscar);const P=()=>{g.get(route(l+".index"),{buscar:d.value,categoria:n.value},{preserveState:!0,replace:!0})},F=z({id:""});L(n,o=>{g.get(route(l+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const U=(o,r,c)=>{if(parseFloat(o)<=parseFloat(r)&&parseFloat(o)==parseFloat(c))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(r)&&parseFloat(c)>parseFloat(o))return"bg-orange-500 text-black"},A=o=>{g.get(route(l+".show",o))},R=o=>{F.clearErrors(),F.post(route(l+".duplicar",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{B("success","Mensaje","Producto Duplicado")},onFinish:()=>{},onError:()=>{}})},q=(o,r)=>{te.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+r,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(v=>{v.isConfirmed&&N.delete(route(l+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{B("success","Eliminado","Se ha eliminado"),setTimeout(()=>{g.get(route(l+".index"))},1e3)}})})},j=f({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});W(()=>{M.value=y().props.productos.data,j.value.options=y().props.lista_categorias});const B=(o,r,c)=>{I.add({severity:o,summary:r,detail:c,life:3e3})},H=()=>{g.get(route(l+".create"))},u=o=>{A(o)};return(o,r)=>{const c=D("Toast"),v=D("InputText"),w=E("tooltip"),K=E("debounce");return p(),m(T,null,[a(i(ee),{title:k}),a(X,{pagina:[{label:k,link:!1}]},{default:Y(()=>[e("div",le,[a(c),e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},h(k))]),e("div",ne,[x(e("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":r[0]||(r[0]=t=>b.value=t)},null,512),[[Z,b.value]]),ce,a(ie),x((p(),m("div",de,[e("a",{href:o.route(l+".exportar",{categoria:i(n),foto:b.value}),target:"_blank",class:"py-auto"},pe,8,ue)])),[[w,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),a(i(re),{size:"small",label:"Crear Producto",severity:"success",onClick:H})]),e("div",he,[e("div",fe,[e("div",xe,[x(a(v,{"debounce-events":["keyup"],class:"w-full",modelValue:i(d),"onUpdate:modelValue":r[1]||(r[1]=t=>V(d)?d.value=t:d=t),placeholder:"Buscar"},null,8,["modelValue"]),[[K,P,"500ms"]])]),e("div",ge,[a(i(se),G({id:"categorias",modelValue:i(n),"onUpdate:modelValue":r[2]||(r[2]=t=>V(n)?n.value=t:n=t),class:"w-full"},j.value),null,16,["modelValue"])])]),e("div",_e,[e("table",be,[ve,e("tbody",null,[(p(!0),m(T,null,J(_.productos.data,t=>(p(),m("tr",{class:Q(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",U(t.stock,t.stock_minimo,t.stock_futuro)])},[e("td",{onClick:s=>u(t.id)},h(t.stock??""),9,we),e("td",{onClick:s=>u(t.id)},h(t.stock_futuro),9,ye),e("td",{onClick:s=>u(t.id)},[e("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:t.imagen,alt:"image"},null,8,Ce)],8,ke),e("td",{onClick:s=>u(t.id)},h(t.origen),9,Se),e("td",{onClick:s=>u(t.id)},h(t.nombre),9,Fe),e("td",{onClick:s=>u(t.id)},h(t.categorias.map(s=>s.name).join(",")),9,je),e("td",null,[e("div",Be,[e("div",null,[i(S).includes("productos-eliminar")?x((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-green-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-green-600",onClick:O(s=>R(t.id),["prevent"])},Ve,8,De)),[[w,{value:"Duplicar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):$("",!0)]),e("div",null,[i(S).includes("productos-eliminar")?x((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:O(s=>q(t.id,t.nombre),["prevent"])},Oe,8,Te)),[[w,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):$("",!0)])])])],2))),256))])])]),a(ae,{elements:_.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{bt as default};
