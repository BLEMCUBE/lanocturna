import{r as V,o as D,R as C,f as u,g as p,W as s,E as o,Y as M,j as r,D as h,y as j,u as b,T as m,x as R,a5 as g,a4 as $,z as q,F as B,ad as N,ae as O}from"./@vue-BLfC86mR.js";import{_ as A}from"./AppLayout-CiOD__YY.js";import{K as k,T as G,Z as K,O as I}from"./@inertiajs-CMyvZJ1U.js";import{aG as W,h as S}from"./primevue-B_pu_EB_.js";import{_ as i}from"./InputError-DdpGOVhM.js";import{_ as n}from"./InputLabel-CkCrW4zf.js";import{s as L}from"./@vueform-CFisUGo2.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pusher-js-Ck_2Ecjm.js";import"./logo-C8Jea0Rc.js";import"./pinia-DeiM1QY_.js";import"./@vueuse-BEDuuF1-.js";import"./sweetalert2-5zhdP7Ax.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";const Z=f=>(N("data-v-3105b4da"),f=f(),O(),f),H={class:"card px-4 mb-4 bg-white col-span-12 py-5 rounded-lg shadow-lg 2xl:col-span-12 dark:border-gray-700 dark:bg-gray-800"},J={class:"align-middle"},Q=["onSubmit"],X={class:"px-2 pt-4 pb-0 grid grid-cols-12 gap-4 mb-2"},ee={class:"col-span-12 shadow-default xl:col-span-3"},oe={class:"col-span-12 shadow-default xl:col-span-5"},te={class:"col-span-12 shadow-default xl:col-span-4"},se={class:"col-span-12 shadow-default xl:col-span-3"},ae={class:"col-span-12 shadow-default xl:col-span-3"},re={class:"col-span-12 shadow-default xl:col-span-3"},le={class:"col-span-12 shadow-default xl:col-span-3"},ne={key:0,class:"col-span-12 shadow-default xl:col-span-3"},ie={class:"font-normal text-gray-800 text-base"},de={key:1,class:"col-span-12 shadow-default xl:col-span-3"},ce={key:2,class:"col-span-12 shadow-default xl:col-span-3"},ue={class:"font-normal text-gray-800 text-base"},pe={key:3,class:"col-span-12 shadow-default xl:col-span-3"},me={class:"col-span-12 shadow-default xl:col-span-6"},ge=Z(()=>r("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-300",id:"imagen"},"Peso máximo de la foto 2MB",-1)),fe={class:"col-span-12 shadow-default xl:col-span-3"},xe={class:"flex justify-end pt-2"},v="Editar Producto",_="productos",be={__name:"Edit",setup(f){const y=V("/images/productos/sin_foto.png"),U=W(),{permissions:x}=k().props.auth,e=G({id:"",origen:"",nombre:"",aduana:"",codigo_barra:"",stock:0,precio:0,stock_minimo:0,imagen:"",photo:"",costo_origen:null,costo_fecha:null,costo_real:0,costo_id:null,categorias:[]});D(()=>{w.value.options=k().props.lista_categorias;var t=k().props.producto;console.log("datos ",t),e.id=t.id,e.nombre=t.nombre,e.origen=t.origen,e.aduana=t.aduana,e.codigo_barra=t.codigo_barra,e.precio=t.precio,e.stock=t.stock,e.stock_minimo=t.stock_minimo,e.stock_futuro=t.stock_futuro,e.costo_real=t.costos_reales.length>0?t.costos_reales[0].monto:0,e.costo_origen=t.costos_reales.length>0?t.costos_reales[0].origen:null,e.costo_id=t.costos_reales.length>0?t.costos_reales[0].id:null,e.costo_fecha=t.costos_reales.length>0?t.costos_reales[0].fecha:null,t.categorias.length>0&&t.categorias.forEach(a=>{e.categorias.push(a.id)}),y.value=t.imagen,e.imagen=t.imagen});const T=()=>{e.clearErrors(),e.post(route(_+".update",e.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{F("success","Mensaje","Producto Actualizado"),setTimeout(()=>{I.get(route(_+".show",e.id))},1e3)},onFinish:()=>{},onError:()=>{}})},w=V({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]}),E=t=>{t.target.value.length>0&&(e.stock_futuro=parseFloat(e.stock_futuro)+parseFloat(t.target.value))},F=(t,a,d)=>{U.add({severity:t,summary:a,detail:d,life:3e3})},P=()=>{I.get(route(_+".index"))},z=t=>{t.preventDefault(),e.photo=t.target.files[0];let a=t.target.files;if(a&&a[0]){let d=new FileReader;d.onload=c=>{y.value=c.target.result},d.readAsDataURL(a[0])}};return(t,a)=>{const d=C("Toast"),c=C("InputText");return p(),u(B,null,[s(o(K),{title:v}),s(A,{pagina:[{label:"Productos",link:!0,url:t.route(_+".index")},{label:v,link:!1}]},{default:M(()=>[r("div",H,[s(d),r("div",{class:"px-3 col-span-full flex justify-between items-center"},[r("h5",{class:"text-2xl font-medium"},h(v))]),r("div",J,[r("form",{onSubmit:j(T,["prevent"])},[r("div",X,[r("div",ee,[s(n,{for:"origen",value:"Origen",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"origen",modelValue:o(e).origen,"onUpdate:modelValue":a[0]||(a[0]=l=>o(e).origen=l),placeholder:"Ingrese origen",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.origen},null,8,["message"])]),r("div",oe,[s(n,{for:"nombre",value:"Nombre",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"nombre",modelValue:o(e).nombre,"onUpdate:modelValue":a[1]||(a[1]=l=>o(e).nombre=l),placeholder:"Ingrese nombre",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.nombre},null,8,["message"])]),r("div",te,[s(n,{for:"categorias",value:"Categoría",class:"block text-base font-medium leading-6 text-gray-900"}),s(o(L),R({id:"categorias",modelValue:o(e).categorias,"onUpdate:modelValue":a[2]||(a[2]=l=>o(e).categorias=l),class:"w-full"},w.value),null,16,["modelValue"])]),r("div",se,[s(n,{for:"aduana",value:"Aduana",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"aduana",modelValue:o(e).aduana,"onUpdate:modelValue":a[3]||(a[3]=l=>o(e).aduana=l),placeholder:"Ingrese aduana",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.aduana},null,8,["message"])]),r("div",ae,[s(n,{for:"codigo_barra",value:"Código barra",class:"block text-base font-medium leading-6 text-gray-900"}),s(c,{type:"text",id:"codigo_barra",modelValue:o(e).codigo_barra,"onUpdate:modelValue":a[4]||(a[4]=l=>o(e).codigo_barra=l),placeholder:"Ingrese Código barra",pt:{root:{class:"h-9 w-full"}}},null,8,["modelValue"]),s(i,{class:"mt-1 text-xs",message:o(e).errors.codigo_barra},null,8,["message"])]),r("div",re,[s(n,{for:"stock",value:"Stock",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":a[5]||(a[5]=l=>o(e).stock=l),step:"1",min:"0",onKeyup:a[6]||(a[6]=l=>E(l)),class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,544),[[g,o(e).stock]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.stock},null,8,["message"])]),r("div",le,[s(n,{for:"stock_minimo",value:"Stock Minimo",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":a[7]||(a[7]=l=>o(e).stock_minimo=l),step:"1",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[g,o(e).stock_minimo]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.stock_minimo},null,8,["message"])]),o(x).includes("productos-editar_precio")==!1?(p(),u("div",ne,[s(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),r("h3",ie,h(o(e).precio),1)])):b("",!0),o(x).includes("productos-editar_precio")?(p(),u("div",de,[s(n,{for:"costo_real",value:"Precio",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":a[8]||(a[8]=l=>o(e).precio=l),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[g,o(e).precio]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.precio},null,8,["message"])])):b("",!0),o(x).includes("productos-costoreal")==!1?(p(),u("div",ce,[s(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),r("h3",ue,h(o(e).costo_real),1)])):b("",!0),o(x).includes("productos-costoreal")?(p(),u("div",pe,[s(n,{for:"costo_real",value:"Costo Real",class:"block text-base font-medium leading-6 text-gray-900"}),m(r("input",{type:"number",required:"","onUpdate:modelValue":a[9]||(a[9]=l=>o(e).costo_real=l),step:"0.02",min:"0",class:"p-inputtext text-end p-component h-9 w-full font-sans font-normal text-gray-700 dark:text-white/80 bg-white dark:bg-gray-900 border border-gray-300 dark:border-blue-900/40 transition-colors duration-200 appearance-none rounded-md text-sm px-2 py-1"},null,512),[[g,o(e).costo_real]]),s(i,{class:"mt-1 text-xs",message:o(e).errors.costo_real},null,8,["message"])])):b("",!0),m(r("input",{type:"hidden",id:"stock_futuro","onUpdate:modelValue":a[10]||(a[10]=l=>o(e).stock_futuro=l)},null,512),[[g,o(e).stock_futuro]]),r("div",me,[s(n,{for:"file_input1",value:"Imagen",class:"block text-base font-medium leading-6 text-gray-900"}),r("input",{onInput:z,type:"file",class:"block w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-medium file:bg-gray-200 file:text-gray-700 hover:file:bg-gray-300 hover:file:cursor-pointer",accept:"image/x-png,image/gif,image/jpeg"},null,32),ge,s(i,{class:"mt-1 text-xs",message:o(e).errors.imagen},null,8,["message"])]),r("div",fe,[r("div",{class:"imagePreviewWrapper",style:$({"background-image":`url(${y.value})`})},null,4)])]),r("div",xe,[s(o(S),{label:"Cancelar",pt:{root:"mr-5 py-1"},severity:"danger",size:"small",onClick:P,type:"button"}),s(o(S),{label:"Guardar",size:"small",type:"submit",class:q({"opacity-50":o(e).processing}),disabled:o(e).processing},null,8,["class","disabled"])])],40,Q)])])]),_:1},8,["pagina"])],64)}}},eo=Y(be,[["__scopeId","data-v-3105b4da"]]);export{eo as default};
