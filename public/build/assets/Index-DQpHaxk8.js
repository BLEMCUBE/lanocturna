import{r as x,w as H,o as K,R as L,S as B,f as m,g as p,W as c,E as a,Y as W,j as e,D as h,T as g,ah as Y,O as D,x as Z,F as E,A as G,z as J,u as V,y as $}from"./@vue-BLfC86mR.js";import{_ as Q}from"./AppLayout-Dcv1NtsU.js";import{K as w,T,O as _,Z as X}from"./@inertiajs-CMyvZJ1U.js";import{S as ee}from"./sweetalert2-DhUVDY3P.js";import{aH as te,h as oe}from"./primevue-DAb-R_om.js";import{s as re}from"./@vueform-CFisUGo2.js";import{_ as se}from"./Pagination-CNhFcssC.js";import ae from"./CrearMasivoModal-CSGtmkS9.js";import"./logo-C8Jea0Rc.js";import"./pinia-IH2nVPr3.js";import"./@vueuse-BEDuuF1-.js";import"./@headlessui-CeD_lX9I.js";import"./@heroicons-CatyAbtO.js";import"./loader-D-Kjbgh8.js";import"./laravel-echo-CPaRdDZ5.js";import"./pusher-js-Ck_2Ecjm.js";import"./axios-ngrFHoWO.js";import"./deepmerge-Bh_OW9zV.js";import"./qs-ErqSC6LE.js";import"./side-channel-QUUGuE8A.js";import"./get-intrinsic-Dq22P_nh.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-B8JEaMPD.js";import"./dunder-proto-DWby8p2a.js";import"./call-bind-apply-helpers-CZLbXZmW.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bind-BmU8hBQf.js";import"./object-inspect-ronoqz_t.js";import"./nprogress-Di1940OM.js";import"./lodash.clonedeep-D_Ud3gdH.js";import"./lodash.isequal-BY8B19Vp.js";import"./InputError-DdpGOVhM.js";import"./InputLabel-CkCrW4zf.js";const ie={class:"card px-4 mb-4 bg-white col-span-12 rounded-lg shadow-lg 2xl:col-span-12"},le={class:"px-3 pb-2 col-span-full flex justify-end items-center"},ne=e("label",{class:"mx-2 font-normal text-md text-gray-800 dark:text-white"}," Exportar imagenes en excel ",-1),ce={class:"w-8 h-8 rounded bg-green-600 flex justify-center mx-5 items-center text-base font-semibold text-white hover:bg-green-600"},de=["href"],ue=e("i",{class:"fas fa-file-excel text-white"},null,-1),me=[ue],pe={class:"align-middle py-4"},he={class:"grid grid-cols-12 gap-4 m-3"},fe={class:"flex justify-content-end text-md col-span-12 lg:col-span-4 2xl:col-span-3"},xe={class:"flex justify-content-end text-md col-span-12 lg:col-span-8 2xl:col-span-9"},ge={style:{overflow:"auto","max-height":"700px"}},_e={class:"w-full text-md bg-white shadow-md rounded mb-4"},be=e("thead",{style:{position:"sticky"},class:"top-0 z-[1]"},[e("tr",{class:"bg-secondary-100"},[e("th",{class:"p-1.5"},"Stock"),e("th",null,"Stock futuro"),e("th",{class:"p-2"},"Imagen"),e("th",null,"Origen"),e("th",null,"Nombre"),e("th",null,"Categoria"),e("th",null,"Acciones")])],-1),ve=["onClick"],we=["onClick"],ye=["onClick"],ke=["src"],Ce=["onClick"],Se=["onClick"],Fe=["onClick"],je={class:"flex justify-end"},Be=["onClick"],De=e("i",{class:"fa-regular fa-copy"},null,-1),Ee=[De],Ve=["onClick"],$e=e("i",{class:"fas fa-trash-alt"},null,-1),Te=[$e],y="Productos",i="productos",bt={__name:"Index",props:{productos:{type:Object,default:()=>({})},filtro:{type:Object,default:()=>({})}},setup(b){const k=b,O=te(),z=x(),v=x(!1),{permissions:C}=w().props.auth,I=T({id:""});let l=x([k.filtro.categoria]),d=x(k.filtro.buscar);const M=()=>{_.get(route(i+".index"),{buscar:d.value,categoria:l.value},{preserveState:!0,replace:!0})},S=T({id:""});H(l,o=>{_.get(route(i+".index"),{categoria:o,buscar:d.value},{preserveState:!0,replace:!0})});const N=(o,r,n)=>{if(parseFloat(o)<=parseFloat(r)&&parseFloat(o)==parseFloat(n))return"bg-red-700 text-white";if(parseFloat(o)<=parseFloat(r)&&parseFloat(n)>parseFloat(o))return"bg-orange-500 text-black"},P=o=>{_.get(route(i+".show",o))},U=o=>{S.clearErrors(),S.post(route(i+".duplicar",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{j("success","Mensaje","Producto Duplicado")},onFinish:()=>{},onError:()=>{}})},A=(o,r)=>{ee.mixin({buttonsStyling:!0}).fire({width:350,title:"Seguro de eliminar "+r,text:"Se eliminará definitivamente",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",cancelButtonColor:"red",confirmButtonColor:"#2563EB"}).then(f=>{f.isConfirmed&&I.delete(route(i+".destroy",o),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{j("success","Eliminado","Se ha eliminado"),setTimeout(()=>{_.get(route(i+".index"))},1e3)}})})},F=x({value:"",closeOnSelect:!0,placeholder:"Categorías",mode:"tags",searchable:!0,options:[]});K(()=>{z.value=w().props.productos.data,F.value.options=w().props.lista_categorias});const j=(o,r,n)=>{O.add({severity:o,summary:r,detail:n,life:3e3})},R=()=>{_.get(route(i+".create"))},u=o=>{P(o)};return(o,r)=>{const n=L("InputText"),f=B("tooltip"),q=B("debounce");return p(),m(E,null,[c(a(X),{title:y}),c(Q,{pagina:[{label:y,link:!1}]},{default:W(()=>[e("div",ie,[e("div",{class:"px-3 p-2 col-span-full flex justify-start items-center"},[e("h5",{class:"text-2xl font-medium pr-5"},h(y))]),e("div",le,[g(e("input",{type:"checkbox",class:"rounded-md border-gray-300 text-xl text-primary-900 bg-primary-900 hover:bg-primary-100 shadow-sm w-5 h-5 cursor-pointer","onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t)},null,512),[[Y,v.value]]),ne,c(ae),g((p(),m("div",ce,[e("a",{href:o.route(i+".exportar",{categoria:a(l),foto:v.value}),target:"_blank",class:"py-auto"},me,8,de)])),[[f,{value:"Descargar Excel",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]),c(a(oe),{size:"small",label:"Crear Producto",severity:"success",onClick:R})]),e("div",pe,[e("div",he,[e("div",fe,[g(c(n,{"debounce-events":["keyup"],class:"w-full",modelValue:a(d),"onUpdate:modelValue":r[1]||(r[1]=t=>D(d)?d.value=t:d=t),placeholder:"Buscar"},null,8,["modelValue"]),[[q,M,"500ms"]])]),e("div",xe,[c(a(re),Z({id:"categorias",modelValue:a(l),"onUpdate:modelValue":r[2]||(r[2]=t=>D(l)?l.value=t:l=t),class:"w-full"},F.value),null,16,["modelValue"])])]),e("div",ge,[e("table",_e,[be,e("tbody",null,[(p(!0),m(E,null,G(b.productos.data,t=>(p(),m("tr",{class:J(["border text-center hover:cursor-pointer hover:bg-gray-100 hover:text-black",N(t.stock,t.stock_minimo,t.stock_futuro)])},[e("td",{onClick:s=>u(t.id)},h(t.stock??""),9,ve),e("td",{onClick:s=>u(t.id)},h(t.stock_futuro),9,we),e("td",{onClick:s=>u(t.id)},[e("img",{class:"rounded bg-white shadow-2xl border-2 text-center w-10 h-10 object-contain",src:t.imagen,alt:"image"},null,8,ke)],8,ye),e("td",{onClick:s=>u(t.id)},h(t.origen),9,Ce),e("td",{onClick:s=>u(t.id)},h(t.nombre),9,Se),e("td",{onClick:s=>u(t.id)},h(t.categorias.map(s=>s.name).join(",")),9,Fe),e("td",null,[e("div",je,[e("div",null,[a(C).includes("productos-eliminar")?g((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-green-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-green-600",onClick:$(s=>U(t.id),["prevent"])},Ee,8,Be)),[[f,{value:"Duplicar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):V("",!0)]),e("div",null,[a(C).includes("productos-eliminar")?g((p(),m("button",{key:0,class:"w-8 h-8 rounded bg-red-700 border border-white px-2 py-1 text-base font-normal text-white m-1 hover:bg-red-600",onClick:$(s=>A(t.id,t.nombre),["prevent"])},Te,8,Ve)),[[f,{value:"Eliminar",pt:{text:"bg-gray-500 p-1 text-xs text-white rounded"}},void 0,{top:!0}]]):V("",!0)])])])],2))),256))])])]),c(se,{elements:b.productos},null,8,["elements"])])])]),_:1},8,["pagina"])],64)}}};export{bt as default};
